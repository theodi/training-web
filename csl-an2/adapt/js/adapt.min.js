function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _newArrowCheck(innerThis,boundThis){if(innerThis!==boundThis){throw new TypeError("Cannot instantiate an arrow function")}}define("core/js/wait",[],function(){var Wait=Backbone.Controller.extend({initialize:function initialize(){_.bindAll(this,"begin","end")},_waitCount:0,_callbackHandle:null,_timeoutHandlerId:null,_timeoutInSeconds:7,isWaiting:function isWaiting(){return this._waitCount!==0},startTimer:function startTimer(){this.stopTimer();this._timeoutHandlerId=setInterval(function(){while(this._waitCount>0){this.end()}if(this._waitCount===0){this.stopTimer()}}.bind(this),this._timeoutInSeconds*1000)},stopTimer:function stopTimer(){if(this._timeoutHandlerId){clearInterval(this._timeoutHandlerId)}},begin:function begin(){if(!this.isWaiting()){this.trigger("wait")}this._waitCount++;if(this._callbackHandle){clearTimeout(this._callbackHandle);this._callbackHandle=null}this.startTimer();return this},end:function end(){if(!this.isWaiting()){return this}this._waitCount--;if(this._waitCount===0){this.stopTimer()}if(this.isWaiting()){return this}if(this._callbackHandle){return this}this._callbackHandle=setTimeout(function(){this._callbackHandle=null;this.trigger("ready")}.bind(this),0);return this},queue:function queue(callback){var _this=this;if(!callback){this.begin();return new Promise(function(resolve){_newArrowCheck(this,_this);this.once("ready",resolve);this.end()}.bind(this))}this.begin();this.once("ready",callback);this.end();return this},for:function _for(callback){this.begin();_.defer(function(){callback(_.once(this.end))}.bind(this));return this}});return Wait});define("core/js/models/lockingModel",[],function(){var _set=Backbone.Model.prototype.set;Object.assign(Backbone.Model.prototype,{set:function set(attrName,attrVal){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var stopProcessing=_typeof(attrName)==="object"||typeof attrVal!=="boolean"||!this.isLocking(attrName);if(stopProcessing)return _set.apply(this,arguments);var isSettingValueForSpecificPlugin=options&&options.pluginName;if(!isSettingValueForSpecificPlugin){console.error("Must supply a pluginName to change a locked attribute");options.pluginName="compatibility"}var pluginName=options.pluginName;if(this.defaults[attrName]!==undefined){this._lockedAttributes[attrName]=!this.defaults[attrName]}var lockingValue=this._lockedAttributes[attrName];var isAttemptingToLock=lockingValue===attrVal;if(isAttemptingToLock){this.setLockState(attrName,true,{pluginName:pluginName,skipcheck:true});return _set.call(this,attrName,lockingValue)}this.setLockState(attrName,false,{pluginName:pluginName,skipcheck:true});var totalLockValue=this.getLockCount(attrName,{skipcheck:true});if(totalLockValue===0){return _set.call(this,attrName,!lockingValue)}return this},setLocking:function setLocking(attrName,defaultLockValue){if(this.isLocking(attrName))return;if(!this._lockedAttributes)this._lockedAttributes={};this._lockedAttributes[attrName]=defaultLockValue},unsetLocking:function unsetLocking(attrName){if(!this.isLocking(attrName))return;if(!this._lockedAttributes)return;delete this._lockedAttributes[attrName];delete this._lockedAttributesValues[attrName];if(Object.keys(this._lockedAttributes).length===0){delete this._lockedAttributes;delete this._lockedAttributesValues}},isLocking:function isLocking(attrName){var isCheckingGeneralLockingState=attrName===undefined;var isUsingLockedAttributes=Boolean(this.lockedAttributes||this._lockedAttributes);if(isCheckingGeneralLockingState){return isUsingLockedAttributes}if(!isUsingLockedAttributes)return false;if(!this._lockedAttributes){this._lockedAttributes=_.result(this,"lockedAttributes")}var isAttributeALockingAttribute=this._lockedAttributes.hasOwnProperty(attrName);if(!isAttributeALockingAttribute)return false;if(!this._lockedAttributesValues){this._lockedAttributesValues={}}if(!this._lockedAttributesValues[attrName]){this._lockedAttributesValues[attrName]={}}return true},isLocked:function isLocked(attrName,options){var shouldSkipCheck=options&&options.skipcheck;if(!shouldSkipCheck){var stopProcessing=!this.isLocking(attrName);if(stopProcessing)return}return this.getLockCount(attrName)>0},getLockCount:function getLockCount(attrName,options){var _this2=this;var shouldSkipCheck=options&&options.skipcheck;if(!shouldSkipCheck){var stopProcessing=!this.isLocking(attrName);if(stopProcessing)return}var isGettingValueForSpecificPlugin=options&&options.pluginName;if(isGettingValueForSpecificPlugin){return this._lockedAttributesValues[attrName][options.pluginName]?1:0}var lockingAttributeValues=Object.values(this._lockedAttributesValues[attrName]);var lockingAttributeValuesSum=lockingAttributeValues.reduce(function(sum,value){_newArrowCheck(this,_this2);return sum+(value?1:0)}.bind(this),0);return lockingAttributeValuesSum},setLockState:function setLockState(attrName,value,options){var shouldSkipCheck=options&&options.skipcheck;if(!shouldSkipCheck){var stopProcessing=!this.isLocking(attrName);if(stopProcessing)return this}var isSettingValueForSpecificPlugin=options&&options.pluginName;if(!isSettingValueForSpecificPlugin){console.error("Must supply a pluginName to set a locked attribute lock value");options.pluginName="compatibility"}if(value){this._lockedAttributesValues[attrName][options.pluginName]=value}else{delete this._lockedAttributesValues[attrName][options.pluginName]}return this}})});define("core/js/adapt",["core/js/wait","core/js/models/lockingModel"],function(Wait){var Adapt=function(_Backbone$Model){"use strict";_inherits(Adapt,_Backbone$Model);var _super=_createSuper(Adapt);function Adapt(){_classCallCheck(this,Adapt);return _super.apply(this,arguments)}_createClass(Adapt,[{key:"initialize",value:function initialize(){this.loadScript=window.__loadScript;this.location={};this.store={};this.setupWait()}},{key:"defaults",value:function defaults(){return{_canScroll:true,_outstandingCompletionChecks:0,_pluginWaitCount:0,_isStarted:false,_shouldDestroyContentObjects:true}}},{key:"lockedAttributes",value:function lockedAttributes(){return{_canScroll:false}}},{key:"init",value:function init(){var _this3=this;this.addDirection();this.disableAnimation();this.trigger("adapt:preInitialize");this.deferUntilCompletionChecked(function(){_newArrowCheck(this,_this3);this.trigger("adapt:start");if(!Backbone.History.started){Backbone.history.start()}this.set("_isStarted",true);this.trigger("adapt:initialize")}.bind(this))}},{key:"checkingCompletion",value:function checkingCompletion(){var outstandingChecks=this.get("_outstandingCompletionChecks");this.set("_outstandingCompletionChecks",outstandingChecks+1)}},{key:"checkedCompletion",value:function checkedCompletion(){var outstandingChecks=this.get("_outstandingCompletionChecks");this.set("_outstandingCompletionChecks",outstandingChecks-1)}},{key:"deferUntilCompletionChecked",value:function deferUntilCompletionChecked(callback){var _this4=this;if(this.get("_outstandingCompletionChecks")===0)return callback();var _checkIfAnyChecksOutstanding=function checkIfAnyChecksOutstanding(model,outstandingChecks){_newArrowCheck(this,_this4);if(outstandingChecks!==0)return;this.off("change:_outstandingCompletionChecks",_checkIfAnyChecksOutstanding);callback()}.bind(this);this.on("change:_outstandingCompletionChecks",_checkIfAnyChecksOutstanding)}},{key:"setupWait",value:function setupWait(){var _this5=this;this.wait=new Wait;var beginWait=function beginWait(){_newArrowCheck(this,_this5);this.log.deprecated("Use Adapt.wait.begin() as Adapt.trigger('plugin:beginWait') may be removed in the future");this.wait.begin()}.bind(this);var endWait=function endWait(){_newArrowCheck(this,_this5);this.log.deprecated("Use Adapt.wait.end() as Adapt.trigger('plugin:endWait') may be removed in the future");this.wait.end()}.bind(this);var ready=function ready(){_newArrowCheck(this,_this5);if(this.wait.isWaiting()){return}var isEventListening=this._events["plugins:ready"];if(!isEventListening){return}this.log.deprecated("Use Adapt.wait.queue(callback) as Adapt.on('plugins:ready', callback) may be removed in the future");this.trigger("plugins:ready")}.bind(this);this.listenTo(this.wait,"ready",ready);this.listenTo(this,{"plugin:beginWait":beginWait,"plugin:endWait":endWait})}},{key:"isWaitingForPlugins",value:function isWaitingForPlugins(){this.log.deprecated("Use Adapt.wait.isWaiting() as Adapt.isWaitingForPlugins() may be removed in the future");return this.wait.isWaiting()}},{key:"checkPluginsReady",value:function checkPluginsReady(){this.log.deprecated("Use Adapt.wait.isWaiting() as Adapt.checkPluginsReady() may be removed in the future");if(this.isWaitingForPlugins()){return}this.trigger("plugins:ready")}},{key:"navigateToElement",value:function navigateToElement(){}},{key:"scrollTo",value:function scrollTo(){}},{key:"register",value:function register(name,object){var _this6=this;if(Array.isArray(name)){name.forEach(function(name){_newArrowCheck(this,_this6);return this.register(name,object)}.bind(this));return object}if(name.split(" ").length>1){this.register(name.split(" "),object);return object}if(!object.view&&!object.model||object instanceof Backbone.View){this.log&&this.log.deprecated("View-only registrations are no longer supported");object={view:object}}if(object.view&&!object.view.template){object.view.template=name}var isModelSetAndInvalid=object.model&&!(object.model.prototype instanceof Backbone.Model)&&!(object.model instanceof Function);if(isModelSetAndInvalid){throw new Error("The registered model is not a Backbone.Model or Function")}var isViewSetAndInvalid=object.view&&!(object.view.prototype instanceof Backbone.View)&&!(object.view instanceof Function);if(isViewSetAndInvalid){throw new Error("The registered view is not a Backbone.View or Function")}this.store[name]=Object.assign({},this.store[name],object);return object}},{key:"getViewName",value:function getViewName(nameModelViewOrData){var _this7=this;if(typeof nameModelViewOrData==="string"){return nameModelViewOrData}if(nameModelViewOrData instanceof Backbone.Model){nameModelViewOrData=nameModelViewOrData.toJSON()}if(nameModelViewOrData instanceof Backbone.View){var foundName;_.find(this.store,function(entry,name){_newArrowCheck(this,_this7);if(!entry||!entry.view)return;if(!(nameModelViewOrData instanceof entry.view))return;foundName=name;return true}.bind(this));return foundName}if(nameModelViewOrData instanceof Object){var names=[typeof nameModelViewOrData._view==="string"&&nameModelViewOrData._view,typeof nameModelViewOrData._component==="string"&&nameModelViewOrData._component,typeof nameModelViewOrData._type==="string"&&nameModelViewOrData._type].filter(Boolean);if(names.length){var name=names.find(function(name){_newArrowCheck(this,_this7);return this.store[name]&&this.store[name].view}.bind(this));return name||names.pop()}}throw new Error("Cannot derive view class name from input")}},{key:"getViewClass",value:function getViewClass(nameModelViewOrData){var name=this.getViewName(nameModelViewOrData);var object=this.store[name];if(!object){this.log.warnOnce("A view for '".concat(name,"' isn't registered in your project"));return}var isBackboneView=object.view&&object.view.prototype instanceof Backbone.View;if(!isBackboneView&&object.view instanceof Function){return object.view()}return object.view}},{key:"getModelName",value:function getModelName(nameModelOrData){var _this8=this;if(typeof nameModelOrData==="string"){return nameModelOrData}if(nameModelOrData instanceof Backbone.Model){nameModelOrData=nameModelOrData.toJSON()}if(nameModelOrData instanceof Object){var names=[typeof nameModelOrData._model==="string"&&nameModelOrData._model,typeof nameModelOrData._component==="string"&&nameModelOrData._component,typeof nameModelOrData._type==="string"&&nameModelOrData._type].filter(Boolean);if(names.length){var name=names.find(function(name){_newArrowCheck(this,_this8);return this.store[name]&&this.store[name].model}.bind(this));return name||names.pop()}}throw new Error("Cannot derive model class name from input")}},{key:"getModelClass",value:function getModelClass(nameModelOrData){var name=this.getModelName(nameModelOrData);var object=this.store[name];if(!object){this.log.warnOnce("A model for '".concat(name,"' isn't registered in your project"));return}var isBackboneModel=object.model&&object.model.prototype instanceof Backbone.Model;if(!isBackboneModel&&object.model instanceof Function){return object.model()}return object.model}},{key:"mapById",value:function mapById(id){return this.data.mapById(id)}},{key:"findById",value:function findById(id){return this.data.findById(id)}},{key:"findViewByModelId",value:function findViewByModelId(id){var _this9=this;var model=this.data.findById(id);if(!model)return;if(model===this.parentView.model)return this.parentView;var idPathToView=[id];var currentLocationId=this.location._currentId;var currentLocationModel=model.getAncestorModels().find(function(model){_newArrowCheck(this,_this9);var modelId=model.get("_id");if(modelId===currentLocationId)return true;idPathToView.unshift(modelId)}.bind(this));if(!currentLocationModel){return console.warn("Adapt.findViewByModelId() unable to find view for model id: ".concat(id))}var foundView=idPathToView.reduce(function(view,currentId){_newArrowCheck(this,_this9);return view&&view.childViews&&view.childViews[currentId]}.bind(this),this.parentView);return foundView}},{key:"parseRelativeString",value:function parseRelativeString(relativeString){var splitIndex=relativeString.search(/[ +\-\d]{1}/);var type=relativeString.slice(0,splitIndex).replace(/^@/,"");var offset=parseInt(relativeString.slice(splitIndex).trim()||0);return{type:type,offset:offset}}},{key:"addDirection",value:function addDirection(){var defaultDirection=this.config.get("_defaultDirection");$("html").addClass("dir-"+defaultDirection).attr("dir",defaultDirection)}},{key:"disableAnimation",value:function disableAnimation(){var disableAnimationArray=this.config.get("_disableAnimationFor");var disableAnimation=this.config.get("_disableAnimation");if(disableAnimationArray){for(var i=0,l=disableAnimationArray.length;i<l;i++){if(!$("html").is(disableAnimationArray[i]))continue;this.config.set("_disableAnimation",true);$("html").addClass("disable-animation");console.log("Animation disabled.")}return}$("html").toggleClass("disable-animation",disableAnimation===true)}},{key:"remove",value:function(){var _remove=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var currentView;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:currentView=this.parentView;if(currentView){currentView.model.setOnChildren("_isReady",false);currentView.model.set("_isReady",false)}this.trigger("preRemove",currentView);_context.next=5;return this.wait.queue();case 5:if(currentView&&this.get("_shouldDestroyContentObjects")){currentView.destroy()}this.trigger("remove",currentView);_.defer(this.trigger.bind(this),"postRemove",currentView);case 8:case"end":return _context.stop();}}},_callee,this)}));function remove(){return _remove.apply(this,arguments)}return remove}()},{key:"componentStore",get:function get(){this.log&&this.log.deprecated("Adapt.componentStore, please use Adapt.store instead");return this.store}}]);return Adapt}(Backbone.Model);return new Adapt});define("core/js/templateRenderEvent",[],function(){var TemplateRenderEvent=function(_Backbone$Controller){"use strict";_inherits(TemplateRenderEvent,_Backbone$Controller);var _super2=_createSuper(TemplateRenderEvent);function TemplateRenderEvent(){_classCallCheck(this,TemplateRenderEvent);return _super2.apply(this,arguments)}_createClass(TemplateRenderEvent,[{key:"initialize",value:function initialize(type,name,mode,value,args){this.type=type;this.name=name;this.mode=mode;this.value=value;this.args=args}}]);return TemplateRenderEvent}(Backbone.Controller);return TemplateRenderEvent});define("core/js/templates",["core/js/adapt","handlebars","./templateRenderEvent"],function(Adapt,Handlebars,TemplateRenderEvent){function onRender(cb){var _this10=this;var intercept=function intercept(object,name,mode,cb){_newArrowCheck(this,_this10);return object[name]=cb.bind(object,object[name],name,mode)}.bind(this);Object.keys(Handlebars.templates).forEach(function(name){_newArrowCheck(this,_this10);intercept(Handlebars.templates,name,"template",cb)}.bind(this));Object.keys(Handlebars.partials).forEach(function(name){_newArrowCheck(this,_this10);intercept(Handlebars.partials,name,"partial",cb)}.bind(this))}onRender(function(template,name,mode){for(var _len=arguments.length,args=new Array(_len>3?_len-3:0),_key=3;_key<_len;_key++){args[_key-3]=arguments[_key]}var preRenderEvent=new TemplateRenderEvent("".concat(mode,":preRender"),name,mode,null,args);Adapt.trigger(preRenderEvent.type,preRenderEvent);var value=template.apply(void 0,_toConsumableArray(preRenderEvent.args));var postRenderEvent=new TemplateRenderEvent("".concat(mode,":postRender"),name,mode,value,preRenderEvent.args);Adapt.trigger(postRenderEvent.type,postRenderEvent);return postRenderEvent.value})});define("core/js/fixes/img.lazyload",["core/js/adapt","../templates"],function(Adapt){Adapt.on("app:dataReady",function(){var config=Adapt.config.get("_fixes");if(config&&config._imgLazyLoad===false)return;applyImgLoadingFix()});function applyImgLoadingFix(){var findImgTag=/<img([^>]*)>/gi;var hasLoadingAttr=/ loading=/gi;Adapt.on("template:postRender partial:postRender",function(event){var _this11=this;var imgTagsFound=event.value.match(findImgTag);if(!imgTagsFound){return}event.value=imgTagsFound.reduce(function(value,img){_newArrowCheck(this,_this11);if(hasLoadingAttr.test(img)){return value}return value.replace(img,img.replace(findImgTag,"<img loading=\"eager\"$1>"))}.bind(this),event.value)})}});define("core/js/fixes",["./fixes/img.lazyload"],function(){});define("core/js/a11y/browserFocus",["core/js/adapt"],function(Adapt){var BrowserFocus=Backbone.Controller.extend({initialize:function initialize(){_.bindAll(this,"_onBlur","_onClick");this.$body=$("body");this.listenTo(Adapt,{"accessibility:ready":this._attachEventListeners})},_attachEventListeners:function _attachEventListeners(){this.$body.on("blur","*",this._onBlur).on("blur",this._onBlur);this.$body[0].addEventListener("click",this._onClick,true)},_onBlur:function _onBlur(event){var config=Adapt.a11y.config;if(!config._isEnabled||!config._options._isFocusNextOnDisabled){return}var $element=$(event.target);if($element.is("[data-a11y-force-focus]")){_.defer(function(){$element.removeAttr("tabindex data-a11y-force-focus")})}if(event.target!==event.currentTarget){return}if(!$element.is("[disabled]")){return}Adapt.a11y.focusNext($element)},_onClick:function _onClick(event){var config=Adapt.a11y.config;if(!config._isEnabled||!config._options._isFocusOnClickEnabled){return}var $element=$(event.target);var $stack=$().add($element).add($element.parents());var $focusable=$stack.filter(config._options._tabbableElements);if(!$focusable.length){return}$focusable[0].focus()}});return BrowserFocus});define("core/js/a11y/focusOptions",[],function(){var FocusOptions=function FocusOptions(options){_.defaults(this,options,{preventScroll:true,defer:false})};return FocusOptions});define("core/js/a11y/keyboardFocusOutline",["core/js/adapt"],function(Adapt){var KeyboardFocusOutline=Backbone.Controller.extend({initialize:function initialize(){_.bindAll(this,"_onKeyDown");this.$html=$("html");this.showOnKeys={9:true,13:true,32:true,37:true,38:true,39:true,40:true};this.listenTo(Adapt,{"accessibility:ready":this._attachEventListeners})},_attachEventListeners:function _attachEventListeners(){document.addEventListener("keydown",this._onKeyDown);this._start()},_start:function _start(){var config=Adapt.a11y.config;if(config._options._isFocusOutlineDisabled){this.$html.addClass("a11y-disable-focusoutline");return}if(!config._isEnabled||!config._options._isFocusOutlineKeyboardOnlyEnabled){return}this.$html.addClass("a11y-disable-focusoutline")},_onKeyDown:function _onKeyDown(event){var config=Adapt.a11y.config;if(config._options._isFocusOutlineDisabled){this.$html.addClass("a11y-disable-focusoutline");return}if(!config._isEnabled||!config._options._isFocusOutlineKeyboardOnlyEnabled||!this.showOnKeys[event.keyCode]){return}var $element=$(event.target);if(!$element.is(config._options._tabbableElements)||$element.is(config._options._focusOutlineKeyboardOnlyIgnore)){return}this.$html.removeClass("a11y-disable-focusoutline")}});return KeyboardFocusOutline});define("core/js/a11y/log",["core/js/adapt"],function(Adapt){var Log=function(_Backbone$Controller2){"use strict";_inherits(Log,_Backbone$Controller2);var _super3=_createSuper(Log);function Log(){_classCallCheck(this,Log);return _super3.apply(this,arguments)}_createClass(Log,[{key:"initialize",value:function initialize(){this._warned={}}},{key:"_hasWarned",value:function _hasWarned(args){var config=Adapt.a11y.config;if(!config._options._warnFirstOnly){return false}var hash=args.map(String).join(":");if(this._warned[hash]){return true}this._warned[hash]=true;return false}},{key:"_canWarn",value:function _canWarn(){var config=Adapt.a11y.config;return Boolean(config._options._warn)}},{key:"removed",value:function removed(){var _Adapt$log;for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}if(!this._canWarn){return}args=["A11Y"].concat(args);if(this._hasWarned(args)){return}(_Adapt$log=Adapt.log).removed.apply(_Adapt$log,_toConsumableArray(args));return this}},{key:"deprecated",value:function deprecated(){var _Adapt$log2;for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3]}if(!this._canWarn){return}args=["A11Y"].concat(args);if(this._hasWarned(args)){return}(_Adapt$log2=Adapt.log).deprecated.apply(_Adapt$log2,_toConsumableArray(args));return this}}]);return Log}(Backbone.Controller);return Log});define("core/js/a11y/scroll",[],function(){var Scroll=Backbone.Controller.extend({initialize:function initialize(){_.bindAll(this,"_onTouchStart","_onTouchEnd","_onScrollEvent","_onKeyDown");this._scrollDisabledElements=$([]);this.$window=$(window);this.$body=$("body");this._preventScrollOnKeys={37:true,38:true,39:true,40:true};this._ignoreKeysOnElementsMatching="textarea, input, select";this._isRunning=false;this._touchStartEventObject=null},disable:function disable($elements){$elements=$($elements);this._scrollDisabledElements=this._scrollDisabledElements.add($elements);this._checkRunning();return this},enable:function enable($elements){$elements=$($elements);if(!$elements||!$elements.length){this.clear();return this}this._scrollDisabledElements=this._scrollDisabledElements.not($elements);this._checkRunning();return this},clear:function clear(){this._scrollDisabledElements=$([]);this._checkRunning();return this},_checkRunning:function _checkRunning(){if(!this._scrollDisabledElements.length){this._stop();return}this._start()},_start:function _start(){if(this._isRunning){return}this._isRunning=true;window.addEventListener("touchstart",this._onTouchStart);window.addEventListener("touchend",this._onTouchEnd);window.addEventListener("touchmove",this._onScrollEvent,{passive:false});window.addEventListener("wheel",this._onScrollEvent,{passive:false});document.addEventListener("wheel",this._onScrollEvent,{passive:false});document.addEventListener("keydown",this._onKeyDown)},_onTouchStart:function _onTouchStart(event){event=$.event.fix(event);this._touchStartEventObject=event;return true},_onTouchEnd:function _onTouchEnd(){this._touchStartEventObject=null;return true},_onScrollEvent:function _onScrollEvent(event){event=$.event.fix(event);return this._preventScroll(event)},_onKeyDown:function _onKeyDown(event){event=$.event.fix(event);if(!this._preventScrollOnKeys[event.keyCode]){return}var $target=$(event.target);if($target.is(this._ignoreKeysOnElementsMatching)){return}return this._preventScroll(event)},_preventScroll:function _preventScroll(event){var isGesture=event.touches&&event.touches.length>1;if(isGesture){return}var $target=$(event.target);if(this._scrollDisabledElements.length){var scrollingParent=this._getScrollingParent(event,$target);if(scrollingParent.filter(this._scrollDisabledElements).length===0){this.$window.scroll();return}}event.preventDefault();return false},_getScrollingParent:function _getScrollingParent(event,$target){var isTouchEvent=event.type==="touchmove";var hasTouchStartEvent=this._touchStartEventObject&&this._touchStartEventObject.originalEvent;if(isTouchEvent&&!hasTouchStartEvent){return $target}var directionY=this._getScrollDirection(event);if(directionY==="none"){return this.$body}var parents=$target.parents();for(var i=0,l=parents.length;i<l;i++){var $parent=$(parents[i]);if($parent.is("body")){return this.$body}if(!this._isScrollable($parent)){continue}if(!this._isScrolling($parent,directionY)){continue}return $parent}return this.$body},_isScrollable:function _isScrollable($target){var scrollType=$target.css("overflow-y");if(scrollType!=="auto"&&scrollType!=="scroll"){return false}var pointerEvents=$target.css("pointer-events");if(pointerEvents==="none"){return false}return true},_isScrolling:function _isScrolling($target,directionY){var scrollTop=Math.ceil($target.scrollTop());var innerHeight=$target.outerHeight();var scrollHeight=$target[0].scrollHeight;var hasScrollingSpace=false;switch(directionY){case"down":hasScrollingSpace=scrollTop+innerHeight<scrollHeight;if(hasScrollingSpace){return true}break;case"up":hasScrollingSpace=scrollTop>0;if(hasScrollingSpace){return true}break;}return false},_getScrollDirection:function _getScrollDirection(event){var deltaY=this._getScrollDelta(event);if(deltaY===0){return"none"}return deltaY>0?"up":"down"},_getScrollDelta:function _getScrollDelta(event){var deltaY=0;var isTouchEvent=event.type==="touchmove";var originalEvent=event.originalEvent;if(isTouchEvent){var startOriginalEvent=this._touchStartEventObject.originalEvent;var currentY=originalEvent.pageY;var previousY=startOriginalEvent.pageY;if(currentY===0||currentY===previousY){currentY=originalEvent.touches[0].pageY;previousY=startOriginalEvent.touches[0].pageY}deltaY=currentY-previousY}else{var hasDeltaY=originalEvent.wheelDeltaY||originalEvent.deltaY!==undefined;if(hasDeltaY){deltaY=-originalEvent.deltaY}else{deltaY=originalEvent.wheelDelta||0}}return deltaY},_stop:function _stop(){if(!this._isRunning){return}this._isRunning=false;window.removeEventListener("touchstart",this._onTouchStart);window.removeEventListener("touchend",this._onTouchEnd);window.removeEventListener("touchmove",this._onScrollEvent,{passive:false});window.removeEventListener("wheel",this._onScrollEvent,{passive:false});document.removeEventListener("wheel",this._onScrollEvent,{passive:false});document.removeEventListener("keydown",this._onKeyDown)}});return Scroll});define("core/js/a11y/wrapFocus",["core/js/adapt"],function(Adapt){var WrapFocus=Backbone.Controller.extend({initialize:function initialize(){_.bindAll(this,"_onWrapAround");this.listenTo(Adapt,{"accessibility:ready":this._attachEventListeners})},_attachEventListeners:function _attachEventListeners(){var config=Adapt.a11y.config;$("body").on("click focus",config._options._focusguard,this._onWrapAround)},_onWrapAround:function _onWrapAround(event){var config=Adapt.a11y.config;if(!config._isEnabled||!config._options._isPopupWrapFocusEnabled){return}event.preventDefault();event.stopPropagation();Adapt.a11y.focusFirst("body",{defer:false})}});return WrapFocus});define("core/js/a11y/popup",["core/js/adapt"],function(Adapt){var Popup=Backbone.Controller.extend({_floorStack:[$("body")],_focusStack:[],_tabIndexes:{},_ariaHiddens:{},_elementUIDIndex:0,initialize:function initialize(){this.listenTo(Adapt,{"popup:opened":function popupOpened($element,ignoreInternalTrigger){if(ignoreInternalTrigger){return}Adapt.a11y.log.deprecated("Adapt.trigger(\"popup:opened\", $element) is replaced with Adapt.a11y.popupOpened($element);");this.opened($element,true)},"popup:closed":function popupClosed($target,ignoreInternalTrigger){if(ignoreInternalTrigger){return}Adapt.a11y.log.deprecated("Adapt.trigger(\"popup:closed\", $target) is replaced with Adapt.a11y.popupClosed($target);");this.closed($target,true)}})},opened:function opened($popupElement,silent){$popupElement=$popupElement||$(document.activeElement);this._addPopupLayer($popupElement);if(!silent){Adapt.trigger("popup:opened",$popupElement,true)}return this},_addPopupLayer:function _addPopupLayer($popupElement){$popupElement=$($popupElement);var config=Adapt.a11y.config;if(!config._isEnabled||!config._options._isPopupManagementEnabled||$popupElement.length===0){return $popupElement}this._floorStack.push($popupElement);this._focusStack.push($(document.activeElement));var $elements=$(config._options._tabbableElements).filter(config._options._tabbableElementsExcludes);var $branch=$popupElement.add($popupElement.parents());var $siblings=$branch.siblings().filter(config._options._tabbableElementsExcludes);$elements=$elements.add($siblings);$elements.each(function(index,item){var $item=$(item);var elementUID;if(typeof item.a11y_uid==="undefined"){item.a11y_uid="UID"+ ++this._elementUIDIndex}elementUID=item.a11y_uid;if(this._tabIndexes[elementUID]===undefined){this._tabIndexes[elementUID]=[]}if(this._ariaHiddens[elementUID]===undefined){this._ariaHiddens[elementUID]=[]}var tabindex=$item.attr("tabindex");var ariaHidden=$item.attr("aria-hidden");this._tabIndexes[elementUID].push(tabindex===undefined?"":tabindex);this._ariaHiddens[elementUID].push(ariaHidden===undefined?"":ariaHidden);if(config._options._isPopupTabIndexManagementEnabled){$item.attr("tabindex",-1)}if(config._options._isPopupAriaHiddenManagementEnabled){$item.attr("aria-hidden",true)}}.bind(this));var $items=$popupElement.find(config._options._tabbableElements).filter(config._options._tabbableElementsExcludes);if(config._options._isPopupTabIndexManagementEnabled){$items.attr("tabindex",0)}if(config._options._isPopupAriaHiddenManagementEnabled){$items.removeAttr("aria-hidden").removeClass("aria-hidden").parents(config._options._ariaHiddenExcludes).removeAttr("aria-hidden").removeClass("aria-hidden")}},closed:function closed($focusElement,silent){var $previousFocusElement=this._removeLastPopupLayer();$focusElement=$focusElement||$previousFocusElement||$("body");if(!silent){Adapt.trigger("popup:closed",$focusElement,true)}Adapt.a11y.focusFirst($($focusElement));return this},_removeLastPopupLayer:function _removeLastPopupLayer(){var config=Adapt.a11y.config;if(!config._isEnabled||!config._options._isPopupManagementEnabled){return $(document.activeElement)}if(this._floorStack.length<=1){return}this._floorStack.pop();$(config._options._tabbableElements).filter(config._options._tabbableElementsExcludes).each(function(index,item){var $item=$(item);var previousTabIndex="";var previousAriaHidden="";var elementUID;if(typeof item.a11y_uid==="undefined"){item.a11y_uid="UID"+ ++this._elementUIDIndex}elementUID=item.a11y_uid;if(this._tabIndexes[elementUID]!==undefined&&this._tabIndexes[elementUID].length!==0){previousTabIndex=this._tabIndexes[elementUID].pop();previousAriaHidden=this._ariaHiddens[elementUID].pop()}if(this._tabIndexes[elementUID]!==undefined&&this._tabIndexes[elementUID].length===0){delete this._tabIndexes[elementUID];delete this._ariaHiddens[elementUID]}if(config._options._isPopupTabIndexManagementEnabled){if(previousTabIndex===""){$item.removeAttr("tabindex")}else{$item.attr({"tabindex":previousTabIndex})}}if(config._options._isPopupAriaHiddenManagementEnabled){if(previousAriaHidden===""){$item.removeAttr("aria-hidden")}else{$item.attr({"aria-hidden":previousAriaHidden})}}}.bind(this));return document.activeElement=this._focusStack.pop()},setCloseTo:function setCloseTo($focusElement){var $original=this._focusStack.pop();this._focusStack.push($focusElement);return $original}});return Popup});define("core/js/a11y/deprecated",["core/js/adapt"],function(Adapt){_.extend($.fn,{isFixedPostion:function isFixedPostion(){Adapt.a11y.log.removed("$(\"..\").isFixedPostion was unneeded and has been removed, let us know if you need it back.");return false},a11y_aria_label:function a11y_aria_label(){Adapt.a11y.log.removed("$(\"..\").a11y_aria_label was incorrect behaviour.");return this},limitedScrollTo:function limitedScrollTo(){Adapt.a11y.log.removed("$.limitedScrollTo had no impact on the screen reader cursor.");return this},a11y_text:function a11y_text(){Adapt.a11y.log.removed("a11y_text is no longer required. https://tink.uk/understanding-screen-reader-interaction-modes/");return this},a11y_selected:function a11y_selected(){Adapt.a11y.log.removed("$(\"..\").a11y_selected is removed. Please use aria-live instead.");return this},a11y_on:function a11y_on(isOn){Adapt.a11y.log.deprecated("$(\"..\").a11y_on, use Adapt.a11y.findTabbable($element); and Adapt.a11y.toggleAccessible($elements, isAccessible); instead.");var $tabbable=Adapt.a11y.findTabbable(this);Adapt.a11y.toggleAccessible($tabbable,isOn);return this},a11y_only:function a11y_only(){Adapt.a11y.log.removed("$(\"..\").a11y_only, use Adapt.a11y.popupOpened($popupElement); instead.");return this},scrollDisable:function scrollDisable(){if(Adapt.a11y.config._options._isScrollDisableEnabled===false){return this}Adapt.a11y.log.deprecated("$(\"..\").scrollDisable, use Adapt.a11y.scrollDisable($elements); instead.");Adapt.a11y.scrollDisable(this);return this},scrollEnable:function scrollEnable(){if(Adapt.a11y.config._options._isScrollDisableEnabled===false){return this}Adapt.a11y.log.deprecated("$(\"..\").scrollEnable, use Adapt.a11y.scrollEnable($elements); instead.");Adapt.a11y.scrollEnable(this);return this},a11y_popup:function a11y_popup(){Adapt.a11y.log.deprecated("$(\"..\").a11y_popup, use Adapt.a11y.popupOpened($popupElement); instead.");return Adapt.a11y.popupOpened(this)},a11y_cntrl:function a11y_cntrl(isOn,withDisabled){Adapt.a11y.log.deprecated("$(\"..\").a11y_cntrl, use Adapt.a11y.toggleAccessible($elements, isAccessible); and if needed Adapt.a11y.toggleEnabled($elements, isEnabled); instead.");Adapt.a11y.toggleAccessible(this,isOn);if(withDisabled)Adapt.a11y.toggleEnabled(this,isOn);return this},a11y_cntrl_enabled:function a11y_cntrl_enabled(isOn){Adapt.a11y.log.deprecated("$(\"..\").a11y_cntrl_enabled, use Adapt.a11y.toggleAccessibleEnabled($elements, isAccessibleEnabled); instead.");Adapt.a11y.toggleAccessibleEnabled(this,isOn);return this},isReadable:function isReadable(){Adapt.a11y.log.deprecated("$(\"..\").isReadable, use Adapt.a11y.isReadable($element); instead.");return Adapt.a11y.isReadable(this)},findForward:function findForward(selector){Adapt.a11y.log.removed("$(\"..\").findForward has been removed as the use cases are very small, let us know if you need it back.");return Adapt.a11y._findFirstForward(this,selector)},findWalk:function findWalk(selector){Adapt.a11y.log.removed("$(\"..\").findWalk has been removed as the use cases are very small, let us know if you need it back.");return Adapt.a11y._findFindForwardDescendant(this,selector)},focusNoScroll:function focusNoScroll(){Adapt.a11y.log.deprecated("$(\"..\").focusNoScroll, use Adapt.a11y.focus($element); instead.");return Adapt.a11y.focus(this)},focusNext:function focusNext(returnOnly){Adapt.a11y.log.deprecated("$(\"..\").focusNext, use Adapt.a11y.focusNext($element); or if needed Adapt.a11y.findFirstReadable($element); instead.");if(returnOnly){return Adapt.a11y.findFirstReadable(this)}return Adapt.a11y.focusNext(this)},focusOrNext:function focusOrNext(returnOnly){Adapt.a11y.log.deprecated("$(\"..\").focusOrNext, use Adapt.a11y.focusFirst($element); or if needed Adapt.a11y.findFirstReadable($element); or Adapt.a11y.isReadable($element); instead.");if(returnOnly){if(Adapt.a11y.isReadable(this))return this;return Adapt.a11y.findFirstReadable(this)}return Adapt.a11y.focusFirst(this)},a11y_focus:function a11y_focus(dontDefer){Adapt.a11y.log.deprecated("$(\"..\").a11y_focus, use Adapt.a11y.focusFirst($element, { defer: true }); instead.");Adapt.a11y.focusFirst(this,{defer:!dontDefer});return this}});_.extend($,{a11y_alert:function a11y_alert(){Adapt.a11y.log.removed("$.a11y_alert is removed. Please use aria-live instead.");return this},a11y_update:function a11y_update(){Adapt.a11y.log.removed("a11y_update is no longer required.");return this},a11y_text:function a11y_text(text){Adapt.a11y.log.removed("a11y_text is no longer required. https://tink.uk/understanding-screen-reader-interaction-modes/");return text},a11y_on:function a11y_on(isOn,selector){Adapt.a11y.log.deprecated("$(\"..\").a11y_on, use Adapt.a11y.toggleHidden($elements, isHidden); instead.");return Adapt.a11y.toggleHidden(selector,!isOn)},a11y_popdown:function a11y_popdown($focusTarget){Adapt.a11y.log.removed("$.a11y_popdown, use Adapt.a11y.popupClosed($focusTarget); instead.");return Adapt.a11y.popupClosed($focusTarget)},a11y_focus:function a11y_focus(dontDefer){Adapt.a11y.log.deprecated("$.a11y_focus, use Adapt.a11y.focusFirst(\"body\", { defer: true }); instead.");Adapt.a11y.focusFirst("body",{defer:!dontDefer});return this},a11y_normalize:function a11y_normalize(html){Adapt.a11y.log.deprecated("$.a11y_normalize, use Adapt.a11y.normalize(\"html\"); instead.");return Adapt.a11y.normalize(html)},a11y_remove_breaks:function a11y_remove_breaks(html){Adapt.a11y.log.deprecated("$.a11y_remove_breaks, use Adapt.a11y.removeBreaks(\"html\"); instead.");return Adapt.a11y.removeBreaks(html)}})});define("core/js/a11y",["core/js/adapt","./a11y/browserFocus","./a11y/focusOptions","./a11y/keyboardFocusOutline","./a11y/log","./a11y/scroll","./a11y/wrapFocus","./a11y/popup","./a11y/deprecated"],function(Adapt,BrowserFocus,FocusOptions,KeyboardFocusOutline,Log,Scroll,WrapFocus,Popup){var A11y=Backbone.Controller.extend({$html:$("html"),_htmlCharRegex:/&.*;/g,config:null,defaults:{_isFocusOutlineKeyboardOnlyEnabled:true,_isFocusOutlineDisabled:false,_isFocusAssignmentEnabled:true,_isFocusOnClickEnabled:true,_isFocusNextOnDisabled:true,_isScrollDisableEnabled:true,_isAriaHiddenManagementEnabled:true,_isPopupManagementEnabled:true,_isPopupWrapFocusEnabled:true,_isPopupAriaHiddenManagementEnabled:true,_isPopupTabIndexManagementEnabled:true,_ariaHiddenExcludes:":not(#wrapper):not(body)",_tabbableElements:"a,button,input,select,textarea,[tabindex]:not([data-a11y-force-focus])",_focusOutlineKeyboardOnlyIgnore:"input,textarea",_tabbableElementsExcludes:":not(.a11y-ignore):not([data-a11y-force-focus])",_focusableElements:"a,button,input,select,textarea,[tabindex],label",_readableElements:"[role=heading],[aria-label],[aria-labelledby],[alt]",_focusguard:".a11y-focusguard",_wrapStyleElements:"b,i,abbr,strong,em,small,sub,sup,ins,del,mark,zw,nb",_warnFirstOnly:true,_warn:true},_browserFocus:new BrowserFocus,_keyboardFocusOutline:new KeyboardFocusOutline,_wrapFocus:new WrapFocus,_popup:new Popup,_scroll:new Scroll,log:new Log,initialize:function initialize(){this._removeLegacyElements();this.listenToOnce(Adapt,{"app:dataLoaded":this._onDataLoaded,"navigationView:postRender":this._removeLegacyElements},this);Adapt.on("device:changed",this._setupNoSelect);this.listenTo(Adapt,{"router:location":this._onNavigationStart,"contentObjectView:ready router:plugin":this._onNavigationEnd})},_onDataLoaded:function _onDataLoaded(){this.config=Adapt.config.get("_accessibility");this.config._isActive=false;this.config._options=_.defaults(this.config._options||{},this.defaults);Adapt.offlineStorage.set("a11y",false);this.$html.toggleClass("has-accessibility",this.isEnabled());this._setupNoSelect();this._addFocuserDiv();if(this._isReady){return}this._isReady=true;Adapt.trigger("accessibility:ready")},_setupNoSelect:function _setupNoSelect(){if(!this.config||!this.config._disableTextSelectOnClasses){return}var classes=this.config._disableTextSelectOnClasses.split(" ");var isMatch=false;for(var i=0,item;item=classes[i++];){if(this.$html.is(item)){isMatch=true;break}}this.$html.toggleClass("u-no-select",isMatch)},_addFocuserDiv:function _addFocuserDiv(){if($("#a11y-focuser").length){return}$("body").append($("<div id=\"a11y-focuser\" class=\"a11y-ignore\" tabindex=\"-1\" role=\"presentation\">&nbsp;</div>"))},_removeLegacyElements:function _removeLegacyElements(){var $legacyElements=$("body").children("#accessibility-toggle, #accessibility-instructions");var $navigationElements=$(".nav").find("#accessibility-toggle, #accessibility-instructions");if(!$legacyElements.length&&!$navigationElements.length){return}Adapt.log.warn("REMOVED: #accessibility-toggle and #accessibility-instructions have been removed. Please remove them from all of your .html files.");$legacyElements.remove();$navigationElements.remove()},_onNavigationStart:function _onNavigationStart(){if(!this.isEnabled()){return}_.defer(function(){Adapt.a11y.toggleHidden(".contentobject",true)})},_onNavigationEnd:function _onNavigationEnd(view){if(view&&view.model&&view.model.get("_id")!==Adapt.location._currentId||!this.isEnabled()){return}Adapt.a11y.toggleHidden(".contentobject",false)},isActive:function isActive(){this.log.removed("Accessibility is now always active when enabled. Please unify your user experiences.");return false},isEnabled:function isEnabled(){return this.config&&this.config._isEnabled},toggleHidden:function toggleHidden($elements,isHidden){$elements=$($elements);var config=Adapt.a11y.config;if(!config._isEnabled||!config._options._isAriaHiddenManagementEnabled){return this}isHidden=isHidden===undefined?true:isHidden;if(isHidden===true){$elements.attr("aria-hidden",true)}else{$elements.removeAttr("aria-hidden")}return this},toggleAccessibleEnabled:function toggleAccessibleEnabled($elements,isAccessibleEnabled){this.toggleAccessible($elements,isAccessibleEnabled);this.toggleEnabled($elements,isAccessibleEnabled);return this},toggleAccessible:function toggleAccessible($elements,isReadable){$elements=$($elements);var config=Adapt.a11y.config;if(!config._isEnabled||!config._options._isAriaHiddenManagementEnabled||$elements.length===0){return this}isReadable=isReadable===undefined?true:isReadable;if(!isReadable){$elements.attr({tabindex:"-1","aria-hidden":"true"}).addClass("aria-hidden")}else{$elements.removeAttr("aria-hidden tabindex").removeClass("aria-hidden");$elements.parents(config._options._ariaHiddenExcludes).removeAttr("aria-hidden").removeClass("aria-hidden")}return this},toggleEnabled:function toggleEnabled($elements,isEnabled){$elements=$($elements);if($elements.length===0){return this}isEnabled=isEnabled===undefined?true:isEnabled;if(!isEnabled){$elements.attr("disabled","disabled").addClass("is-disabled")}else{$elements.removeAttr("disabled").removeClass("is-disabled")}return this},findFirstTabbable:function findFirstTabbable($element){$element=$($element).first();return this._findFirstForward($element,this.isTabbable)},findFirstReadable:function findFirstReadable($element){$element=$($element).first();return this._findFirstForward($element,this.isReadable)},findTabbable:function findTabbable($element){var config=Adapt.a11y.config;return $($element).find(config._options._tabbableElements).filter(config._options._tabbableElementsExcludes)},findReadable:function findReadable($element){return $($element).find("*").filter(function(index,element){return this.isReadable(element)}.bind(this))},isTabbable:function isTabbable($element){var config=Adapt.a11y.config;var value=$($element).is(config._options._tabbableElements).is(config._options._tabbableElementsExcludes);if(!value){return undefined}return value},isReadable:function isReadable($element,checkParents){var config=Adapt.a11y.config;$element=$($element).first();checkParents=checkParents===undefined;var $branch=checkParents?$element.add($element.parents()):$element;var isNotVisible=_.find($branch.toArray(),function(item){var $item=$(item);var isNotVisible=$item.css("display")==="none"||$item.css("visibility")==="hidden"||$item.attr("aria-hidden")==="true";if(isNotVisible){return true}});if(isNotVisible){return false}var hasNativeFocusOrIsScreenReadable=$element.is(config._options._focusableElements)||$element.is(config._options._readableElements);if(hasNativeFocusOrIsScreenReadable){return true}var childNodes=$element[0].childNodes;for(var c=0,cl=childNodes.length;c<cl;c++){var childNode=childNodes[c];var isTextNode=childNode.nodeType===3;if(!isTextNode){continue}var isOnlyWhiteSpace=/^\s*$/.test(childNode.nodeValue);if(isOnlyWhiteSpace){continue}return true}return undefined},_findFirstForward:function _findFirstForward($element,selector){$element=$($element).first();var iterator;switch(_typeof(selector)){case"string":iterator=function iterator($tag){return $tag.is(selector)||undefined};break;case"function":iterator=selector;break;case"undefined":iterator=Boolean;}if($element.length===0){return $element.not("*")}var $found=this._findFirstForwardDescendant($element,iterator);if($found&&$found.length){return $found}var $nextSiblings=$element.nextAll().toArray();_.find($nextSiblings,function(sibling){var $sibling=$(sibling);var value=iterator($sibling);if(value===false){return}if(value){$found=$sibling;return true}$found=this._findFirstForwardDescendant($sibling,iterator);if($found&&$found.length)return true}.bind(this));if($found&&$found.length){return $found}var $branch=$element.add($element.parents()).toArray().reverse();_.find($branch,function(parent){var $parent=$(parent);if(iterator($parent)===false){return false}var $siblings=$parent.nextAll().toArray();return _.find($siblings,function(sibling){var $sibling=$(sibling);var value=iterator($sibling);if(value===false){return}if(value){$found=$sibling;return true}$found=this._findFirstForwardDescendant($sibling,iterator);if($found&&$found.length){return true}}.bind(this))}.bind(this));if(!$found||!$found.length){return $element.not("*")}return $found},_findFirstForwardDescendant:function _findFirstForwardDescendant($element,selector){$element=$($element).first();var iterator;switch(_typeof(selector)){case"string":iterator=function iterator($tag){return $tag.is(selector)||undefined};break;case"function":iterator=selector;break;case"undefined":iterator=Boolean;}var $notFound=$element.not("*");if($element.length===0){return $notFound}var stack=[{item:$element[0],value:undefined}];var stackIndexPosition=0;var childIndexPosition=stackIndexPosition+1;do{var stackEntry=stack[stackIndexPosition];var $stackItem=$(stackEntry.item);switch(stackEntry.value){case true:return $stackItem;case false:return $notFound;}var $children=$stackItem.children().toArray();_.find($children,function(item){var $item=$(item);var value=iterator($item);if(value===false){return false}stack.splice(childIndexPosition++,0,{item:item,value:value})});stackIndexPosition++;childIndexPosition=stackIndexPosition+1}while(stackIndexPosition<stack.length);return $notFound},focusNext:function focusNext($element,options){options=new FocusOptions(options);$element=$($element).first();$element=Adapt.a11y.findFirstReadable($element);this.focus($element,options);return this},focusFirst:function focusFirst($element,options){options=new FocusOptions(options);$element=$($element).first();if(Adapt.a11y.isReadable($element)){this.focus($element,options);return $element}$element=Adapt.a11y.findFirstReadable($element);this.focus($element,options);return $element},focus:function focus($element,options){options=new FocusOptions(options);$element=$($element).first();var config=Adapt.a11y.config;if(!config._isEnabled||!config._options._isFocusAssignmentEnabled||$element.length===0){return this}function perform(){if(options.preventScroll){var y=$(window).scrollTop();try{if($element.attr("tabindex")===undefined){$element.attr({"tabindex":"-1","data-a11y-force-focus":"true"})}$element[0].focus({preventScroll:true})}catch(e){}window.scrollTo(null,y)}else{$element[0].focus()}}if(options.defer){_.defer(function(){perform()})}else{perform()}return this},normalize:function normalize(htmls){var values=Array.prototype.slice.call(arguments,0);values=values.filter(Boolean);values=values.filter(_.isString);htmls=values.join(" ");var text=$("<div>"+htmls+"</div>").text();return text.replace(this._htmlCharRegex,"")},removeBreaks:function removeBreaks(htmls){var values=Array.prototype.slice.call(arguments,0);values=values.filter(Boolean);values=values.filter(_.isString);htmls=values.join(" ");var $div=$("<div>"+htmls+"</div>");var stack=[$div[0]];var stackIndex=0;var outputs=[];do{if(stack[stackIndex].childNodes.length){var nodes=stack[stackIndex].childNodes;var usable=_.filter(nodes,function(node){var isTextNode=node.nodeType===3;if(isTextNode){return true}var isStyleElement=$(node).is(Adapt.a11y.config._options._wrapStyleElements);if(isStyleElement){return true}return false});outputs.push.apply(outputs,usable);stack.push.apply(stack,nodes)}stackIndex++}while(stackIndex<stack.length);var rtnText="";outputs.forEach(function(item){rtnText+=item.outerHTML||item.textContent});return rtnText},scrollEnable:function scrollEnable($elements){this._scroll.enable($elements);return this},scrollDisable:function scrollDisable($elements){this._scroll.disable($elements);return this},popupOpened:function popupOpened($popupElement){this._popup.opened($popupElement);return this},popupClosed:function popupClosed($focusElement){this._popup.closed($focusElement);return this},setPopupCloseTo:function setPopupCloseTo($focusElement){return this._popup.setCloseTo($focusElement)}});return Adapt.a11y=new A11y});define("core/js/accessibility",["core/js/adapt","./a11y"],function(Adapt,a11y){Object.defineProperty(Adapt,"accessibility",{get:function get(){a11y.log.deprecated("Adapt.accessibility has moved to Adapt.a11y");return Adapt.accessibility=a11y}})});define("core/js/collections/adaptCollection",["core/js/adapt"],function(Adapt){var AdaptCollection=function(_Backbone$Collection){"use strict";_inherits(AdaptCollection,_Backbone$Collection);var _super4=_createSuper(AdaptCollection);function AdaptCollection(){_classCallCheck(this,AdaptCollection);return _super4.apply(this,arguments)}_createClass(AdaptCollection,[{key:"initialize",value:function initialize(models,options){this.once("reset",this.loadedData,this)}},{key:"loadedData",value:function loadedData(){Adapt.trigger("adaptCollection:dataLoaded")}}]);return AdaptCollection}(Backbone.Collection);return AdaptCollection});define("core/js/enums/logLevelEnum",[],function(){var LOG_LEVEL=ENUM(["DEBUG","INFO","WARN","ERROR","FATAL"]);return LOG_LEVEL});define("core/js/logging",["core/js/adapt","core/js/enums/logLevelEnum"],function(Adapt,LOG_LEVEL){var Logging=function(_Backbone$Controller3){"use strict";_inherits(Logging,_Backbone$Controller3);var _super5=_createSuper(Logging);function Logging(){_classCallCheck(this,Logging);return _super5.apply(this,arguments)}_createClass(Logging,[{key:"initialize",value:function initialize(){this._config={_isEnabled:true,_level:LOG_LEVEL.INFO.asLowerCase,_console:true,_warnFirstOnly:true};this._warned={};this.listenToOnce(Adapt,"configModel:dataLoaded",this.onLoadConfigData)}},{key:"onLoadConfigData",value:function onLoadConfigData(){this.loadConfig();this.debug("Logging config loaded");this.trigger("log:ready")}},{key:"loadConfig",value:function loadConfig(){if(Adapt.config.has("_logging")){this._config=Adapt.config.get("_logging")}this.checkQueryStringOverride()}},{key:"checkQueryStringOverride",value:function checkQueryStringOverride(){var matches=window.location.search.match(/[?&]loglevel=([a-z]*)/i);if(!matches||matches.length<2)return;var override=LOG_LEVEL(matches[1].toUpperCase());if(!override)return;this._config._level=override.asLowerCase;this.debug("Loglevel override in query string:",this._config._level)}},{key:"debug",value:function debug(){for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4]}this._log(LOG_LEVEL.DEBUG,args)}},{key:"info",value:function info(){for(var _len5=arguments.length,args=new Array(_len5),_key5=0;_key5<_len5;_key5++){args[_key5]=arguments[_key5]}this._log(LOG_LEVEL.INFO,args)}},{key:"warn",value:function warn(){for(var _len6=arguments.length,args=new Array(_len6),_key6=0;_key6<_len6;_key6++){args[_key6]=arguments[_key6]}this._log(LOG_LEVEL.WARN,args)}},{key:"error",value:function error(){for(var _len7=arguments.length,args=new Array(_len7),_key7=0;_key7<_len7;_key7++){args[_key7]=arguments[_key7]}this._log(LOG_LEVEL.ERROR,args)}},{key:"fatal",value:function fatal(){for(var _len8=arguments.length,args=new Array(_len8),_key8=0;_key8<_len8;_key8++){args[_key8]=arguments[_key8]}this._log(LOG_LEVEL.FATAL,args)}},{key:"removed",value:function removed(){for(var _len9=arguments.length,args=new Array(_len9),_key9=0;_key9<_len9;_key9++){args[_key9]=arguments[_key9]}args=["REMOVED"].concat(args);this.warnOnce.apply(this,_toConsumableArray(args))}},{key:"deprecated",value:function deprecated(){for(var _len10=arguments.length,args=new Array(_len10),_key10=0;_key10<_len10;_key10++){args[_key10]=arguments[_key10]}args=["DEPRECATED"].concat(args);this.warnOnce.apply(this,_toConsumableArray(args))}},{key:"warnOnce",value:function warnOnce(){for(var _len11=arguments.length,args=new Array(_len11),_key11=0;_key11<_len11;_key11++){args[_key11]=arguments[_key11]}if(this._hasWarned(args)){return}this._log(LOG_LEVEL.WARN,args)}},{key:"_log",value:function _log(level,data){var isEnabled=this._config._isEnabled;if(!isEnabled)return;var configLevel=LOG_LEVEL(this._config._level.toUpperCase());var isLogLevelAllowed=level>=configLevel;if(!isLogLevelAllowed)return;this._logToConsole(level,data);this.trigger("log",level,data);this.trigger("log:"+level.asLowerCase,level,data)}},{key:"_logToConsole",value:function _logToConsole(level,data){var shouldLogToConsole=this._config._console;if(!shouldLogToConsole)return;var log=[level.asUpperCase+":"];data&&log.push.apply(log,_toConsumableArray(data));if(console[level.asLowerCase]){var _console;(_console=console)[level.asLowerCase].apply(_console,log)}else{var _console2;(_console2=console).log.apply(_console2,log)}}},{key:"_hasWarned",value:function _hasWarned(args){if(!this._config._warnFirstOnly){return false}var hash=args.map(String).join(":");if(this._warned[hash]){return true}this._warned[hash]=true;return false}}]);return Logging}(Backbone.Controller);return Adapt.log=new Logging});define("core/js/models/buildModel",["core/js/adapt","core/js/logging"],function(Adapt){var BuildModel=function(_Backbone$Model2){"use strict";_inherits(BuildModel,_Backbone$Model2);var _super6=_createSuper(BuildModel);function BuildModel(){_classCallCheck(this,BuildModel);return _super6.apply(this,arguments)}_createClass(BuildModel,[{key:"defaults",value:function defaults(){return{jsonext:"json"}}},{key:"initialize",value:function initialize(attrs,options){var _this12=this;this.url=options.url;this.fetch({success:function success(){_newArrowCheck(this,_this12);this.isLoaded=true;Adapt.trigger("buildModel:dataLoaded")}.bind(this),error:function error(){_newArrowCheck(this,_this12);console.log("Unable to load adapt/js/build.js");Adapt.trigger("buildModel:dataLoaded")}.bind(this)})}},{key:"whenReady",value:function whenReady(){var _this13=this;if(this.isLoaded)return Promise.resolve();return new Promise(function(resolve){_newArrowCheck(this,_this13);Adapt.once("buildModel:dataLoaded",resolve)}.bind(this))}}]);return BuildModel}(Backbone.Model);return BuildModel});define("core/js/models/configModel",["core/js/adapt"],function(Adapt){var ConfigModel=function(_Backbone$Model3){"use strict";_inherits(ConfigModel,_Backbone$Model3);var _super7=_createSuper(ConfigModel);function ConfigModel(){_classCallCheck(this,ConfigModel);return _super7.apply(this,arguments)}_createClass(ConfigModel,[{key:"defaults",value:function defaults(){return{screenSize:{large:900,medium:760,small:520},_forceRouteLocking:false,_canLoadData:true,_disableAnimation:false}}},{key:"initialize",value:function initialize(attrs,options){var _this14=this;this.url=options.url;this.fetch({success:function success(){var _this15=this;_newArrowCheck(this,_this14);Adapt.trigger("offlineStorage:prepare");Adapt.wait.queue(function(){_newArrowCheck(this,_this15);Adapt.trigger("configModel:dataLoaded");if(!this.get("_canLoadData"))return;Adapt.trigger("configModel:loadCourseData")}.bind(this))}.bind(this),error:function error(){_newArrowCheck(this,_this14);return console.log("Unable to load course/config.json")}.bind(this)})}},{key:"loadData",value:function loadData(){}}]);return ConfigModel}(Backbone.Model);return ConfigModel});define("core/js/modelEvent",[],function(){var ModelEvent=Backbone.Controller.extend({type:null,target:null,value:null,canBubble:true,deepPath:null,timeStamp:null,initialize:function initialize(type,target,value){this.type=type;this.target=target;this.value=value;this.deepPath=[target]},stopPropagation:function stopPropagation(){this.canBubble=false},addPath:function addPath(target){this.deepPath.unshift(target)}});return ModelEvent});define("core/js/models/adaptModel",["core/js/adapt","core/js/modelEvent","core/js/logging"],function(Adapt,ModelEvent){var AdaptModel=function(_Backbone$Model4){"use strict";_inherits(AdaptModel,_Backbone$Model4);var _super8=_createSuper(AdaptModel);function AdaptModel(){_classCallCheck(this,AdaptModel);return _super8.apply(this,arguments)}_createClass(AdaptModel,[{key:"toJSON",value:function toJSON(){var json=_.clone(this.attributes);delete json._children;delete json._parent;return $.extend(true,{},json)}},{key:"get",value:function get(name){switch(name){case"_parent":case"_children":Adapt.log.deprecated("Use model.getChildren() or model.getParent() instead of model.get('_children') or model.get('_parent')");}return _get(_getPrototypeOf(AdaptModel.prototype),"get",this).call(this,name)}},{key:"defaults",value:function defaults(){return{_canShowFeedback:true,_classes:"",_canReset:false,_isComplete:false,_isInteractionComplete:false,_isA11yRegionEnabled:false,_isA11yCompletionDescriptionEnabled:true,_requireCompletionOf:-1,_isEnabled:true,_isResetOnRevisit:false,_isAvailable:true,_isOptional:false,_isReady:false,_isVisible:true,_isLocked:false,_isHidden:false}}},{key:"trackable",value:function trackable(){return["_id","_isComplete","_isInteractionComplete"]}},{key:"bubblingEvents",value:function bubblingEvents(){return["change:_isComplete","change:_isInteractionComplete","change:_isActive"]}},{key:"initialize",value:function initialize(){this.listenToOnce(Adapt,"app:dataLoaded",this.setupModel)}},{key:"setupModel",value:function setupModel(){var _this16=this;if(this.hasManagedChildren){this.setupChildListeners()}this.init();_.defer(function(){_newArrowCheck(this,_this16);if(this.hasManagedChildren){this.checkCompletionStatus();this.checkInteractionCompletionStatus();this.checkLocking()}this.setupTrackables()}.bind(this))}},{key:"setupTrackables",value:function setupTrackables(){var _this17=this;var originalTrackableStateFunction=this.triggerTrackableState;this.triggerTrackableState=_.compose(function(){_newArrowCheck(this,_this17);this.triggerTrackableState.isQueued=true}.bind(this),_.debounce(function(){_newArrowCheck(this,_this17);originalTrackableStateFunction.apply(this);this.triggerTrackableState.isQueued=false}.bind(this),17));this.listenTo(this,"change",function(_ref){var _this18=this;_newArrowCheck(this,_this17);var changed=_ref.changed;if(this.triggerTrackableState.isQueued||!Adapt.attributes._isStarted){return}var trackablePropertyNames=_.result(this,"trackable",[]);var changedPropertyNames=Object.keys(changed);var isTrackable=changedPropertyNames.find(function(item){_newArrowCheck(this,_this18);return trackablePropertyNames.includes(item)}.bind(this));if(isTrackable){this.triggerTrackableState()}}.bind(this))}},{key:"setupChildListeners",value:function setupChildListeners(){var children=this.getChildren();if(!children.length){return}this.listenTo(children,{"all":this.onAll,"bubble":this.bubble,"change:_isReady":this.checkReadyStatus,"change:_isComplete":this.onIsComplete,"change:_isInteractionComplete":this.checkInteractionCompletionStatus})}},{key:"init",value:function init(){}},{key:"getTrackableState",value:function getTrackableState(){var _ref2;var trackable=this.resultExtend("trackable",[]);var json=this.toJSON();var args=trackable;args.unshift(json);return(_ref2=_).pick.apply(_ref2,_toConsumableArray(args))}},{key:"setTrackableState",value:function setTrackableState(state){var _ref3;var trackable=this.resultExtend("trackable",[]);var args=trackable;args.unshift(state);state=(_ref3=_).pick.apply(_ref3,_toConsumableArray(args));this.set(state);return this}},{key:"triggerTrackableState",value:function triggerTrackableState(){Adapt.trigger("state:change",this,this.getTrackableState())}},{key:"reset",value:function reset(type,force){if(!this.get("_canReset")&&!force)return;type=type||true;switch(type){case"hard":case true:this.set({_isEnabled:true,_isComplete:false,_isInteractionComplete:false});break;case"soft":this.set({_isEnabled:true,_isInteractionComplete:false});break;}}},{key:"checkReadyStatus",value:function checkReadyStatus(){var _this19=this;var children=this.getAvailableChildModels();if(children.find(function(child){_newArrowCheck(this,_this19);return child.get("_isReady")===false}.bind(this))){return}this.set("_isReady",true)}},{key:"setCompletionStatus",value:function setCompletionStatus(){if(!this.get("_isVisible"))return;this.set({_isComplete:true,_isInteractionComplete:true})}},{key:"checkCompletionStatus",value:function checkCompletionStatus(){Adapt.checkingCompletion();_.defer(this.checkCompletionStatusFor.bind(this),"_isComplete")}},{key:"checkInteractionCompletionStatus",value:function checkInteractionCompletionStatus(){Adapt.checkingCompletion();_.defer(this.checkCompletionStatusFor.bind(this),"_isInteractionComplete")}},{key:"checkCompletionStatusFor",value:function checkCompletionStatusFor(){var _this20=this;var completionAttribute=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"_isComplete";var completed=false;var children=this.getAvailableChildModels();var requireCompletionOf=this.get("_requireCompletionOf");if(requireCompletionOf===-1){completed=children.every(function(child){_newArrowCheck(this,_this20);return child.get(completionAttribute)||child.get("_isOptional")}.bind(this))}else{completed=children.filter(function(child){_newArrowCheck(this,_this20);return child.get(completionAttribute)&&!child.get("_isOptional")}.bind(this)).length>=requireCompletionOf}this.set(completionAttribute,completed);Adapt.checkedCompletion()}},{key:"getTypeGroup",value:function getTypeGroup(){}},{key:"isTypeGroup",value:function isTypeGroup(typeGroup){var hasUpperCase=/[A-Z]+/.test(typeGroup);var isPluralized=typeGroup.slice(-1)==="s";var lowerCased=typeGroup.toLowerCase();var singular=isPluralized&&lowerCased.slice(0,-1);var singularLowerCased=(singular||lowerCased).toLowerCase();if(isPluralized||hasUpperCase){Adapt.log.deprecated("'".concat(typeGroup,"' appears pluralized or contains uppercase characters, suggest using the singular, lowercase type group '").concat(singularLowerCased,"'."))}var pluralizedLowerCaseTypes=[singularLowerCased,!isPluralized&&"".concat(lowerCased,"s")].filter(Boolean);var typeGroups=this.getTypeGroups();if(_.intersection(pluralizedLowerCaseTypes,typeGroups).length){return true}return false}},{key:"getTypeGroups",value:function getTypeGroups(){var _this21=this;if(this._typeGroups)return this._typeGroups;var typeGroups=[this.get("_type")];var parentClass=this;while(parentClass=Object.getPrototypeOf(parentClass)){if(!parentClass.hasOwnProperty("getTypeGroup"))continue;typeGroups.push(parentClass.getTypeGroup.call(this))}return this._typeGroups=_.uniq(typeGroups.filter(Boolean).map(function(s){_newArrowCheck(this,_this21);return s.toLowerCase()}.bind(this)))}},{key:"findAncestor",value:function findAncestor(ancestorType){var parent=this.getParent();if(!parent)return;if(!ancestorType||parent.isTypeGroup(ancestorType)){return parent}return parent.findAncestor(ancestorType)}},{key:"findDescendantModels",value:function findDescendantModels(descendants,options){var _this22=this;var allDescendantsModels=this.getAllDescendantModels();var returnedDescendants=allDescendantsModels.filter(function(model){_newArrowCheck(this,_this22);return model.isTypeGroup(descendants)}.bind(this));if(!options){return returnedDescendants}if(options.where){return returnedDescendants.filter(function(descendant){_newArrowCheck(this,_this22);for(var property in options.where){var value=options.where[property];if(descendant.get(property)!==value){return false}}return true}.bind(this))}}},{key:"getAllDescendantModels",value:function getAllDescendantModels(isParentFirst){var _this23=this;var descendants=[];if(!this.hasManagedChildren){return descendants}var children=this.getChildren();children.models.forEach(function(child){_newArrowCheck(this,_this23);if(!child.hasManagedChildren){descendants.push(child);return}var subDescendants=child.getAllDescendantModels(isParentFirst);if(isParentFirst===true){descendants.push(child)}descendants.push.apply(descendants,_toConsumableArray(subDescendants));if(isParentFirst!==true){descendants.push(child)}}.bind(this));return descendants}},{key:"findRelativeModel",value:function findRelativeModel(relativeString){var _this24=this;var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var rootModel=options.limitParentId?Adapt.findById(options.limitParentId):Adapt.course;var relativeDescriptor=Adapt.parseRelativeString(relativeString);var searchBackwards=relativeDescriptor.offset<0;var moveBy=Math.abs(relativeDescriptor.offset);var movementCount=0;var hasDescendantsOfType=Boolean(this.findDescendantModels(relativeDescriptor.type).length);if(hasDescendantsOfType){moveBy--}var pageDescendants;if(searchBackwards){var _pageDescendants;pageDescendants=[rootModel];(_pageDescendants=pageDescendants).push.apply(_pageDescendants,_toConsumableArray(rootModel.getAllDescendantModels(true)));pageDescendants.reverse()}else{pageDescendants=rootModel.getAllDescendantModels(false);pageDescendants.push(rootModel)}if(typeof options.filter==="function"){pageDescendants=pageDescendants.filter(options.filter)}var modelId=this.get("_id");var modelIndex=pageDescendants.findIndex(function(pageDescendant){_newArrowCheck(this,_this24);if(pageDescendant.get("_id")===modelId){return true}return false}.bind(this));if(options.loop){var totalOfType=pageDescendants.reduce(function(count,model){_newArrowCheck(this,_this24);if(!model.isTypeGroup(relativeDescriptor.type))return count;return++count}.bind(this),0);moveBy=moveBy%totalOfType;pageDescendants=pageDescendants.concat(pageDescendants.slice(0))}for(var i=modelIndex,l=pageDescendants.length;i<l;i++){var descendant=pageDescendants[i];if(descendant.isTypeGroup(relativeDescriptor.type)){if(movementCount>moveBy){break}if(movementCount===moveBy){return Adapt.findById(descendant.get("_id"))}movementCount++}}}},{key:"getChildren",value:function getChildren(){var _this25=this;if(this._childrenCollection){return this._childrenCollection}var childrenCollection;if(!this.hasManagedChildren){childrenCollection=new Backbone.Collection}else{var id=this.get("_id");var children=Adapt.data.filter(function(model){_newArrowCheck(this,_this25);return model.get("_parentId")===id}.bind(this));childrenCollection=new Backbone.Collection(children)}if(this.get("_type")==="block"&&childrenCollection.length===2&&childrenCollection.models[0].get("_layout")!=="left"){childrenCollection.comparator="_layout";childrenCollection.sort()}this.setChildren(childrenCollection);return this._childrenCollection}},{key:"setChildren",value:function setChildren(children){this._childrenCollection=children;this.set("_children",children)}},{key:"getAvailableChildModels",value:function getAvailableChildModels(){return this.getChildren().where({_isAvailable:true})}},{key:"getParent",value:function getParent(){if(this._parentModel){return this._parentModel}var parentId=this.get("_parentId");if(!parentId)return;this.setParent(Adapt.findById(parentId));return this._parentModel}},{key:"setParent",value:function setParent(parent){this._parentModel=parent;this.set("_parentId",this._parentModel.get("_id"));this.set("_parent",this._parentModel)}},{key:"getAncestorModels",value:function getAncestorModels(shouldIncludeChild){var parents=[];var context=this;if(shouldIncludeChild)parents.push(context);while(context.has("_parentId")){context=context.getParent();parents.push(context)}return parents.length?parents:null}},{key:"getSiblings",value:function getSiblings(passSiblingsAndIncludeSelf){var _this26=this;var id=this.get("_id");var parentId=this.get("_parentId");var siblings;if(!passSiblingsAndIncludeSelf){if(this._hasSiblingsAndSelf===false){return this.get("_siblings")}siblings=Adapt.data.filter(function(model){_newArrowCheck(this,_this26);return model.get("_parentId")===parentId&&model.get("_id")!==id}.bind(this));this._hasSiblingsAndSelf=false}else{if(this._hasSiblingsAndSelf){return this.get("_siblings")}siblings=Adapt.data.filter(function(model){_newArrowCheck(this,_this26);return model.get("_parentId")===parentId}.bind(this));this._hasSiblingsAndSelf=true}var siblingsCollection=new Backbone.Collection(siblings);this.set("_siblings",siblingsCollection);return siblingsCollection}},{key:"setOnChildren",value:function setOnChildren(){var _this27=this;for(var _len12=arguments.length,args=new Array(_len12),_key12=0;_key12<_len12;_key12++){args[_key12]=arguments[_key12]}this.set.apply(this,args);if(!this.hasManagedChildren)return;var children=this.getChildren();children.models.forEach(function(child){_newArrowCheck(this,_this27);return child.setOnChildren.apply(child,args)}.bind(this))}},{key:"setOptional",value:function setOptional(value){Adapt.log.deprecated("Use model.set('_isOptional', value) as setOptional() may be removed in the future");this.set({_isOptional:value})}},{key:"checkLocking",value:function checkLocking(){var lockType=this.get("_lockType");if(!lockType)return;switch(lockType){case"sequential":this.setSequentialLocking();break;case"unlockFirst":this.setUnlockFirstLocking();break;case"lockLast":this.setLockLastLocking();break;case"custom":this.setCustomLocking();break;default:console.warn("AdaptModel.checkLocking: unknown _lockType '".concat(lockType,"' found on ").concat(this.get("_id")));}}},{key:"setSequentialLocking",value:function setSequentialLocking(){var children=this.getAvailableChildModels();for(var i=1,j=children.length;i<j;i++){children[i].set("_isLocked",!children[i-1].get("_isComplete"))}}},{key:"setUnlockFirstLocking",value:function setUnlockFirstLocking(){var children=this.getAvailableChildModels();var isFirstChildComplete=children[0].get("_isComplete");for(var i=1,j=children.length;i<j;i++){children[i].set("_isLocked",!isFirstChildComplete)}}},{key:"setLockLastLocking",value:function setLockLastLocking(){var children=this.getAvailableChildModels();var lastIndex=children.length-1;for(var i=lastIndex-1;i>=0;i--){if(!children[i].get("_isComplete")){return children[lastIndex].set("_isLocked",true)}}children[lastIndex].set("_isLocked",false)}},{key:"setCustomLocking",value:function setCustomLocking(){var _this28=this;var children=this.getAvailableChildModels();children.forEach(function(child){_newArrowCheck(this,_this28);child.set("_isLocked",this.shouldLock(child))}.bind(this))}},{key:"shouldLock",value:function shouldLock(child){var lockedBy=child.get("_lockedBy");if(!lockedBy)return false;for(var i=lockedBy.length-1;i>=0;i--){var id=lockedBy[i];try{var model=Adapt.findById(id);if(!model.get("_isAvailable"))continue;if(!model.get("_isComplete"))return true}catch(e){console.warn("AdaptModel.shouldLock: unknown _lockedBy ID '".concat(id,"' found on ").concat(child.get("_id")))}}return false}},{key:"onIsComplete",value:function onIsComplete(){this.checkCompletionStatus();this.checkLocking()}},{key:"onAll",value:function onAll(type,model,value){if(!_.result(this,"bubblingEvents").includes(type))return;var event=new ModelEvent(type,model,value);this.bubble(event)}},{key:"bubble",value:function bubble(event){if(!event.canBubble)return;event.addPath(this);this.trigger("bubble:".concat(event.type," bubble"),event)}},{key:"hasManagedChildren",get:function get(){return true}}]);return AdaptModel}(Backbone.Model);return AdaptModel});define("core/js/models/contentObjectModel",["core/js/adapt","core/js/models/adaptModel"],function(Adapt,AdaptModel){var ContentObjectModel=function(_AdaptModel){"use strict";_inherits(ContentObjectModel,_AdaptModel);var _super9=_createSuper(ContentObjectModel);function ContentObjectModel(){_classCallCheck(this,ContentObjectModel);return _super9.apply(this,arguments)}_createClass(ContentObjectModel,[{key:"getTypeGroup",value:function getTypeGroup(){return"contentobject"}},{key:"_parent",get:function get(){Adapt.log.deprecated("contentObjectModel._parent, use contentObjectModel.getParent() instead, parent models are defined by the JSON");var isParentCourse=this.get("_parentId")===Adapt.course.get("_id");if(isParentCourse){return"course"}return"contentObjects"}},{key:"_siblings",get:function get(){Adapt.log.deprecated("contentObjectModel._siblings, use contentObjectModel.getSiblings() instead, sibling models are defined by the JSON");return"contentObjects"}},{key:"_children",get:function get(){Adapt.log.deprecated("contentObjectModel._children, use contentObjectModel.hasManagedChildren instead, child models are defined by the JSON");return null}}]);return ContentObjectModel}(AdaptModel);return ContentObjectModel});define("core/js/models/menuModel",["core/js/adapt","core/js/models/contentObjectModel"],function(Adapt,ContentObjectModel){var MenuModel=function(_ContentObjectModel){"use strict";_inherits(MenuModel,_ContentObjectModel);var _super10=_createSuper(MenuModel);function MenuModel(){_classCallCheck(this,MenuModel);return _super10.apply(this,arguments)}_createClass(MenuModel,[{key:"getTypeGroup",value:function getTypeGroup(){return"menu"}},{key:"setCustomLocking",value:function setCustomLocking(){var _this29=this;var children=this.getAvailableChildModels();children.forEach(function(child){_newArrowCheck(this,_this29);child.set("_isLocked",this.shouldLock(child));if(!(child instanceof MenuModel))return;child.checkLocking()}.bind(this))}},{key:"_children",get:function get(){Adapt.log.deprecated("menuModel._children, use menuModel.hasManagedChildren instead, child models are defined by the JSON");return"contentObjects"}}]);return MenuModel}(ContentObjectModel);Adapt.register("menu",{model:MenuModel});return MenuModel});define("core/js/models/courseModel",["core/js/adapt","core/js/models/menuModel"],function(Adapt,MenuModel){var CourseModel=function(_MenuModel){"use strict";_inherits(CourseModel,_MenuModel);var _super11=_createSuper(CourseModel);function CourseModel(){_classCallCheck(this,CourseModel);return _super11.apply(this,arguments)}_createClass(CourseModel,[{key:"_parent",get:function get(){Adapt.log.deprecated("courseModel._parent, use courseModel.getParent() instead, parent models are defined by the JSON");return null}},{key:"_siblings",get:function get(){Adapt.log.deprecated("courseModel._siblings, use courseModel.getSiblings() instead, sibling models are defined by the JSON");return null}}]);return CourseModel}(MenuModel);Adapt.register("course",{model:CourseModel});return CourseModel});define("core/js/startController",["core/js/adapt"],function(Adapt){var StartController=Backbone.Controller.extend({model:null,loadCourseData:function loadCourseData(){this.model=new Backbone.Model(Adapt.course.get("_start"))},setStartLocation:function setStartLocation(){if(!this.isEnabled())return;window.history.replaceState("","",this.getStartHash())},returnToStartLocation:function returnToStartLocation(){var startIds=this.model.get("_startIds");if(startIds){startIds.forEach(function(startId){startId._skipIfComplete=false})}window.location.hash=this.getStartHash(true)},getStartHash:function getStartHash(alwaysForce){var startId=this.getStartId();var isRouteSpecified=window.location.href.indexOf("#")>-1;var shouldForceStartId=alwaysForce||this.model.get("_force");var shouldNavigateToStartId=startId&&(!isRouteSpecified||shouldForceStartId);if(shouldNavigateToStartId&&startId!==Adapt.course.get("_id")){return"#/id/"+startId}return window.location.hash||"#/"},isEnabled:function isEnabled(){if(!this.model||!this.model.get("_isEnabled"))return false;return true},getStartId:function getStartId(){var startId=this.model.get("_id");var startIds=this.model.get("_startIds");if(!startIds||!startIds.length)return startId;var $html=$("html");for(var i=0,l=startIds.length;i<l;i++){var item=startIds[i];var className=item._className;var skipIfComplete=item._skipIfComplete;var model=Adapt.findById(item._id);if(!model){console.log("startController: cannot find id",item._id);continue}if(skipIfComplete){if(model.get("_isComplete"))continue}if(!className||$html.is(className)||$html.hasClass(className)){startId=item._id;break}}return startId}});Adapt.once("adapt:start",function(){Adapt.startController.loadCourseData();Adapt.startController.setStartLocation()});Adapt.on("navigation:returnToStart",function(){Adapt.startController.returnToStartLocation()});return Adapt.startController=new StartController});define("core/js/data",["core/js/adapt","core/js/collections/adaptCollection","core/js/models/buildModel","core/js/models/configModel","core/js/models/courseModel","core/js/models/lockingModel","core/js/startController"],function(Adapt,AdaptCollection,BuildModel,ConfigModel,CourseModel){var Data=function(_AdaptCollection){"use strict";_inherits(Data,_AdaptCollection);var _super12=_createSuper(Data);function Data(){_classCallCheck(this,Data);return _super12.apply(this,arguments)}_createClass(Data,[{key:"model",value:function model(json){var ModelClass=Adapt.getModelClass(json);if(!ModelClass){return new Backbone.Model(json)}return new ModelClass(json)}},{key:"init",value:function(){var _init=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:Adapt.build=new BuildModel(null,{url:"adapt/js/build.min.js",reset:true});_context2.next=3;return Adapt.build.whenReady();case 3:$("html").attr("data-adapt-framework-version",Adapt.build.get("package").version);this.loadConfigData();case 5:case"end":return _context2.stop();}}},_callee2,this)}));function init(){return _init.apply(this,arguments)}return init}()},{key:"loadConfigData",value:function loadConfigData(){Adapt.config=new ConfigModel(null,{url:"course/config."+Adapt.build.get("jsonext"),reset:true});this.listenToOnce(Adapt,"configModel:loadCourseData",this.onLoadCourseData);this.listenTo(Adapt.config,{"change:_activeLanguage":this.onLanguageChange,"change:_defaultDirection":this.onDirectionChange})}},{key:"onDirectionChange",value:function onDirectionChange(model,direction){if(direction==="rtl"){$("html").removeClass("dir-ltr").addClass("dir-rtl").attr("dir","rtl")}else{$("html").removeClass("dir-rtl").addClass("dir-ltr").attr("dir","ltr")}}},{key:"onLoadCourseData",value:function onLoadCourseData(){if(!Adapt.config.get("_activeLanguage")){Adapt.config.set("_activeLanguage",Adapt.config.get("_defaultLanguage"));return}this.loadCourseData()}},{key:"onLanguageChange",value:function onLanguageChange(model,language){Adapt.offlineStorage.set("lang",language);this.loadCourseData(language)}},{key:"loadCourseData",value:function(){var _loadCourseData=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(newLanguage){var language,courseFolder;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:language=Adapt.config.get("_activeLanguage");courseFolder="course/"+language+"/";$("html").attr("lang",language);_context3.next=5;return this.loadManifestFiles(courseFolder);case 5:_context3.next=7;return this.triggerDataLoaded();case 7:_context3.next=9;return this.triggerDataReady(newLanguage);case 9:this.triggerInit();case 10:case"end":return _context3.stop();}}},_callee3,this)}));function loadCourseData(_x){return _loadCourseData.apply(this,arguments)}return loadCourseData}()},{key:"getJSON",value:function getJSON(path){var _this30=this;return new Promise(function(resolve,reject){var _this31=this;_newArrowCheck(this,_this30);$.getJSON(path,function(data){_newArrowCheck(this,_this31);data.__path__=path;resolve(data)}.bind(this)).fail(reject)}.bind(this))}},{key:"loadManifestFiles",value:function(){var _loadManifestFiles=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(languagePath){var _this32=this;var manifestPath,manifest,allFileData,allModelData,course;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:this.trigger("loading");this.reset();manifestPath=languagePath+"language_data_manifest.js";_context4.prev=3;_context4.next=6;return this.getJSON(manifestPath);case 6:manifest=_context4.sent;_context4.next=13;break;case 9:_context4.prev=9;_context4.t0=_context4["catch"](3);manifest=["course.json","contentObjects.json","articles.json","blocks.json","components.json"];Adapt.log.warnOnce("Manifest path '".concat(manifestPath," not found. Using traditional files: ").concat(manifest.join(", ")));case 13:_context4.next=15;return Promise.all(manifest.map(function(filePath){_newArrowCheck(this,_this32);return this.getJSON("".concat(languagePath).concat(filePath))}.bind(this)));case 15:allFileData=_context4.sent;allModelData=allFileData.reduce(function(result,fileData){_newArrowCheck(this,_this32);if(Array.isArray(fileData)){result.push.apply(result,_toConsumableArray(fileData))}else if(fileData instanceof Object){result.push(fileData)}else{Adapt.log.warnOnce("File data isn't an array or object: ".concat(fileData.__path__))}return result}.bind(this),[]);course=allModelData.find(function(modelData){_newArrowCheck(this,_this32);return modelData._type==="course"}.bind(this));if(course){_context4.next=20;break}throw new Error("Expected a model data with \"_type\": \"course\", none found.");case 20:Adapt.trigger("courseModel:dataLoading");Adapt.course=this.push(course);Adapt.trigger("courseModel:dataLoaded");allModelData.forEach(function(modelData){_newArrowCheck(this,_this32);if(modelData._type==="course"){return}this.push(modelData)}.bind(this));this._byAdaptID=this.indexBy("_id");this.trigger("reset");this.trigger("loaded");_context4.next=29;return Adapt.wait.queue();case 29:case"end":return _context4.stop();}}},_callee4,this,[[3,9]])}));function loadManifestFiles(_x2){return _loadManifestFiles.apply(this,arguments)}return loadManifestFiles}()},{key:"triggerDataLoaded",value:function(){var _triggerDataLoaded=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:Adapt.log.debug("Firing app:dataLoaded");try{Adapt.trigger("app:dataLoaded")}catch(e){Adapt.log.error("Error during app:dataLoading trigger",e)}_context5.next=4;return Adapt.wait.queue();case 4:case"end":return _context5.stop();}}},_callee5)}));function triggerDataLoaded(){return _triggerDataLoaded.apply(this,arguments)}return triggerDataLoaded}()},{key:"triggerDataReady",value:function(){var _triggerDataReady=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(newLanguage){var _this33=this;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(newLanguage){Adapt.trigger("app:languageChanged",newLanguage);_.defer(function(){_newArrowCheck(this,_this33);Adapt.startController.loadCourseData();var hash=Adapt.startController.isEnabled()?"#/":Adapt.startController.getStartHash(true);Adapt.router.navigate(hash,{trigger:true,replace:true})}.bind(this))}Adapt.log.debug("Firing app:dataReady");try{Adapt.trigger("app:dataReady")}catch(e){Adapt.log.error("Error during app:dataReady trigger",e)}_context6.next=5;return Adapt.wait.queue();case 5:case"end":return _context6.stop();}}},_callee6,this)}));function triggerDataReady(_x3){return _triggerDataReady.apply(this,arguments)}return triggerDataReady}()},{key:"triggerInit",value:function triggerInit(){this.isReady=true;this.trigger("ready")}},{key:"whenReady",value:function whenReady(){var _this34=this;if(this.isReady)return Promise.resolve();return new Promise(function(resolve){_newArrowCheck(this,_this34);this.once("ready",resolve)}.bind(this))}},{key:"findById",value:function findById(id){var model=this._byAdaptID[id];if(!model){console.warn("Adapt.findById() unable to find collection type for id: ".concat(id));return}return model}}]);return Data}(AdaptCollection);return Adapt.data=new Data});define("core/js/offlineStorage",["core/js/adapt"],function(Adapt){var OfflineStorage=Backbone.Controller.extend({ready:true,_handler:undefined,initialize:function initialize(handler){if(!handler){return}this.ready=false;this._handler=handler},hasHandler:function hasHandler(){return this._handler!==undefined},set:function set(name,value){if(this._handler&&this._handler.set){return this._handler.set.apply(this._handler,arguments)}this[name]=value},get:function get(name){if(this._handler&&this._handler.get){return this._handler.get.apply(this._handler,arguments)}return this[name]},setReadyStatus:function setReadyStatus(){this.ready=true;Adapt.trigger("offlineStorage:ready")}});Adapt.offlineStorage=new OfflineStorage;return Adapt.offlineStorage});define("core/js/enums/completionStateEnum",[],function(){var COMPLETION_STATE=ENUM(["INCOMPLETE","COMPLETED","PASSED","FAILED"]);return COMPLETION_STATE});define("core/js/tracking",["core/js/adapt","core/js/enums/completionStateEnum"],function(Adapt,COMPLETION_STATE){var Tracking=Backbone.Controller.extend({_config:{_requireContentCompleted:true,_requireAssessmentCompleted:false},_assessmentState:null,initialize:function initialize(){Adapt.once("configModel:dataLoaded",this.loadConfig.bind(this));Adapt.on("app:dataReady",this.setupEventListeners.bind(this))},setupEventListeners:function setupEventListeners(){if(this._config._requireAssessmentCompleted){this.listenTo(Adapt,{"assessment:complete":this.onAssessmentComplete,"assessment:restored":this.onAssessmentRestored})}if(this._config._requireContentCompleted){this.listenTo(Adapt.course,"change:_isComplete",this.checkCompletion)}},onAssessmentComplete:function onAssessmentComplete(assessmentState){this._assessmentState=assessmentState;this.checkCompletion()},onAssessmentRestored:function onAssessmentRestored(assessmentState){this._assessmentState=assessmentState},checkCompletion:function checkCompletion(){var completionData=this.getCompletionData();if(completionData.status===COMPLETION_STATE.INCOMPLETE){return}Adapt.trigger("tracking:complete",completionData);Adapt.log.debug("tracking:complete",completionData)},getCompletionData:function getCompletionData(){var completionData={status:COMPLETION_STATE.INCOMPLETE,assessment:null};if(this._config._requireContentCompleted&&!Adapt.course.get("_isComplete")){return completionData}if(this._config._requireAssessmentCompleted){if(!this._assessmentState){return completionData}completionData.status=this._assessmentState.isPass?COMPLETION_STATE.PASSED:COMPLETION_STATE.FAILED;completionData.assessment=this._assessmentState;return completionData}completionData.status=COMPLETION_STATE.COMPLETED;return completionData},loadConfig:function loadConfig(){if(Adapt.config.has("_completionCriteria")){this._config=Adapt.config.get("_completionCriteria")}}});Adapt.tracking=new Tracking;return Adapt.tracking});define("core/js/device",["core/js/adapt","bowser"],function(Adapt,Bowser){var $html=$("html");var $window=$(window);Adapt.device={touch:Modernizr.touchevents,screenWidth:getScreenWidth(),screenHeight:getScreenHeight(),browser:(Bowser.name||"").toLowerCase(),version:(Bowser.version||"").toLowerCase(),OS:getOperatingSystem().toLowerCase(),osVersion:Bowser.osversion||"",renderingEngine:getRenderingEngine()};Object.defineProperties(Adapt.device,{"orientation":{get:function get(){return this.screenWidth>=this.screenHeight?"landscape":"portrait"}},"aspectRatio":{get:function get(){return this.screenWidth/this.screenHeight}}});Adapt.once("app:dataReady",function(){Adapt.device.screenSize=checkScreenSize();$html.addClass("size-"+Adapt.device.screenSize);if(Adapt.device.orientation){$html.addClass("orientation-"+Adapt.device.orientation)}$window.on("resize orientationchange",onWindowResize)});function checkScreenSize(){var screenSizeConfig=Adapt.config.get("screenSize");var screenSize;var screensizeEmThreshold=300;var baseFontSize=16;var mediumEmBreakpoint=screenSizeConfig.medium>screensizeEmThreshold?screenSizeConfig.medium/baseFontSize:screenSizeConfig.medium;var smallEmBreakpoint=screenSizeConfig.small>screensizeEmThreshold?screenSizeConfig.small/baseFontSize:screenSizeConfig.small;var fontSize=parseFloat($("html").css("font-size"));var screenSizeEmWidth=Adapt.device.screenWidth/fontSize;if(screenSizeEmWidth>mediumEmBreakpoint){screenSize="large"}else if(screenSizeEmWidth>smallEmBreakpoint){screenSize="medium"}else{screenSize="small"}return screenSize}function getScreenWidth(){return isAppleDevice()?getAppleScreenWidth():window.innerWidth||$window.width()}function getScreenHeight(){return isAppleDevice()?getAppleScreenHeight():window.innerHeight||$window.height()}function getOperatingSystem(){var os="";var flags=["windows","mac","linux","windowsphone","chromeos","android","ios","blackberry","firefoxos","webos","bada","tizen","sailfish"];for(var i=0;i<flags.length;i++){if(Bowser[flags[i]]){os=flags[i];break}}if(os===""){var platform=navigator.platform;var platforms=["Win","Mac","Linux"];os="PlatformUnknown";for(var j=0;j<platforms.length;j++){if(platform.indexOf(platforms[j])!==-1){os=platforms[j].toLowerCase();break}}if(os==="win"){os="windows"}}return os}function getRenderingEngine(){var engine="";var flags=["webkit","blink","gecko","msie","msedge"];for(var i=0;i<flags.length;i++){if(Bowser[flags[i]]){engine=flags[i];break}}return engine}var onWindowResize=_.debounce(function onScreenSizeChanged(){var previousWidth=Adapt.device.screenWidth;var previousHeight=Adapt.device.screenHeight;Adapt.device.screenWidth=getScreenWidth();Adapt.device.screenHeight=getScreenHeight();if(previousWidth===Adapt.device.screenWidth&&previousHeight===Adapt.device.screenHeight){return}var newScreenSize=checkScreenSize();if(newScreenSize!==Adapt.device.screenSize){Adapt.device.screenSize=newScreenSize;$html.removeClass("size-small size-medium size-large").addClass("size-"+Adapt.device.screenSize);if(Adapt.device.orientation){$html.removeClass("orientation-landscape orientation-portrait").addClass("orientation-"+Adapt.device.orientation)}Adapt.trigger("device:changed",Adapt.device.screenSize)}Adapt.trigger("device:preResize device:resize device:postResize",Adapt.device.screenWidth)},100);function isAppleDevice(){return /iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function getAppleScreenWidth(){return Math.abs(window.orientation)===90?screen.height:screen.width}function getAppleScreenHeight(){return Math.abs(window.orientation)===90?screen.width:screen.height}function getAppleDeviceType(){var type="";var flags=["iphone","ipad","ipod"];for(var i=0;i<flags.length;i++){if(Bowser[flags[i]]){type=flags[i];break}}return type}function pixelDensity(){var pixelDensity=window.devicePixelRatio||1;if(pixelDensity>=3){return"ultra-high"}else if(pixelDensity>=2){return"high"}else if(pixelDensity>=1.5){return"medium"}else{return"low"}}var browser=Adapt.device.browser.toLowerCase();var browserString=browser.replace(/msie|internet explorer/,"ie");browserString=browserString+" version-"+Adapt.device.version+" OS-"+Adapt.device.OS+" "+getAppleDeviceType();browserString+=browserString.replace(".","-").toLowerCase();$html.addClass(browserString+" pixel-density-"+pixelDensity())});define("core/js/views/drawerItemView",["core/js/adapt"],function(Adapt){var DrawerItemView=Backbone.View.extend({className:"drawer__menu drawer__item",attributes:{role:"list"},initialize:function initialize(){this.listenTo(Adapt,"drawer:empty",this.remove);this.render()},events:{"click .drawer__item-btn":"onDrawerItemClicked"},render:function render(){var data=this.model.toJSON();var template=Handlebars.templates["drawerItem"];$(this.el).html(template(data)).appendTo(".drawer__holder");return this},onDrawerItemClicked:function onDrawerItemClicked(event){event.preventDefault();var eventCallback=this.model.get("eventCallback");Adapt.trigger(eventCallback)}},{type:"drawerItem"});return DrawerItemView});define("core/js/views/drawerView",["core/js/adapt","core/js/views/drawerItemView"],function(Adapt,DrawerItemView){var DrawerView=Backbone.View.extend({className:"drawer u-display-none",disableAnimation:false,attributes:{"role":"dialog","aria-modal":"true","aria-labelledby":"drawer-heading","aria-hidden":"true"},initialize:function initialize(){this.disableAnimation=Adapt.config.has("_disableAnimation")?Adapt.config.get("_disableAnimation"):false;this._isVisible=false;this.drawerDir="right";if(Adapt.config.get("_defaultDirection")==="rtl"){this.drawerDir="left"}this.setupEventListeners();this.render();this.drawerDuration=Adapt.config.get("_drawer")._duration;this.drawerDuration=this.drawerDuration?this.drawerDuration:400;this.$wrapper=$("#wrapper")},setupEventListeners:function setupEventListeners(){this.listenTo(Adapt,{"navigation:toggleDrawer":this.toggleDrawer,"drawer:triggerCustomView":this.openCustomView,"drawer:closeDrawer":this.onCloseDrawer,"remove":this.onCloseDrawer,"drawer:remove":this.remove});this._onKeyUp=_.bind(this.onKeyUp,this);this.setupEscapeKey()},setupEscapeKey:function setupEscapeKey(){$(window).on("keyup",this._onKeyUp)},onKeyUp:function onKeyUp(event){if(event.which!==27)return;event.preventDefault();this.onCloseDrawer()},events:{"click .drawer__back":"onBackButtonClicked","click .drawer__close":"onCloseClicked"},render:function render(){var template=Handlebars.templates["drawer"];$(this.el).html(template({_globals:Adapt.course.get("_globals")})).prependTo("body");var shadowTemplate=Handlebars.templates["shadow"];$(shadowTemplate()).prependTo("body");_.defer(_.bind(function(){this.postRender()},this));return this},postRender:function postRender(){this.$("a, button, input, select, textarea").attr("tabindex",-1);this.checkIfDrawerIsAvailable()},openCustomView:function openCustomView(view,hasBackButton){this._hasBackButton=hasBackButton;this._isCustomViewVisible=true;Adapt.trigger("drawer:empty");this.showDrawer();this.$(".drawer__holder").html(view)},checkIfDrawerIsAvailable:function checkIfDrawerIsAvailable(){if(this.collection.length===0){$(".js-nav-drawer-btn").addClass("u-display-none");Adapt.trigger("drawer:noItems");return}$(".js-nav-drawer-btn").removeClass("u-display-none")},onBackButtonClicked:function onBackButtonClicked(event){event.preventDefault();this.showDrawer(true)},onCloseClicked:function onCloseClicked(event){event.preventDefault();this.hideDrawer()},onCloseDrawer:function onCloseDrawer($toElement){this.hideDrawer($toElement)},toggleDrawer:function toggleDrawer(){if(this._isVisible&&this._isCustomViewVisible===false){this.hideDrawer()}else{this.showDrawer(true)}},showDrawer:function showDrawer(emptyDrawer){this.$el.removeClass("u-display-none").removeAttr("aria-hidden");if(!this._isVisible){Adapt.a11y.popupOpened(this.$el);Adapt.a11y.scrollDisable("body");this._isVisible=true}this.$("a, button, input, select, textarea").attr("tabindex",0);if(emptyDrawer){this.$(".drawer__back").addClass("u-display-none");this._isCustomViewVisible=false;this.emptyDrawer();if(this.collection.models.length===1){Adapt.trigger(this.collection.models[0].get("eventCallback"));this._isCustomViewVisible=false}else{this.renderItems();Adapt.trigger("drawer:openedItemView")}}else{if(this._hasBackButton&&this.collection.models.length>1){this.$(".drawer__back").removeClass("u-display-none")}else{this.$(".drawer__back").addClass("u-display-none")}Adapt.trigger("drawer:openedCustomView")}var direction={};if(this.disableAnimation){$(".js-shadow").removeClass("u-display-none");$(".js-drawer-holder").scrollTop(0);direction[this.drawerDir]=0;this.$el.css(direction);complete.call(this)}else{$(".js-shadow").velocity({opacity:1},{duration:this.drawerDuration,begin:_.bind(function(){$(".js-shadow").removeClass("u-display-none");$(".js-drawer-holder").scrollTop(0);complete.call(this)},this)});var showEasingAnimation=Adapt.config.get("_drawer")._showEasing;var easing=showEasingAnimation||"easeOutQuart";direction[this.drawerDir]=0;this.$el.velocity(direction,this.drawerDuration,easing)}function complete(){this.addShadowEvent();Adapt.trigger("drawer:opened");Adapt.a11y.focusFirst(this.$el,{defer:true})}},emptyDrawer:function emptyDrawer(){this.$(".drawer__holder").empty()},renderItems:function renderItems(){Adapt.trigger("drawer:empty");this.emptyDrawer();var models=this.collection.models;for(var i=0,len=models.length;i<len;i++){var item=models[i];new DrawerItemView({model:item})}},hideDrawer:function hideDrawer($toElement){var direction={};if(this._isVisible){Adapt.a11y.popupClosed($toElement);this._isVisible=false;Adapt.a11y.scrollEnable("body")}else{return}if(this.disableAnimation){direction[this.drawerDir]=-this.$el.width();this.$el.css(direction).addClass("u-display-none").attr("aria-hidden","true");$(".js-shadow").addClass("u-display-none");Adapt.trigger("drawer:closed")}else{var showEasingAnimation=Adapt.config.get("_drawer")._hideEasing;var easing=showEasingAnimation||"easeOutQuart";direction[this.drawerDir]=-this.$el.width();this.$el.velocity(direction,this.drawerDuration,easing,_.bind(function(){this.$el.addClass("u-display-none").attr("aria-hidden","true");Adapt.trigger("drawer:closed")},this));$(".js-shadow").velocity({opacity:0},{duration:this.drawerDuration,complete:function complete(){$(".js-shadow").addClass("u-display-none")}})}this._isCustomViewVisible=false;this.removeShadowEvent()},addShadowEvent:function addShadowEvent(){$(".js-shadow").one("click touchstart",function(){this.onCloseDrawer()}.bind(this))},removeShadowEvent:function removeShadowEvent(){$(".js-shadow").off("click touchstart")},remove:function remove(){Backbone.View.prototype.remove.apply(this,arguments);$(window).off("keyup",this._onKeyUp);Adapt.trigger("drawer:empty");this.collection.reset();$(".js-shadow").remove()}},{childContainer:".js-drawer-holder",childView:DrawerItemView});return DrawerView});define("core/js/drawer",["core/js/adapt","core/js/views/drawerView"],function(Adapt,DrawerView){var DrawerCollection=new Backbone.Collection(null,{comparator:"drawerOrder"});var Drawer={};Drawer.addItem=function(drawerObject,eventCallback){drawerObject.eventCallback=eventCallback;DrawerCollection.add(drawerObject)};Drawer.triggerCustomView=function(view,hasBackButton){if(hasBackButton!==false){hasBackButton=true}Adapt.trigger("drawer:triggerCustomView",view,hasBackButton)};Adapt.on({"adapt:start":function adaptStart(){new DrawerView({collection:DrawerCollection})},"app:languageChanged":function appLanguageChanged(){Adapt.trigger("drawer:remove")}});Adapt.drawer=Drawer});define("core/js/views/notifyPushView",["core/js/adapt"],function(Adapt){var NotifyPushView=Backbone.View.extend({className:function className(){var classes="notify-push ";classes+=this.model.get("_classes")||"";return classes},attributes:{"role":"dialog","aria-labelledby":"notify-push-heading","aria-modal":"false"},initialize:function initialize(){this.listenTo(Adapt,{"notify:pushShown notify:pushRemoved":this.updateIndexPosition,"remove":this.remove});this.listenTo(this.model.collection,{"remove":this.updateIndexPosition,"change:_index":this.updatePushPosition});this.preRender();this.render()},events:{"click .js-notify-push-close-btn":"closePush","click .js-notify-push-inner":"triggerEvent"},preRender:function preRender(){this.hasBeenRemoved=false},render:function render(){var data=this.model.toJSON();var template=Handlebars.templates["notifyPush"];this.$el.html(template(data)).appendTo("#wrapper");_.defer(this.postRender.bind(this));return this},postRender:function postRender(){this.$el.addClass("is-active");_.delay(this.closePush.bind(this),this.model.get("_timeout"));Adapt.trigger("notify:pushShown")},closePush:function closePush(event){if(event){event.preventDefault()}if(this.hasBeenRemoved===false){this.hasBeenRemoved=true;this.$el.removeClass("is-active");_.delay(function(){this.model.collection.remove(this.model);Adapt.trigger("notify:pushRemoved",this);this.remove()}.bind(this),600)}},triggerEvent:function triggerEvent(event){Adapt.trigger(this.model.get("_callbackEvent"));this.closePush()},updateIndexPosition:function updateIndexPosition(){if(!this.hasBeenRemoved){var models=this.model.collection.models;for(var i=0,len=models.length;i<len;i++){var index=i;var model=models[i];if(model.get("_isActive")===true){model.set("_index",index);this.updatePushPosition()}}}},updatePushPosition:function updatePushPosition(){if(this.hasBeenRemoved){return}if(typeof this.model.get("_index")!=="undefined"){var elementHeight=this.$el.height();var offset=20;var navigationHeight=$(".nav").height();var currentIndex=this.model.get("_index");var flippedIndex=currentIndex===0?1:0;if(this.model.collection.where({_isActive:true}).length===1){flippedIndex=0}var positionLowerPush=(elementHeight+offset)*flippedIndex+navigationHeight+offset;this.$el.css("top",positionLowerPush)}}});return NotifyPushView});define("core/js/models/notifyModel",[],function(){var NotifyModel=Backbone.Model.extend({defaults:{_isActive:false,_showIcon:false,_timeout:3000}});return NotifyModel});define("core/js/collections/notifyPushCollection",["core/js/adapt","core/js/views/notifyPushView","core/js/models/notifyModel"],function(Adapt,NotifyPushView,NotifyModel){var NotifyPushCollection=Backbone.Collection.extend({model:NotifyModel,initialize:function initialize(){this.listenTo(this,"add",this.onPushAdded);this.listenTo(Adapt,"notify:pushRemoved",this.onRemovePush)},onPushAdded:function onPushAdded(model){this.checkPushCanShow(model)},checkPushCanShow:function checkPushCanShow(model){if(this.canShowPush()){model.set("_isActive",true);this.showPush(model)}},canShowPush:function canShowPush(){var availablePushNotifications=this.where({_isActive:true});if(availablePushNotifications.length>=2){return false}return true},showPush:function showPush(model){new NotifyPushView({model:model})},onRemovePush:function onRemovePush(view){var inactivePushNotifications=this.where({_isActive:false});if(inactivePushNotifications.length>0){this.checkPushCanShow(inactivePushNotifications[0])}}});return NotifyPushCollection});define("core/js/views/notifyView",["core/js/adapt"],function(Adapt){var NotifyView=Backbone.View.extend({className:function className(){var classes="notify ";classes+=this.model.get("_classes")||"";return classes},attributes:function attributes(){return Object.assign({"role":"dialog","aria-labelledby":"notify-heading","aria-modal":"true"},this.model.get("_attributes"))},disableAnimation:false,isOpen:false,hasOpened:false,initialize:function initialize(){_.bindAll(this,"resetNotifySize");this.disableAnimation=Adapt.config.has("_disableAnimation")?Adapt.config.get("_disableAnimation"):false;this.setupEventListeners();this.render()},setupEventListeners:function setupEventListeners(){this.listenTo(Adapt,{"remove page:scrollTo":this.closeNotify,"notify:resize":this.resetNotifySize,"notify:cancel":this.cancelNotify,"notify:close":this.closeNotify,"device:resize":this.resetNotifySize});this._onKeyUp=this.onKeyUp.bind(this);this.setupEscapeKey()},setupEscapeKey:function setupEscapeKey(){$(window).on("keyup",this._onKeyUp)},onKeyUp:function onKeyUp(event){if(event.which!==27)return;event.preventDefault();this.cancelNotify()},events:{"click .js-notify-btn-alert":"onAlertButtonClicked","click .js-notify-btn-prompt":"onPromptButtonClicked","click .js-notify-close-btn":"onCloseButtonClicked","click .js-notify-shadow-click":"onShadowClicked"},render:function render(){var data=this.model.toJSON();var template=Handlebars.templates.notify;this.$el.css("visibility","hidden");this.$el.html(template(data)).prependTo("body");this.$(".notify__popup").css("visibility","hidden");this.$el.css("visibility","visible");this.showNotify();return this},onAlertButtonClicked:function onAlertButtonClicked(event){event.preventDefault();this.closeNotify();Adapt.trigger(this.model.get("_callbackEvent"),this)},onPromptButtonClicked:function onPromptButtonClicked(event){event.preventDefault();this.closeNotify();Adapt.trigger($(event.currentTarget).attr("data-event"),this)},onCloseButtonClicked:function onCloseButtonClicked(event){event.preventDefault();this.cancelNotify()},onShadowClicked:function onShadowClicked(event){event.preventDefault();if(this.model.get("_closeOnShadowClick")===false)return;this.cancelNotify()},cancelNotify:function cancelNotify(){if(this.model.get("_isCancellable")===false)return;this.closeNotify();Adapt.trigger("notify:cancelled",this)},resetNotifySize:function resetNotifySize(){if(!this.hasOpened)return;$(".notify__popup").removeAttr("style").css({visibility:"visible",opacity:1});this.resizeNotify()},resizeNotify:function resizeNotify(){var windowHeight=$(window).height();var notifyHeight=this.$(".notify__popup").outerHeight();if(notifyHeight>=windowHeight){this.$(".notify__popup").css({"height":"100%","top":0,"overflow-y":"scroll","-webkit-overflow-scrolling":"touch"})}else{this.$(".notify__popup").css({"margin-top":-(notifyHeight/2)})}},showNotify:function showNotify(){this.isOpen=true;this.addSubView();this.$previousActiveElement=$(document.activeElement);Adapt.trigger("notify:opened",this);this.$el.imageready(this.onLoaded.bind(this))},onLoaded:function onLoaded(){if(this.disableAnimation){this.$(".notify__shadow").css("display","block")}else{this.$(".notify__shadow").velocity({opacity:0},{duration:0}).velocity({opacity:1},{duration:400,begin:function(){this.$(".notify__shadow").css("display","block")}.bind(this)})}this.resizeNotify();if(this.disableAnimation){this.$(".notify__popup").css("visibility","visible");this.onOpened()}else{this.$(".notify__popup").velocity({opacity:0},{duration:0}).velocity({opacity:1},{duration:400,begin:function(){this.$(".notify__popup").css("visibility","visible");this.onOpened()}.bind(this)})}},onOpened:function onOpened(){this.hasOpened=true;Adapt.a11y.popupOpened(this.$(".notify__popup"));Adapt.a11y.scrollDisable("body");$("html").addClass("notify");Adapt.a11y.focusFirst(this.$(".notify__popup"),{defer:false})},addSubView:function addSubView(){this.subView=this.model.get("_view");if(!this.subView)return;this.subView.$el.on("resize",this.resetNotifySize);this.$(".notify__content-inner").append(this.subView.$el)},closeNotify:function closeNotify(event){if(!this.isOpen)return;this.isOpen=false;if(!this.hasOpened){this.listenToOnce(Adapt,"popup:opened",function(){_.defer(this.onCloseReady.bind(this))})}else{this.onCloseReady()}},onCloseReady:function onCloseReady(){if(this.disableAnimation){this.$(".notify__popup").css("visibility","hidden");this.$el.css("visibility","hidden");this.remove()}else{this.$(".notify__popup").velocity({opacity:0},{duration:400,complete:function(){this.$(".notify__popup").css("visibility","hidden")}.bind(this)});this.$(".notify__shadow").velocity({opacity:0},{duration:400,complete:function(){this.$el.css("visibility","hidden");this.remove()}.bind(this)})}Adapt.a11y.scrollEnable("body");$("html").removeClass("notify");Adapt.a11y.popupClosed(this.$previousActiveElement);Adapt.trigger("notify:closed",this)},remove:function remove(){this.removeSubView();$(window).off("keyup",this._onKeyUp);Backbone.View.prototype.remove.apply(this,arguments)},removeSubView:function removeSubView(){if(!this.subView)return;this.subView.$el.off("resize",this.resetNotifySize);this.subView.remove();this.subView=null}});return NotifyView});define("core/js/notify",["core/js/adapt","core/js/collections/notifyPushCollection","core/js/views/notifyView","core/js/models/notifyModel"],function(Adapt,NotifyPushCollection,NotifyView,NotifyModel){var Notify=Backbone.Controller.extend({notifyPushes:null,_warnFirstOnly:true,_warn:true,_hasWarned:false,initialize:function initialize(){this.notifyPushes=new NotifyPushCollection;this.listenTo(Adapt,{"notify:popup":this._deprecated.bind(this,"popup"),"notify:alert":this._deprecated.bind(this,"alert"),"notify:prompt":this._deprecated.bind(this,"prompt"),"notify:push":this._deprecated.bind(this,"push")})},_deprecated:function _deprecated(type,notifyObject){if(this._warn&&this._warnFirstOnly&&!this._hasWarned){Adapt.log.warn("NOTIFY DEPRECATED: Adapt.trigger('notify:"+type+"', notifyObject); is no longer supported, please use Adapt.notify."+type+"(notifyObject);");this._hasWarned=true}return this.create(notifyObject,{_type:type})},create:function create(notifyObject,defaults){notifyObject=_.defaults({},notifyObject,defaults,{_type:"popup",_isCancellable:true,_showCloseButton:true,_closeOnShadowClick:true});if(notifyObject._type==="push"){this.notifyPushes.push(notifyObject);return}return new NotifyView({model:new NotifyModel(notifyObject)})},popup:function popup(notifyObject){return this.create(notifyObject,{_type:"popup"})},alert:function alert(notifyObject){return this.create(notifyObject,{_type:"alert"})},prompt:function prompt(notifyObject){return this.create(notifyObject,{_type:"prompt"})},push:function push(notifyObject){return this.create(notifyObject,{_type:"push"})}});return Adapt.notify=new Notify});define("core/js/models/routerModel",["core/js/adapt"],function(Adapt){var RouterModel=function(_Backbone$Model5){"use strict";_inherits(RouterModel,_Backbone$Model5);var _super13=_createSuper(RouterModel);function RouterModel(){_classCallCheck(this,RouterModel);return _super13.apply(this,arguments)}_createClass(RouterModel,[{key:"defaults",value:function defaults(){return{_canNavigate:true,_shouldNavigateFocus:true}}},{key:"lockedAttributes",value:function lockedAttributes(){return{_canNavigate:false,_shouldNavigateFocus:false}}}]);return RouterModel}(Backbone.Model);return RouterModel});define("core/js/router",["core/js/adapt","core/js/models/routerModel","core/js/models/courseModel","core/js/models/contentObjectModel","core/js/models/menuModel","core/js/startController"],function(Adapt,RouterModel,CourseModel,ContentObjectModel,MenuModel){var Router=function(_Backbone$Router){"use strict";_inherits(Router,_Backbone$Router);var _super14=_createSuper(Router);function Router(){_classCallCheck(this,Router);return _super14.apply(this,arguments)}_createClass(Router,[{key:"routes",value:function routes(){return{"":"handleRoute","id/:id":"handleRoute",":pluginName(/*location)(/*action)":"handleRoute"}}},{key:"initialize",value:function initialize(_ref4){var model=_ref4.model;this.model=model;this._navigationRoot=null;this._isCircularNavigationInProgress=false;this.showLoading();this.$wrapper=$("#wrapper");this.$html=$("html");this.listenToOnce(Adapt,"app:dataReady",this.setDocumentTitle);this.listenTo(Adapt,"router:navigateTo",this.navigateToArguments)}},{key:"showLoading",value:function showLoading(){$(".js-loading").show()}},{key:"hideLoading",value:function hideLoading(){$(".js-loading").hide()}},{key:"setDocumentTitle",value:function setDocumentTitle(){var _this35=this;var currentModel=Adapt.location._currentModel;var hasSubTitle=currentModel&&currentModel!==Adapt.router.rootModel&&currentModel.get("title");var title=[this.rootModel.get("title"),hasSubTitle&&currentModel.get("title")].filter(Boolean).join(" | ");this.listenToOnce(Adapt,"contentObjectView:preRender",function(){_newArrowCheck(this,_this35);var escapedTitle=$("<div>".concat(title,"</div>")).text();document.title=escapedTitle}.bind(this))}},{key:"navigateToArguments",value:function navigateToArguments(args){var _this36=this;args=args.filter(function(v){_newArrowCheck(this,_this36);return v!==null}.bind(this));var options={trigger:false,replace:false};if(args.length===1&&Adapt.findById(args[0])){this.navigate("#/id/"+args[0],options);return}if(args.length<=3){this.navigate("#/"+args.join("/"),options);return}Adapt.log.deprecated("Use Backbone.history.navigate or window.location.href instead of Adapt.trigger('router:navigateTo')");this.handleRoute.apply(this,_toConsumableArray(args))}},{key:"handleRoute",value:function handleRoute(){var _this37=this;for(var _len13=arguments.length,args=new Array(_len13),_key13=0;_key13<_len13;_key13++){args[_key13]=arguments[_key13]}args=args.filter(function(v){_newArrowCheck(this,_this37);return v!==null}.bind(this));if(this.model.get("_canNavigate")){this._isCircularNavigationInProgress=false}if(this._isCircularNavigationInProgress===false){Adapt.trigger("router:navigate",args)}if(this.model.get("_canNavigate")){this.model.set("_canNavigate",false,{pluginName:"adapt"});if(args.length<=1){return this.handleId.apply(this,_toConsumableArray(args))}return this.handlePluginRouter.apply(this,_toConsumableArray(args))}if(this._isCircularNavigationInProgress){this._isCircularNavigationInProgress=false;return}this._isCircularNavigationInProgress=true;Adapt.trigger("router:navigationCancelled",args);this.navigateToCurrentRoute(true)}},{key:"handlePluginRouter",value:function(){var _handlePluginRouter=_asyncToGenerator(regeneratorRuntime.mark(function _callee7(pluginName,location,action){var pluginLocation;return regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:pluginLocation=[pluginName,location&&"-".concat(location),action&&"-".concat(action)].filter(Boolean).join("");_context7.next=3;return this.updateLocation(pluginLocation,null,null,null);case 3:Adapt.trigger("router:plugin:"+pluginName,pluginName,location,action);Adapt.trigger("router:plugin",pluginName,location,action);this.model.set("_canNavigate",true,{pluginName:"adapt"});case 6:case"end":return _context7.stop();}}},_callee7,this)}));function handlePluginRouter(_x4,_x5,_x6){return _handlePluginRouter.apply(this,arguments)}return handlePluginRouter}()},{key:"handleId",value:function(){var _handleId=_asyncToGenerator(regeneratorRuntime.mark(function _callee8(id){var _this38=this;var rootModel,model,isContentObject,isRoot,startController,isCourse,type,location,ViewClass,isMenu;return regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:rootModel=Adapt.router.rootModel;model=!id?rootModel:Adapt.findById(id);if(model){_context8.next=5;break}this.model.set("_canNavigate",true,{pluginName:"adapt"});return _context8.abrupt("return");case 5:id=model.get("_id");isContentObject=model instanceof ContentObjectModel;if(isContentObject){_context8.next=11;break}this.model.set("_canNavigate",true,{pluginName:"adapt"});Adapt.navigateToElement("."+id,{replace:true});return _context8.abrupt("return");case 11:isRoot=model===rootModel;if(!(isRoot&&Adapt.course.has("_start"))){_context8.next=16;break}startController=Adapt.course.get("_start");if(!(startController._isEnabled===true&&startController._isMenuDisabled===true)){_context8.next=16;break}return _context8.abrupt("return");case 16:if(!(model.get("_isLocked")&&Adapt.config.get("_forceRouteLocking"))){_context8.next=22;break}Adapt.log.warn("Unable to navigate to locked id: "+id);this.model.set("_canNavigate",true,{pluginName:"adapt"});if(!(Adapt.location._previousId===undefined)){_context8.next=21;break}return _context8.abrupt("return",this.navigate("#/",{trigger:true,replace:true}));case 21:return _context8.abrupt("return",this.navigateBack());case 22:this.showLoading();_context8.next=25;return Adapt.remove();case 25:isCourse=model instanceof CourseModel;type=isCourse?"menu":model.get("_type");location=isCourse?"course":"".concat(type,"-").concat(id);model.set("_isVisited",true);_context8.next=31;return this.updateLocation(location,type,id,model);case 31:Adapt.once("contentObjectView:ready",function(){_newArrowCheck(this,_this38);this.model.set("_canNavigate",true,{pluginName:"adapt"});this.handleNavigationFocus()}.bind(this));Adapt.trigger("router:".concat(type," router:contentObject"),model);ViewClass=Adapt.getViewClass(model);isMenu=model instanceof MenuModel;if(!(!ViewClass&&isMenu)){_context8.next=38;break}Adapt.log.deprecated("Using event based menu view instantiation for '".concat(Adapt.getViewName(model),"'"));return _context8.abrupt("return");case 38:this.$wrapper.append(new ViewClass({model:model}).$el);case 39:case"end":return _context8.stop();}}},_callee8,this)}));function handleId(_x7){return _handleId.apply(this,arguments)}return handleId}()},{key:"updateLocation",value:function(){var _updateLocation=_asyncToGenerator(regeneratorRuntime.mark(function _callee9(currentLocation,type,id,currentModel){return regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:Adapt.location._previousModel=Adapt.location._currentModel;Adapt.location._previousId=Adapt.location._currentId;Adapt.location._previousContentType=Adapt.location._contentType;Adapt.location._currentModel=currentModel;Adapt.location._currentId=id;Adapt.location._contentType=type;Adapt.location._currentLocation=currentLocation;if(type==="menu"){Adapt.location._lastVisitedType="menu";Adapt.location._lastVisitedMenu=id}else if(type==="page"){Adapt.location._lastVisitedType="page";Adapt.location._lastVisitedPage=id}this.setDocumentTitle();this.setGlobalClasses();Adapt.trigger("router:location",Adapt.location);_context9.next=13;return Adapt.wait.queue();case 13:case"end":return _context9.stop();}}},_callee9,this)}));function updateLocation(_x8,_x9,_x10,_x11){return _updateLocation.apply(this,arguments)}return updateLocation}()},{key:"setGlobalClasses",value:function setGlobalClasses(){var currentModel=Adapt.location._currentModel;var htmlClasses=currentModel&&currentModel.get("_htmlClasses")||"";var classes=Adapt.location._currentId?"location-".concat(Adapt.location._contentType," location-id-").concat(Adapt.location._currentId):"location-".concat(Adapt.location._currentLocation);var currentClasses="".concat(classes," ").concat(htmlClasses);this.$html.removeClass(Adapt.location._previousClasses).addClass(currentClasses).attr("data-location",Adapt.location._currentLocation);this.$wrapper.removeClass().addClass(classes).attr("data-location",Adapt.location._currentLocation);Adapt.location._previousClasses=currentClasses}},{key:"handleNavigationFocus",value:function handleNavigationFocus(){if(!this.model.get("_shouldNavigateFocus"))return;Adapt.a11y.focus("body")}},{key:"navigateBack",value:function navigateBack(){Backbone.history.history.back()}},{key:"navigateToCurrentRoute",value:function navigateToCurrentRoute(force){if(!this.model.get("_canNavigate")&&!force){return}if(!Adapt.location._currentId){return}var currentId=Adapt.location._currentModel.get("_id");var isRoot=Adapt.location._currentModel===this.rootModel;var route=isRoot?"#/":"#/id/"+currentId;this.navigate(route,{trigger:true,replace:true})}},{key:"navigateToPreviousRoute",value:function navigateToPreviousRoute(force){if(!this.model.get("_canNavigate")&&!force){return}var currentModel=Adapt.location._currentModel;var previousModel=Adapt.location._previousModel;if(!currentModel){return this.navigateBack()}if(Adapt.location._currentModel instanceof MenuModel){return this.navigateToParent()}if(previousModel){return this.navigateBack()}this.navigateToParent()}},{key:"navigateToParent",value:function navigateToParent(force){if(!this.model.get("_canNavigate")&&!force){return}var parentId=Adapt.location._currentModel.get("_parentId");var parentModel=Adapt.findById(parentId);var isRoot=parentModel===this.rootModel;var route=isRoot?"#/":"#/id/"+parentId;this.navigate(route,{trigger:true})}},{key:"navigateToHomeRoute",value:function navigateToHomeRoute(force){if(!this.model.get("_canNavigate")&&!force){return}this.navigate("#/",{trigger:true})}},{key:"navigateToElement",value:function navigateToElement(selector){var _this39=this;var settings=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var currentModelId=selector.replace(/\./g,"");var currentModel=Adapt.findById(currentModelId);if(!currentModel)return;var currentPage=currentModel instanceof ContentObjectModel?currentModel:currentModel.findAncestor("contentObjects");var pageId=currentPage.get("_id");if(pageId===Adapt.location._currentId){return Adapt.scrollTo(selector,settings)}Adapt.once("contentObjectView:ready",_.debounce(function(){_newArrowCheck(this,_this39);this.model.set("_shouldNavigateFocus",true,{pluginName:"adapt"});Adapt.scrollTo(selector,settings)}.bind(this),1));var shouldReplaceRoute=settings.replace||false;this.model.set("_shouldNavigateFocus",false,{pluginName:"adapt"});this.navigate("#/id/"+pageId,{trigger:true,replace:shouldReplaceRoute})}},{key:"get",value:function get(){var _this$model;Adapt.log.deprecated("Adapt.router.get, please use Adapt.router.model.get");return(_this$model=this.model).get.apply(_this$model,arguments)}},{key:"set",value:function set(){var _this$model2;Adapt.log.deprecated("Adapt.router.set, please use Adapt.router.model.set");return(_this$model2=this.model).set.apply(_this$model2,arguments)}},{key:"rootModel",get:function get(){return this._navigationRoot||Adapt.course},set:function set(model){this._navigationRoot=model}}]);return Router}(Backbone.Router);Adapt.router=new Router({model:new RouterModel(null,{reset:true})});Adapt.navigateToElement=Adapt.router.navigateToElement.bind(Adapt.router);return Adapt.router});define("core/js/collections/adaptSubsetCollection",["core/js/adapt","./adaptCollection"],function(Adapt,AdaptCollection){var AdaptSubsetCollection=function(_AdaptCollection2){"use strict";_inherits(AdaptSubsetCollection,_AdaptCollection2);var _super15=_createSuper(AdaptSubsetCollection);function AdaptSubsetCollection(){_classCallCheck(this,AdaptSubsetCollection);return _super15.apply(this,arguments)}_createClass(AdaptSubsetCollection,[{key:"initialize",value:function initialize(models,options){_get(_getPrototypeOf(AdaptSubsetCollection.prototype),"initialize",this).call(this,models,options);this.parent=options.parent;this.listenTo(this.parent,"reset",this.loadSubset)}},{key:"loadSubset",value:function loadSubset(){var _this40=this;this.set(this.parent.filter(function(model){_newArrowCheck(this,_this40);return model instanceof this.model}.bind(this)));this._byAdaptID=this.groupBy("_id")}}]);return AdaptSubsetCollection}(AdaptCollection);return AdaptSubsetCollection});define("core/js/models/pageModel",["core/js/adapt","core/js/models/contentObjectModel"],function(Adapt,ContentObjectModel){var PageModel=function(_ContentObjectModel2){"use strict";_inherits(PageModel,_ContentObjectModel2);var _super16=_createSuper(PageModel);function PageModel(){_classCallCheck(this,PageModel);return _super16.apply(this,arguments)}_createClass(PageModel,[{key:"getTypeGroup",value:function getTypeGroup(){return"page"}},{key:"_children",get:function get(){Adapt.log.deprecated("pageModel._children, use menuModel.hasManagedChildren instead, child models are defined by the JSON");return"articles"}}]);return PageModel}(ContentObjectModel);Adapt.register("page",{model:PageModel});return PageModel});define("core/js/models/articleModel",["core/js/adapt","core/js/models/adaptModel"],function(Adapt,AdaptModel){var ArticleModel=function(_AdaptModel2){"use strict";_inherits(ArticleModel,_AdaptModel2);var _super17=_createSuper(ArticleModel);function ArticleModel(){_classCallCheck(this,ArticleModel);return _super17.apply(this,arguments)}_createClass(ArticleModel,[{key:"getTypeGroup",value:function getTypeGroup(){return"article"}},{key:"_parent",get:function get(){Adapt.log.deprecated("articleModel._parent, use articleModel.getParent() instead, parent models are defined by the JSON");return"contentObjects"}},{key:"_siblings",get:function get(){Adapt.log.deprecated("articleModel._siblings, use articleModel.getSiblings() instead, sibling models are defined by the JSON");return"articles"}},{key:"_children",get:function get(){Adapt.log.deprecated("articleModel._children, use articleModel.hasManagedChildren instead, child models are defined by the JSON");return"blocks"}}]);return ArticleModel}(AdaptModel);Adapt.register("article",{model:ArticleModel});return ArticleModel});define("core/js/models/blockModel",["core/js/adapt","core/js/models/adaptModel"],function(Adapt,AdaptModel){var BlockModel=function(_AdaptModel3){"use strict";_inherits(BlockModel,_AdaptModel3);var _super18=_createSuper(BlockModel);function BlockModel(){_classCallCheck(this,BlockModel);return _super18.apply(this,arguments)}_createClass(BlockModel,[{key:"getTypeGroup",value:function getTypeGroup(){return"block"}},{key:"_parent",get:function get(){Adapt.log.deprecated("blockModel._parent, use blockModel.getParent() instead, parent models are defined by the JSON");return"articles"}},{key:"_siblings",get:function get(){Adapt.log.deprecated("blockModel._siblings, use blockModel.getSiblings() instead, sibling models are defined by the JSON");return"blocks"}},{key:"_children",get:function get(){Adapt.log.deprecated("blockModel._children, use blockModel.hasManagedChildren instead, child models are defined by the JSON");return"components"}}]);return BlockModel}(AdaptModel);Adapt.register("block",{model:BlockModel});return BlockModel});define("core/js/models/componentModel",["core/js/adapt","core/js/models/adaptModel"],function(Adapt,AdaptModel){var ComponentModel=function(_AdaptModel4){"use strict";_inherits(ComponentModel,_AdaptModel4);var _super19=_createSuper(ComponentModel);function ComponentModel(){_classCallCheck(this,ComponentModel);return _super19.apply(this,arguments)}_createClass(ComponentModel,[{key:"getTypeGroup",value:function getTypeGroup(){return"component"}},{key:"defaults",value:function defaults(){return AdaptModel.resultExtend("defaults",{_isA11yComponentDescriptionEnabled:true})}},{key:"trackable",value:function trackable(){return AdaptModel.resultExtend("trackable",["_userAnswer"])}},{key:"_parent",get:function get(){Adapt.log.deprecated("componentModel._parent, use componentModel.getParent() instead, parent models are defined by the JSON");return"blocks"}},{key:"_siblings",get:function get(){Adapt.log.deprecated("componentModel._siblings, use componentModel.getSiblings() instead, sibling models are defined by the JSON");return"components"}},{key:"hasManagedChildren",get:function get(){return false}}]);return ComponentModel}(AdaptModel);Adapt.register("component",{model:ComponentModel});return ComponentModel});define("core/js/views/adaptView",["core/js/adapt"],function(Adapt){var AdaptView=function(_Backbone$View){"use strict";_inherits(AdaptView,_Backbone$View);var _super20=_createSuper(AdaptView);function AdaptView(){_classCallCheck(this,AdaptView);return _super20.apply(this,arguments)}_createClass(AdaptView,[{key:"attributes",value:function attributes(){return{"data-adapt-id":this.model.get("_id")}}},{key:"initialize",value:function initialize(){this.listenTo(this.model,{"change:_isVisible":this.toggleVisibility,"change:_isHidden":this.toggleHidden,"change:_isComplete":this.onIsCompleteChange});this.model.set({"_globals":Adapt.course.get("_globals"),"_isReady":false});this._isRemoved=false;if(Adapt.location._currentId===this.model.get("_id")){Adapt.parentView=this}this.preRender();this.render();this.setupOnScreenHandler()}},{key:"preRender",value:function preRender(){}},{key:"postRender",value:function postRender(){this.addChildren()}},{key:"render",value:function render(){var _this41=this;var type=this.constructor.type;Adapt.trigger("".concat(type,"View:preRender view:preRender"),this);var data=this.model.toJSON();data.view=this;var template=Handlebars.templates[this.constructor.template];this.$el.html(template(data));Adapt.trigger("".concat(type,"View:render view:render"),this);_.defer(function(){_newArrowCheck(this,_this41);if(this._isRemoved)return;this.postRender();Adapt.trigger("".concat(type,"View:postRender view:postRender"),this)}.bind(this));return this}},{key:"setupOnScreenHandler",value:function setupOnScreenHandler(){var _this42=this;var onscreen=this.model.get("_onScreen");if(!onscreen||!onscreen._isEnabled)return;this.$el.addClass("has-animation ".concat(onscreen._classes,"-before"));this.$el.on("onscreen.adaptView",function(e,m){_newArrowCheck(this,_this42);if(!m.onscreen)return;var minVerticalInview=onscreen._percentInviewVertical||33;if(m.percentInviewVertical<minVerticalInview)return;this.$el.addClass("".concat(onscreen._classes,"-after")).off("onscreen.adaptView")}.bind(this))}},{key:"addChildren",value:function addChildren(){var _this43=this;var nthChild=0;var _this$model$getChildr=this.model.getChildren(),models=_this$model$getChildr.models;this.childViews={};models.forEach(function(model){_newArrowCheck(this,_this43);if(!model.get("_isAvailable"))return;nthChild++;model.set("_nthChild",nthChild);var ChildView=this.constructor.childView||Adapt.getViewClass(model);if(!ChildView){throw new Error("The component '".concat(model.attributes._id,"' ('").concat(model.attributes._component,"') has not been installed, and so is not available in your project."))}var $parentContainer=this.$(this.constructor.childContainer);var childView=new ChildView({model:model});this.childViews[model.get("_id")]=childView;$parentContainer.append(childView.$el)}.bind(this))}},{key:"findDescendantViews",value:function findDescendantViews(isParentFirst){var _this44=this;var descendants=[];this.childViews&&_.each(this.childViews,function(view){_newArrowCheck(this,_this44);if(isParentFirst)descendants.push(view);var children=view.findDescendantViews&&view.findDescendantViews(isParentFirst);if(children)descendants.push.apply(descendants,_toConsumableArray(children));if(!isParentFirst)descendants.push(view)}.bind(this));return descendants}},{key:"setReadyStatus",value:function setReadyStatus(){this.model.set("_isReady",true)}},{key:"setCompletionStatus",value:function setCompletionStatus(){if(!this.model.get("_isVisible"))return;this.model.set({_isComplete:true,_isInteractionComplete:true})}},{key:"resetCompletionStatus",value:function resetCompletionStatus(type){var _this45=this;if(!this.model.get("_canReset"))return;var descendantComponents=this.model.findDescendantModels("components");if(descendantComponents.length===0){this.model.reset(type)}else{descendantComponents.forEach(function(model){_newArrowCheck(this,_this45);return model.reset(type)}.bind(this))}}},{key:"preRemove",value:function preRemove(){var type=this.constructor.type;Adapt.trigger("".concat(type,"View:preRemove view:preRemove"),this)}},{key:"remove",value:function remove(){var _this46=this;var type=this.constructor.type;this.preRemove();Adapt.trigger("".concat(type,"View:remove view:remove"),this);this._isRemoved=true;Adapt.wait.for(function(end){var _this47=this;_newArrowCheck(this,_this46);this.$el.off("onscreen.adaptView");_get(_getPrototypeOf(AdaptView.prototype),"remove",this).call(this);_.defer(function(){_newArrowCheck(this,_this47);Adapt.trigger("".concat(type,"View:postRemove view:postRemove"),this)}.bind(this));end()}.bind(this));return this}},{key:"setVisibility",value:function setVisibility(){return this.model.get("_isVisible")?"":"u-visibility-hidden"}},{key:"toggleVisibility",value:function toggleVisibility(){this.$el.toggleClass("u-visibility-hidden",!this.model.get("_isVisible"))}},{key:"setHidden",value:function setHidden(){return this.model.get("_isHidden")?"u-display-none":""}},{key:"toggleHidden",value:function toggleHidden(){this.$el.toggleClass("u-display-none",this.model.get("_isHidden"))}},{key:"onIsCompleteChange",value:function onIsCompleteChange(model,isComplete){this.$el.toggleClass("is-complete",isComplete)}},{key:"getChildViews",value:function getChildViews(){return this.childViews}}]);return AdaptView}(Backbone.View);AdaptView.className="";return AdaptView});define("core/js/views/contentObjectView",["core/js/adapt","core/js/views/adaptView"],function(Adapt,AdaptView){var ContentObjectView=function(_AdaptView){"use strict";_inherits(ContentObjectView,_AdaptView);var _super21=_createSuper(ContentObjectView);function ContentObjectView(){_classCallCheck(this,ContentObjectView);return _super21.apply(this,arguments)}_createClass(ContentObjectView,[{key:"attributes",value:function attributes(){return AdaptView.resultExtend("attributes",{"role":"main","aria-labelledby":"".concat(this.model.get("_id"),"-heading")},this)}},{key:"className",value:function className(){return[this.constructor.type,"contentobject",this.constructor.className,this.model.get("_id"),this.model.get("_classes"),this.setVisibility(),this.model.get("_isComplete")?"is-complete":"",this.model.get("_isOptional")?"is-optional":""].filter(Boolean).join(" ")}},{key:"preRender",value:function preRender(){$.inview.lock(this.constructor.type+"View");this.disableAnimation=Adapt.config.has("_disableAnimation")?Adapt.config.get("_disableAnimation"):false;this.$el.css("opacity",0);this.listenTo(this.model,"change:_isReady",this.isReady)}},{key:"render",value:function render(){var _this48=this;var type=this.constructor.type;Adapt.trigger("".concat(type,"View:preRender contentObjectView:preRender view:preRender"),this);var data=this.model.toJSON();data.view=this;var template=Handlebars.templates[this.constructor.template];this.$el.html(template(data));Adapt.trigger("".concat(type,"View:render contentObjectView:render view:render"),this);_.defer(function(){_newArrowCheck(this,_this48);if(this._isRemoved)return;this.postRender();Adapt.trigger("".concat(type,"View:postRender contentObjectView:postRender view:postRender"),this)}.bind(this));return this}},{key:"isReady",value:function(){var _isReady=_asyncToGenerator(regeneratorRuntime.mark(function _callee11(){var _this49=this;var type,performIsReady;return regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:if(!(!this.model.get("_isReady")||this._isTriggeredReady)){_context11.next=2;break}return _context11.abrupt("return");case 2:this._isTriggeredReady=true;type=this.constructor.type;performIsReady=function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark(function _callee10(){var _this50=this;var styleOptions;return regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:Adapt.trigger("".concat(type,"View:preReady contentObjectView:preReady view:preReady"),_this49);_context10.next=3;return Adapt.wait.queue();case 3:$(".js-loading").hide();if(Adapt.get("_shouldContentObjectScrollTop")!==false){$(window).scrollTop(0)}Adapt.trigger("".concat(type,"View:ready contentObjectView:ready view:ready"),_this49);$.inview.unlock("".concat(type,"View"));styleOptions={opacity:1};if(_this49.disableAnimation){_this49.$el.css(styleOptions);$.inview();_.defer(function(){_newArrowCheck(this,_this50);Adapt.trigger("".concat(type,"View:postReady contentObjectView:postReady view:postReady"),_this49)}.bind(this))}else{_this49.$el.velocity(styleOptions,{duration:"fast",complete:function complete(){_newArrowCheck(this,_this50);$.inview();Adapt.trigger("".concat(type,"View:postReady contentObjectView:postReady view:postReady"),_this49)}.bind(this)})}$(window).scroll();case 10:case"end":return _context10.stop();}}},_callee10,this)}));return function performIsReady(){return _ref5.apply(this,arguments)}}();_.defer(performIsReady);case 6:case"end":return _context11.stop();}}},_callee11,this)}));function isReady(){return _isReady.apply(this,arguments)}return isReady}()},{key:"preRemove",value:function preRemove(){var type=this.constructor.type;Adapt.trigger("".concat(type,"View:preRemove contentObjectView:preRemove view:preRemove"),this)}},{key:"remove",value:function remove(){var _this51=this;var type=this.constructor.type;this.preRemove();Adapt.trigger("".concat(type,"View:remove contentObjectView:remove view:remove"),this);this._isRemoved=true;Adapt.wait.for(function(end){var _this52=this;_newArrowCheck(this,_this51);this.$el.off("onscreen.adaptView");this.findDescendantViews().reverse().forEach(function(view){_newArrowCheck(this,_this52);view.remove()}.bind(this));this.childViews=[];_get(_getPrototypeOf(ContentObjectView.prototype),"remove",this).call(this);_.defer(function(){_newArrowCheck(this,_this52);Adapt.trigger("".concat(type,"View:postRemove contentObjectView:postRemove view:postRemove"),this);this.trigger("postRemove")}.bind(this));end()}.bind(this));return this}},{key:"destroy",value:function destroy(){this.remove();if(Adapt.parentView===this){Adapt.parentView=null}}}]);return ContentObjectView}(AdaptView);return ContentObjectView});define("core/js/views/pageView",["core/js/adapt","core/js/views/contentObjectView"],function(Adapt,ContentObjectView){var PageView=function(_ContentObjectView){"use strict";_inherits(PageView,_ContentObjectView);var _super22=_createSuper(PageView);function PageView(){_classCallCheck(this,PageView);return _super22.apply(this,arguments)}_createClass(PageView,[{key:"remove",value:function remove(){if(this.$pageLabel){this.$pageLabel.remove()}_get(_getPrototypeOf(PageView.prototype),"remove",this).call(this)}}]);return PageView}(ContentObjectView);Object.assign(PageView,{childContainer:".article__container",type:"page",template:"page"});Adapt.register("page",{view:PageView});return PageView});define("core/js/views/articleView",["core/js/adapt","core/js/views/adaptView"],function(Adapt,AdaptView){var ArticleView=function(_AdaptView2){"use strict";_inherits(ArticleView,_AdaptView2);var _super23=_createSuper(ArticleView);function ArticleView(){_classCallCheck(this,ArticleView);return _super23.apply(this,arguments)}_createClass(ArticleView,[{key:"className",value:function className(){return["article",this.model.get("_id"),this.model.get("_classes"),this.setVisibility(),this.setHidden(),this.model.get("_isComplete")?"is-complete":"",this.model.get("_isOptional")?"is-optional":""].join(" ")}}]);return ArticleView}(AdaptView);Object.assign(ArticleView,{childContainer:".block__container",type:"article",template:"article"});Adapt.register("article",{view:ArticleView});return ArticleView});define("core/js/views/blockView",["core/js/adapt","core/js/views/adaptView"],function(Adapt,AdaptView){var BlockView=function(_AdaptView3){"use strict";_inherits(BlockView,_AdaptView3);var _super24=_createSuper(BlockView);function BlockView(){_classCallCheck(this,BlockView);return _super24.apply(this,arguments)}_createClass(BlockView,[{key:"className",value:function className(){return["block",this.model.get("_id"),this.model.get("_classes"),this.setVisibility(),this.setHidden(),this.model.get("_isComplete")?"is-complete":"",this.model.get("_isOptional")?"is-optional":""].join(" ")}}]);return BlockView}(AdaptView);Object.assign(BlockView,{childContainer:".component__container",type:"block",template:"block"});Adapt.register("block",{view:BlockView});return BlockView});define("core/js/mpabc",["core/js/adapt","core/js/data","core/js/collections/adaptSubsetCollection","core/js/models/courseModel","core/js/models/contentObjectModel","core/js/models/menuModel","core/js/models/pageModel","core/js/models/articleModel","core/js/models/blockModel","core/js/models/componentModel","core/js/views/pageView","core/js/views/articleView","core/js/views/blockView"],function(Adapt,Data,AdaptSubsetCollection,CourseModel,ContentObjectModel,MenuModel,PageModel,ArticleModel,BlockModel,ComponentModel,PageView,ArticleView,BlockView){var MPABC=function(_Backbone$Controller4){"use strict";_inherits(MPABC,_Backbone$Controller4);var _super25=_createSuper(MPABC);function MPABC(){_classCallCheck(this,MPABC);return _super25.apply(this,arguments)}_createClass(MPABC,[{key:"initialize",value:function initialize(){this.listenTo(Data,{loading:this.waitForDataLoaded,loaded:this.onDataLoaded});this.setupDeprecatedSubsetCollections()}},{key:"waitForDataLoaded",value:function waitForDataLoaded(){Adapt.wait.begin()}},{key:"onDataLoaded",value:function onDataLoaded(){Adapt.wait.end()}},{key:"setupDeprecatedSubsetCollections",value:function setupDeprecatedSubsetCollections(){var _this53=this;var contentObjects=new AdaptSubsetCollection(null,{parent:Data,model:ContentObjectModel});var articles=new AdaptSubsetCollection(null,{parent:Data,model:ArticleModel});var blocks=new AdaptSubsetCollection(null,{parent:Data,model:BlockModel});var components=new AdaptSubsetCollection(null,{parent:Data,model:ComponentModel});Object.defineProperty(Adapt,"contentObjects",{get:function get(){_newArrowCheck(this,_this53);Adapt.log.deprecated("Adapt.contentObjects, please use Adapt.data instead");return contentObjects}.bind(this),set:function set(value){_newArrowCheck(this,_this53);return contentObjects=value}.bind(this)});Object.defineProperty(Adapt,"articles",{get:function get(){_newArrowCheck(this,_this53);Adapt.log.deprecated("Adapt.articles, please use Adapt.data instead");return articles}.bind(this),set:function set(value){_newArrowCheck(this,_this53);return articles=value}.bind(this)});Object.defineProperty(Adapt,"blocks",{get:function get(){_newArrowCheck(this,_this53);Adapt.log.deprecated("Adapt.blocks, please use Adapt.data instead");return blocks}.bind(this),set:function set(value){_newArrowCheck(this,_this53);return blocks=value}.bind(this)});Object.defineProperty(Adapt,"components",{get:function get(){_newArrowCheck(this,_this53);Adapt.log.deprecated("Adapt.components, please use Adapt.data instead");return components}.bind(this),set:function set(value){_newArrowCheck(this,_this53);return components=value}.bind(this)})}}]);return MPABC}(Backbone.Controller);return Adapt.mpabc=new MPABC});define("core/js/helpers",["handlebars","core/js/adapt"],function(Handlebars,Adapt){var defaultAriaLevels={"_menu":1,"_menuGroup":2,"_menuItem":2,"_page":1,"_article":2,"_block":3,"_component":4,"_componentItem":5,"_notify":1};var helpers={lowercase:function lowercase(text){return text.toLowerCase()},capitalise:function capitalise(text){return text.charAt(0).toUpperCase()+text.slice(1)},inc:function inc(index){return index+1},dec:function dec(index){return index-1},odd:function odd(index){return(index+1)%2===0?"even":"odd"},equals:function equals(value,text,block){return helpers.compare.call(this,value,"==",text,block)},compare:function compare(value,operator,text,block){switch(operator){case"===":if(value===text)return block.fn(this);break;case"=":case"==":if(value==text)return block.fn(this);break;case">=":if(value>=text)return block.fn(this);break;case"<=":if(value<=text)return block.fn(this);break;case">":if(value>text)return block.fn(this);break;case"<":if(value<text)return block.fn(this);break;}return block.inverse(this)},math:function math(lvalue,operator,rvalue,options){lvalue=parseFloat(lvalue);rvalue=parseFloat(rvalue);switch(operator){case"+":return lvalue+rvalue;case"-":return lvalue-rvalue;case"*":return lvalue*rvalue;case"/":return lvalue/rvalue;case"%":return lvalue%rvalue;}},any:function any(){var args=Array.prototype.slice.call(arguments,0,-1);var block=Array.prototype.slice.call(arguments,-1)[0];return _.any(args)?block.fn?block.fn(this):true:block.inverse?block.inverse(this):false},all:function all(){var args=Array.prototype.slice.call(arguments,0,-1);var block=Array.prototype.slice.call(arguments,-1)[0];return _.all(args)?block.fn?block.fn(this):true:block.inverse?block.inverse(this):false},none:function none(){var args=Array.prototype.slice.call(arguments,0,-1);var block=Array.prototype.slice.call(arguments,-1)[0];return!_.any(args)?block.fn?block.fn(this):true:block.inverse?block.inverse(this):false},compile:function compile(template,context){if(!template){return""}if(template instanceof Object)template=template.toString();var data=this;if(context){data=!context.data||!context.data.root?context:context.data.root}return Handlebars.compile(template)(data)},compile_a11y_text:function compile_a11y_text(template,context){Adapt.a11y.log.deprecated("a11y_text is no longer required. https://tink.uk/understanding-screen-reader-interaction-modes/");return helpers.compile.call(this,template,context)},compile_a11y_normalize:function compile_a11y_normalize(template,context){if(!template){return""}if(template instanceof Object)template=template.toString();return Handlebars.helpers.a11y_normalize.call(this,helpers.compile.call(this,template,context))},compile_a11y_remove_breaks:function compile_a11y_remove_breaks(template,context){if(!template){return""}return Handlebars.helpers.a11y_remove_breaks.call(this,helpers.compile.call(this,template,context))},import_globals:function import_globals(context){if(context.data.root._globals){return""}context.data.root._globals=Adapt.course.get("_globals");return""},import_adapt:function import_adapt(context){if(context.data.root.Adapt){return}var adapt=context.data.root.Adapt={};var i,l,name;var directImport=["config","course"];for(i=0,l=directImport.length;i<l;i++){name=directImport[i];adapt[name]=Adapt[name].toJSON()}var indexedImport=["contentObjects","articles","blocks","components"];for(i=0,l=indexedImport.length;i<l;i++){name=indexedImport[i];var importArray=Adapt[name].toJSON();var importIndex={};for(var i1=0,l1=importArray.length;i1<l1;i1++){var item=importArray[i1];importIndex[item._id]=item}adapt[name]=importIndex}return""},component_description:function component_description(override,context){if(!this._isA11yComponentDescriptionEnabled){return}var isNotDefined=!this._globals._components||!this._globals._components["_"+this._component];if(isNotDefined){return}var hasOverride=arguments.length>1;var description;if(hasOverride){description=override;description=helpers.compile(description,context)}else{description=this._globals._components["_"+this._component].ariaRegion;description=helpers.compile(description,override)}if(!description){return}return new Handlebars.SafeString("<div class=\"aria-label\">"+description+"</div>")},a11y_text:function a11y_text(text){Adapt.a11y.log.deprecated("a11y_text is no longer required. https://tink.uk/understanding-screen-reader-interaction-modes/");return text},a11y_normalize:function a11y_normalize(htmls){return Adapt.a11y.normalize.apply(Adapt.a11y,arguments)},a11y_remove_breaks:function a11y_remove_breaks(htmls){return Adapt.a11y.removeBreaks.apply(Adapt.a11y,arguments)},a11y_aria_label:function a11y_aria_label(htmls){var values=Array.prototype.slice.call(arguments,0,-1);values=values.filter(Boolean);return new Handlebars.SafeString("<div class=\"aria-label\">"+values.join(" ")+"</div>")},a11y_aria_label_relative:function a11y_aria_label_relative(htmls){var values=Array.prototype.slice.call(arguments,0,-1);values=values.filter(Boolean);return new Handlebars.SafeString("<div class=\"aria-label relative\">"+values.join(" ")+"</div>")},a11y_aria_image:function a11y_aria_image(texts){var values=Array.prototype.slice.call(arguments,0,-1);values=values.filter(Boolean);return new Handlebars.SafeString("<div class=\"aria-label\" role=\"img\" aria-label=\""+values.join(" ")+"\"></div>")},a11y_wrap_focus:function a11y_wrap_focus(){var cfg=Adapt.config.get("_accessibility");if(cfg._isPopupWrapFocusEnabled===false)return"";return new Handlebars.SafeString("<a class=\"a11y-focusguard a11y-ignore a11y-ignore-focus\" role=\"presentation\">&nbsp;</a>")},a11y_attrs_heading:function a11y_attrs_heading(levelOrType){var cfg=Adapt.config.get("_accessibility");var level=1;if(this._ariaLevel){levelOrType=this._ariaLevel}if(isNaN(levelOrType)===false){level=levelOrType}else if(_.isString(levelOrType)){cfg._ariaLevels=cfg._ariaLevels||defaultAriaLevels;if(cfg._ariaLevels&&cfg._ariaLevels["_"+levelOrType]!==undefined){level=cfg._ariaLevels["_"+levelOrType]}}return new Handlebars.SafeString(" role=\"heading\" aria-level=\""+level+"\" ")},a11y_attrs_tabbable:function a11y_attrs_tabbable(){Adapt.a11y.log.deprecated("a11y_attrs_tabbable should not be used. tabbable elements should be natively tabbable.");return new Handlebars.SafeString(" role=\"region\" tabindex=\"0\" ")},a11y_alt_text:function a11y_alt_text(visible,alternatives){var values=Array.prototype.slice.call(arguments,1,-1);values=values.filter(Boolean);return new Handlebars.SafeString("<span aria-hidden=\"true\">"+visible+"</span><span class=\"aria-label\">"+values.join(" ")+"</span>")}};_.extend(helpers,{if_value_equals:function if_value_equals(){Adapt.a11y.log.deprecated("if_value_equals, use equals instead.");return helpers.equals.apply(this,arguments)},numbers:function numbers(){Adapt.a11y.log.deprecated("numbers, use inc instead.");return helpers.inc.apply(this,arguments)},lowerCase:function lowerCase(){Adapt.a11y.log.deprecated("lowerCase, use lowercase instead.");return helpers.lowercase.apply(this,arguments)}});for(var name in helpers){if(!helpers.hasOwnProperty(name))continue;Handlebars.registerHelper(name,helpers[name])}return helpers});define("core/js/scrolling",["core/js/adapt"],function(Adapt){var Scrolling=function(_Backbone$Controller5){"use strict";_inherits(Scrolling,_Backbone$Controller5);var _super26=_createSuper(Scrolling);function Scrolling(){_classCallCheck(this,Scrolling);return _super26.apply(this,arguments)}_createClass(Scrolling,[{key:"initialize",value:function initialize(){this.$html=null;this.$app=null;this.isLegacyScrolling=true;this._checkApp();Adapt.once("configModel:dataLoaded",this._loadConfig.bind(this))}},{key:"_checkApp",value:function _checkApp(){this.$html=$("html");this.$app=$("#app");if(this.$app.length)return;this.$app=$("<div id=\"app\">");$("body").append(this.$app);this.$app.append($("#wrapper"));Adapt.log.warn("UPDATE - Your html file needs to have #app adding. See https://github.com/adaptlearning/adapt_framework/issues/2168")}},{key:"_loadConfig",value:function _loadConfig(){var config=Adapt.config.get("_scrollingContainer");if(!config||!config._isEnabled)return;var limitTo=config._limitToSelector;var isIncluded=!limitTo||this.$html.is(limitTo)||this.$html.hasClass(limitTo);if(!isIncluded)return;this.isLegacyScrolling=false;this._addStyling();this._fixJQuery();this._fixScrollTo();this._fixBrowser()}},{key:"_addStyling",value:function _addStyling(){this.$html.addClass("adapt-scrolling")}},{key:"_fixJQuery",value:function _fixJQuery(){var selectorScrollTop=$.fn.scrollTop;var $app=Adapt.scrolling.$app;$.fn.scrollTop=function(){if(this[0]===window||this[0]===document.body){return selectorScrollTop.apply($app,arguments)}return selectorScrollTop.apply(this,arguments)};var selectorOffset=$.fn.offset;$.fn.offset=function(coordinates){if(coordinates){return selectorOffset.apply(this,arguments)}var $app=Adapt.scrolling.$app;var $element=this;var elementOffset=selectorOffset.call($element);var isCorrectedContainer=$element.parents().add($element).filter("html,body,#app").length;if(!isCorrectedContainer){return elementOffset}var scrollTop=parseInt($app.scrollTop());var scrollLeft=parseInt($app.scrollLeft());var appOffset=selectorOffset.call($app);elementOffset.top+=scrollTop-appOffset.top;elementOffset.left+=scrollLeft-appOffset.left;return elementOffset}}},{key:"_fixScrollTo",value:function _fixScrollTo(){var selectorScrollTo=$.fn.scrollTo;var scrollTo=$.scrollTo;var $app=Adapt.scrolling.$app;$.fn.scrollTo=function(target,duration,settings){if(this[0]===window||this[0]===document.body){return selectorScrollTo.apply($app,arguments)}return selectorScrollTo.apply(this,arguments)};$.scrollTo=function(target,duration,settings){return selectorScrollTo.apply($app,arguments)};Object.assign($.scrollTo,scrollTo)}},{key:"_fixBrowser",value:function _fixBrowser(){var _this54=this;var app=Adapt.scrolling.$app[0];window.scrollTo=function(x,y){app.scrollTop=y||0;app.scrollLeft=x||0};var $window=$(window);this.$app.on("scroll",function(){_newArrowCheck(this,_this54);$window.scroll()}.bind(this))}},{key:"scrollTo",value:function scrollTo(selector){var _this55=this;var settings=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var location=Adapt.location._contentType?Adapt.location._contentType:Adapt.location._currentLocation;Adapt.trigger("".concat(location,":scrollTo"),selector);var disableScrollToAnimation=Adapt.config.has("_disableAnimation")?Adapt.config.get("_disableAnimation"):false;if(disableScrollToAnimation){settings.duration=0}else if(!settings.duration){settings.duration=$.scrollTo.defaults.duration}var offsetTop=0;if(Adapt.scrolling.isLegacyScrolling){offsetTop=-$(".nav").outerHeight();if($(selector).hasClass("component")){offsetTop-=$(selector).find(".aria-label").height()||0}}if(!settings.offset)settings.offset={top:offsetTop,left:0};if(settings.offset.top===undefined)settings.offset.top=offsetTop;if(settings.offset.left===undefined)settings.offset.left=0;if(settings.offset.left===0)settings.axis="y";if(Adapt.get("_canScroll")!==false){$.scrollTo(selector,settings)}_.delay(function(){_newArrowCheck(this,_this55);Adapt.a11y.focusNext(selector);Adapt.trigger("".concat(location,":scrolledTo"),selector)}.bind(this),settings.duration+300)}}]);return Scrolling}(Backbone.Controller);Adapt.scrolling=new Scrolling;Adapt.scrollTo=Adapt.scrolling.scrollTo.bind(Adapt.scrolling);return Adapt.scrolling});define("core/js/views/headingView",["core/js/adapt"],function(Adapt){var HeadingView=Backbone.View.extend({initialize:function initialize(){this.listenTo(Adapt.parentView,"postRemove",this.remove);this.listenTo(this.model,"change:_isComplete",this.render);this.render()},render:function render(){var template=Handlebars.templates[this.constructor.template];var data=this.model.toJSON();var customHeadingType=this.$el.attr("data-a11y-heading-type");if(customHeadingType)data._type=customHeadingType;this.$el.html(template(data));this.checkCompletion()},checkCompletion:function checkCompletion(){var isComplete=this.model.get("_isComplete");this.$el.toggleClass("is-complete",isComplete).toggleClass("is-incomplete",!isComplete)}},{template:"heading"});return HeadingView});define("core/js/headings",["./adapt","./views/headingView"],function(Adapt,HeadingView){var Headings=Backbone.Controller.extend({initialize:function initialize(){this.listenTo(Adapt,"view:render",this.onViewRender)},onViewRender:function onViewRender(view){var $headingSeats=view.$(".js-heading");$headingSeats.each(function(index,el){new HeadingView({el:el,model:view.model})})}});return new Headings});define("core/js/views/navigationView",["core/js/adapt"],function(Adapt){var NavigationView=function(_Backbone$View2){"use strict";_inherits(NavigationView,_Backbone$View2);var _super27=_createSuper(NavigationView);function NavigationView(){_classCallCheck(this,NavigationView);return _super27.apply(this,arguments)}_createClass(NavigationView,[{key:"className",value:function className(){return"nav"}},{key:"events",value:function events(){return{"click [data-event]":"triggerEvent"}}},{key:"attributes",value:function attributes(){return{"role":"navigation"}}},{key:"initialize",value:function initialize(){this.listenToOnce(Adapt,{"courseModel:dataLoading":this.remove});this.listenTo(Adapt,"router:menu router:page",this.hideNavigationButton);this.preRender()}},{key:"preRender",value:function preRender(){Adapt.trigger("navigationView:preRender",this);this.render()}},{key:"render",value:function render(){var _this56=this;var template=Handlebars.templates[this.constructor.template];this.$el.html(template({_globals:Adapt.course.get("_globals"),_accessibility:Adapt.config.get("_accessibility")})).insertBefore("#app");_.defer(function(){_newArrowCheck(this,_this56);Adapt.trigger("navigationView:postRender",this)}.bind(this));return this}},{key:"triggerEvent",value:function triggerEvent(event){event.preventDefault();var currentEvent=$(event.currentTarget).attr("data-event");Adapt.trigger("navigation:"+currentEvent);switch(currentEvent){case"backButton":Adapt.router.navigateToPreviousRoute();break;case"homeButton":Adapt.router.navigateToHomeRoute();break;case"parentButton":Adapt.router.navigateToParent();break;case"skipNavigation":this.skipNavigation();break;case"returnToStart":Adapt.startController.returnToStartLocation();break;}}},{key:"skipNavigation",value:function skipNavigation(){Adapt.a11y.focusFirst("."+Adapt.location._contentType)}},{key:"hideNavigationButton",value:function hideNavigationButton(model){var shouldHide=model.get("_type")==="course";this.$(".nav__back-btn, .nav__home-btn").toggleClass("u-display-none",shouldHide)}},{key:"showNavigationButton",value:function showNavigationButton(){this.$(".nav__back-btn, .nav__home-btn").removeClass("u-display-none")}}]);return NavigationView}(Backbone.View);NavigationView.template="nav";return NavigationView});define("core/js/navigation",["core/js/adapt","core/js/views/navigationView"],function(Adapt,NavigationView){var NavigationController=Backbone.Controller.extend({initialize:function initialize(){this.listenTo(Adapt,"adapt:preInitialize",this.addNavigationBar)},addNavigationBar:function addNavigationBar(){var adaptConfig=Adapt.course.get("_navigation");if(adaptConfig&&adaptConfig._isDefaultNavigationDisabled){Adapt.trigger("navigation:initialize");return}Adapt.navigation=new NavigationView}});return new NavigationController});define("core/js/views/componentView",["core/js/adapt","core/js/views/adaptView"],function(Adapt,AdaptView){var ComponentView=function(_AdaptView4){"use strict";_inherits(ComponentView,_AdaptView4);var _super28=_createSuper(ComponentView);function ComponentView(){_classCallCheck(this,ComponentView);return _super28.apply(this,arguments)}_createClass(ComponentView,[{key:"attributes",value:function attributes(){if(!this.model.get("_isA11yRegionEnabled")){return AdaptView.resultExtend("attributes",{},this)}return AdaptView.resultExtend("attributes",{"aria-labelledby":this.model.get("_id")+"-heading","role":"region"},this)}},{key:"className",value:function className(){return["component",this.model.get("_component").toLowerCase(),this.model.get("_id"),this.model.get("_classes"),this.setVisibility(),this.setHidden(),"is-"+this.model.get("_layout"),this.model.get("_isComplete")?"is-complete":"",this.model.get("_isOptional")?"is-optional":""].join(" ")}},{key:"renderState",value:function renderState(){Adapt.log.removed("renderState is removed and moved to item title")}},{key:"setupInviewCompletion",value:function setupInviewCompletion(inviewElementSelector,callback){this.$inviewElement=this.$(inviewElementSelector||".component__inner");this.inviewCallback=callback||this.setCompletionStatus;this.$inviewElement.on("inview.componentView",this.onInview.bind(this))}},{key:"removeInviewListener",value:function removeInviewListener(){if(!this.$inviewElement)return;this.$inviewElement.off("inview.componentView");this.$inviewElement=null}},{key:"onInview",value:function onInview(event,visible,visiblePartX,visiblePartY){if(!visible)return;switch(visiblePartY){case"top":this.hasSeenTop=true;break;case"bottom":this.hasSeenBottom=true;break;case"both":this.hasSeenTop=this.hasSeenBottom=true;}if(!this.hasSeenTop||!this.hasSeenBottom)return;this.inviewCallback();if(this.model.get("_isComplete")){this.removeInviewListener()}}},{key:"postRender",value:function postRender(){}},{key:"remove",value:function remove(){this.removeInviewListener();_get(_getPrototypeOf(ComponentView.prototype),"remove",this).call(this)}}]);return ComponentView}(AdaptView);ComponentView.type="component";return ComponentView});define("components/adapt-contrib-graphic/js/adapt-contrib-graphic",["core/js/adapt","core/js/views/componentView","core/js/models/componentModel"],function(Adapt,ComponentView,ComponentModel){var GraphicView=ComponentView.extend({preRender:function preRender(){this.listenTo(Adapt,"device:changed",this.resizeImage);this.checkIfResetOnRevisit()},postRender:function postRender(){this.resizeImage(Adapt.device.screenSize,true)},checkIfResetOnRevisit:function checkIfResetOnRevisit(){var isResetOnRevisit=this.model.get("_isResetOnRevisit");if(isResetOnRevisit){this.model.reset(isResetOnRevisit)}},resizeImage:function resizeImage(width,setupInView){var imageWidth=width==="medium"?"small":width;var imageSrc=this.model.get("_graphic")?this.model.get("_graphic")[imageWidth]:"";this.$(".js-graphic-set-image-src").attr("src",imageSrc);this.$(".graphic__widget").imageready(function(){this.setReadyStatus();if(setupInView){this.setupInviewCompletion(".graphic__widget")}}.bind(this))}});return Adapt.register("graphic",{model:ComponentModel.extend({}),view:GraphicView})});define("components/adapt-contrib-media/js/adapt-contrib-media",["core/js/adapt","core/js/views/componentView","core/js/models/componentModel","libraries/mediaelement-and-player","libraries/mediaelement-fullscreen-hook"],function(Adapt,ComponentView,ComponentModel){var froogaloopAdded=false;function purge(d){var a=d.attributes,i,l,n;if(a){for(i=a.length-1;i>=0;i-=1){n=a[i].name;if(typeof d[n]==="function"){d[n]=null}}}a=d.childNodes;if(a){l=a.length;for(i=0;i<l;i+=1){purge(d.childNodes[i])}}}_.extend(mejs.MepDefaults,{keyActions:[],defaultSeekForwardInterval:function defaultSeekForwardInterval(duration){if(_typeof(duration)==="object")return duration.duration*0.05;return duration*0.05},defaultSeekBackwardInterval:function defaultSeekBackwardInterval(duration){if(_typeof(duration)==="object")return duration.duration*0.05;return duration*0.05}});var MediaView=ComponentView.extend({events:{"click .js-media-inline-transcript-toggle":"onToggleInlineTranscript","click .js-media-external-transcript-click":"onExternalTranscriptClicked","click .js-skip-to-transcript":"onSkipToTranscript"},className:function className(){var classes=ComponentView.prototype.className.call(this);var playerOptions=this.model.get("_playerOptions");if(playerOptions&&playerOptions.toggleCaptionsButtonWhenOnlyOne){classes+=" toggle-captions"}return classes},preRender:function preRender(){this.listenTo(Adapt,{"device:resize":this.onScreenSizeChanged,"device:changed":this.onDeviceChanged,"media:stop":this.onMediaStop});_.bindAll(this,"onMediaElementPlay","onMediaElementPause","onMediaElementEnded","onMediaElementTimeUpdate","onMediaElementSeeking");this.model.set({"_isMediaEnded":false,"_isMediaPlaying":false});if(this.model.get("_media").source){var media=this.model.get("_media");if(window.location.protocol==="https:"&&media.source.indexOf("http:")===0){media.source=media.source.replace(/^http\:/,"https:")}this.model.set("_media",media)}this.checkIfResetOnRevisit()},postRender:function postRender(){this.setupPlayer();this.addMejsButtonClass()},addMejsButtonClass:function addMejsButtonClass(){this.$(".mejs-overlay-button").addClass("icon")},setupPlayer:function setupPlayer(){if(!this.model.get("_playerOptions"))this.model.set("_playerOptions",{});var modelOptions=this.model.get("_playerOptions");if(modelOptions.pluginPath===undefined){_.extend(modelOptions,{pluginPath:"https://cdnjs.cloudflare.com/ajax/libs/mediaelement/2.21.2/",flashName:"flashmediaelement-cdn.swf",flashScriptAccess:"always"})}if(modelOptions.features===undefined){modelOptions.features=["playpause","progress","current","duration"];if(this.model.get("_useClosedCaptions")){modelOptions.features.unshift("tracks")}if(this.model.get("_allowFullScreen")){modelOptions.features.push("fullscreen")}if(this.model.get("_showVolumeControl")){modelOptions.features.push("volume")}}modelOptions.success=_.debounce(this.onPlayerReady.bind(this),100);if(this.model.get("_useClosedCaptions")){var startLanguage=this.model.get("_startLanguage")||"en";if(!Adapt.offlineStorage.get("captions")){Adapt.offlineStorage.set("captions",startLanguage)}modelOptions.startLanguage=this.checkForSupportedCCLanguage(Adapt.offlineStorage.get("captions"))}if(modelOptions.alwaysShowControls===undefined){modelOptions.alwaysShowControls=false}if(modelOptions.hideVideoControlsOnLoad===undefined){modelOptions.hideVideoControlsOnLoad=true}this.addMediaTypeClass();this.addThirdPartyFixes(modelOptions,function createPlayer(){this.$("audio, video").mediaelementplayer(modelOptions);this.cleanUpPlayer();var _media=this.model.get("_media");if(!_media.mp3&&!_media.mp4&&!_media.ogv&&!_media.webm&&!_media.source){Adapt.log.warn("ERROR! No media is selected in components.json for component "+this.model.get("_id"));this.setReadyStatus();return}if(_media.source){this.$(".media-widget").addClass("external-source")}}.bind(this))},addMediaTypeClass:function addMediaTypeClass(){var media=this.model.get("_media");if(media&&media.type){var typeClass=media.type.replace(/\//,"-");this.$(".media__widget").addClass(typeClass)}},addThirdPartyFixes:function addThirdPartyFixes(modelOptions,callback){var media=this.model.get("_media");if(!media)return callback();switch(media.type){case"video/vimeo":modelOptions.alwaysShowControls=false;modelOptions.hideVideoControlsOnLoad=true;modelOptions.features=[];if(froogaloopAdded)return callback();$.getScript("assets/froogaloop.js").done(function(){froogaloopAdded=true;callback()}).fail(function(){froogaloopAdded=false;console.log("Could not load froogaloop.js")});break;default:callback();}},cleanUpPlayer:function cleanUpPlayer(){this.$(".media__widget").children(".mejs-offscreen").remove();this.$("[role=application]").removeAttr("role tabindex");this.$("[aria-controls]").removeAttr("aria-controls")},setupEventListeners:function setupEventListeners(){this.completionEvent=this.model.get("_setCompletionOn")||"play";if(this.completionEvent==="inview"){this.setupInviewCompletion(".component__widget")}if(this.model.get("_preventForwardScrubbing")&&!this.model.get("_isComplete")){$(this.mediaElement).on({"seeking":this.onMediaElementSeeking,"timeupdate":this.onMediaElementTimeUpdate})}$(this.mediaElement).on({"play":this.onMediaElementPlay,"pause":this.onMediaElementPause,"ended":this.onMediaElementEnded});_.delay(this.listenForCaptionsChange.bind(this),250)},listenForCaptionsChange:function listenForCaptionsChange(){if(!this.model.get("_useClosedCaptions"))return;var selector=this.model.get("_playerOptions").toggleCaptionsButtonWhenOnlyOne?".mejs-captions-button button":".mejs-captions-selector";this.$(selector).on("click.mediaCaptionsChange",_.debounce(function(){var srclang=this.mediaElement.player.selectedTrack?this.mediaElement.player.selectedTrack.srclang:"none";Adapt.offlineStorage.set("captions",srclang);Adapt.trigger("media:captionsChange",this,srclang)}.bind(this),250));this.listenTo(Adapt,"media:captionsChange",this.onCaptionsChanged)},onCaptionsChanged:function onCaptionsChanged(view,lang){if(view&&view.cid===this.cid)return;lang=this.checkForSupportedCCLanguage(lang);this.mediaElement.player.setTrack(lang);var $inputs=this.$(".mejs-captions-selector input");$inputs.filter(":checked").prop("checked",false);$inputs.filter("[value=\""+lang+"\"]").prop("checked",true)},checkForSupportedCCLanguage:function checkForSupportedCCLanguage(lang){if(!lang||lang==="none")return"none";if(_.findWhere(this.model.get("_media").cc,{srclang:lang}))return lang;return this.model.get("_startLanguage")||"none"},onMediaElementPlay:function onMediaElementPlay(event){this.queueGlobalEvent("play");Adapt.trigger("media:stop",this);if(this.model.get("_pauseWhenOffScreen"))$(this.mediaElement).on("inview",this.onMediaElementInview);this.model.set({"_isMediaPlaying":true,"_isMediaEnded":false});if(this.completionEvent==="play"){this.setCompletionStatus()}},onMediaElementPause:function onMediaElementPause(event){this.queueGlobalEvent("pause");$(this.mediaElement).off("inview",this.onMediaElementInview);this.model.set("_isMediaPlaying",false)},onMediaElementEnded:function onMediaElementEnded(event){this.queueGlobalEvent("ended");this.model.set("_isMediaEnded",true);if(this.completionEvent==="ended"){this.setCompletionStatus()}},onMediaElementInview:function onMediaElementInview(event,isInView){if(!isInView&&!event.currentTarget.paused)event.currentTarget.pause()},onMediaElementSeeking:function onMediaElementSeeking(event){var maxViewed=this.model.get("_maxViewed");if(!maxViewed){maxViewed=0}if(event.target.currentTime>maxViewed){event.target.currentTime=maxViewed}},onMediaElementTimeUpdate:function onMediaElementTimeUpdate(event){var maxViewed=this.model.get("_maxViewed");if(!maxViewed){maxViewed=0}if(event.target.currentTime>maxViewed){this.model.set("_maxViewed",event.target.currentTime)}},setupPlayPauseToggle:function setupPlayPauseToggle(){var player=this.mediaElement.player;if(!player){console.log("Media.setupPlayPauseToggle: OOPS! there's no player reference.");return}player.options.clickToPlayPause=false;this.onOverlayClick=this.onOverlayClick.bind(this);this.onMediaElementClick=this.onMediaElementClick.bind(this);this.$(".mejs-overlay-button").on("click",this.onOverlayClick);this.$(".mejs-mediaelement").on("click",this.onMediaElementClick)},onMediaStop:function onMediaStop(view){if(view&&view.cid===this.cid)return;if(!this.mediaElement||!this.mediaElement.player)return;this.mediaElement.player.pause()},onOverlayClick:function onOverlayClick(){var player=this.mediaElement.player;if(!player)return;player.play()},onMediaElementClick:function onMediaElementClick(event){var player=this.mediaElement.player;if(!player)return;var isPaused=player.media.paused;if(!isPaused)player.pause()},checkIfResetOnRevisit:function checkIfResetOnRevisit(){var isResetOnRevisit=this.model.get("_isResetOnRevisit");if(isResetOnRevisit){this.model.reset(isResetOnRevisit)}},remove:function remove(){this.$(".mejs-overlay-button").off("click",this.onOverlayClick);this.$(".mejs-mediaelement").off("click",this.onMediaElementClick);if(this.model.get("_useClosedCaptions")){var selector=this.model.get("_playerOptions").toggleCaptionsButtonWhenOnlyOne?".mejs-captions-button button":".mejs-captions-selector";this.$(selector).off("click.mediaCaptionsChange")}var modelOptions=this.model.get("_playerOptions");delete modelOptions.success;var media=this.model.get("_media");if(media){switch(media.type){case"video/vimeo":this.$("iframe")[0].isRemoved=true;}}if(this.mediaElement&&this.mediaElement.player){var player_id=this.mediaElement.player.id;purge(this.$el[0]);this.mediaElement.player.remove();if(mejs.players[player_id]){delete mejs.players[player_id]}}if(this.mediaElement){$(this.mediaElement).off({"play":this.onMediaElementPlay,"pause":this.onMediaElementPause,"ended":this.onMediaElementEnded,"seeking":this.onMediaElementSeeking,"timeupdate":this.onMediaElementTimeUpdate,"inview":this.onMediaElementInview});this.mediaElement.src="";$(this.mediaElement.pluginElement).remove();delete this.mediaElement}ComponentView.prototype.remove.call(this)},onDeviceChanged:function onDeviceChanged(){if(this.model.get("_media").source){this.$(".mejs-container").width(this.$(".component__widget").width())}},onPlayerReady:function onPlayerReady(mediaElement,domObject){this.mediaElement=mediaElement;var player=this.mediaElement.player;if(!player)player=mejs.players[this.$(".mejs-container").attr("id")];var hasTouch=mejs.MediaFeatures.hasTouch;if(hasTouch){this.setupPlayPauseToggle()}this.addThirdPartyAfterFixes();this.cleanUpPlayerAfter();if(player&&this.model.has("_startVolume")){player.setVolume(parseInt(this.model.get("_startVolume"))/100)}this.setReadyStatus();this.setupEventListeners()},addThirdPartyAfterFixes:function addThirdPartyAfterFixes(){var media=this.model.get("_media");switch(media.type){case"video/vimeo":this.$(".mejs-container").attr("tabindex",0);}},cleanUpPlayerAfter:function cleanUpPlayerAfter(){this.$("[aria-valuemax='NaN']").attr("aria-valuemax",0)},onScreenSizeChanged:function onScreenSizeChanged(){this.$("audio, video").width(this.$(".component__widget").width())},onSkipToTranscript:function onSkipToTranscript(){_.delay(function(){this.$(".media__transcript-btn").a11y_focus()}.bind(this),250)},onToggleInlineTranscript:function onToggleInlineTranscript(event){if(event)event.preventDefault();var $transcriptBodyContainer=this.$(".media__transcript-body-inline");var $button=this.$(".media__transcript-btn-inline");var $buttonText=this.$(".media__transcript-btn-inline .media__transcript-btn-text");if($transcriptBodyContainer.hasClass("inline-transcript-open")){$transcriptBodyContainer.stop(true,true).slideUp(function(){$(window).resize()});$button.attr("aria-expanded",false);$transcriptBodyContainer.removeClass("inline-transcript-open");$buttonText.html(this.model.get("_transcript").inlineTranscriptButton)}else{$transcriptBodyContainer.stop(true,true).slideDown(function(){$(window).resize()});$button.attr("aria-expanded",true);$transcriptBodyContainer.addClass("inline-transcript-open");$buttonText.html(this.model.get("_transcript").inlineTranscriptCloseButton);if(this.model.get("_transcript")._setCompletionOnView!==false){this.setCompletionStatus()}}},onExternalTranscriptClicked:function onExternalTranscriptClicked(event){if(this.model.get("_transcript")._setCompletionOnView!==false){this.setCompletionStatus()}},queueGlobalEvent:function queueGlobalEvent(eventType){var t=Date.now();var lastEvent=this.lastEvent||{time:0};var timeSinceLastEvent=t-lastEvent.time;var debounceTime=500;this.lastEvent={time:t,type:eventType};clearTimeout(this.eventTimeout);if(eventType==="ended"){return this.triggerGlobalEvent(eventType)}if(timeSinceLastEvent>debounceTime){this.eventTimeout=setTimeout(this.triggerGlobalEvent.bind(this,eventType),debounceTime)}},triggerGlobalEvent:function triggerGlobalEvent(eventType){var player=this.mediaElement.player;var eventObj={type:eventType,src:this.mediaElement.src,platform:this.mediaElement.pluginType};if(player)eventObj.isVideo=player.isVideo;Adapt.trigger("media",eventObj)}});return Adapt.register("media",{model:ComponentModel.extend({}),view:MediaView})});define("components/adapt-contrib-text/js/adapt-contrib-text",["core/js/adapt","core/js/views/componentView","core/js/models/componentModel"],function(Adapt,ComponentView,ComponentModel){var TextView=ComponentView.extend({preRender:function preRender(){this.checkIfResetOnRevisit()},postRender:function postRender(){this.setReadyStatus();this.setupInview()},setupInview:function setupInview(){var selector=this.getInviewElementSelector();if(!selector){this.setCompletionStatus();return}this.setupInviewCompletion(selector)},getInviewElementSelector:function getInviewElementSelector(){if(this.model.get("body"))return".component__body";if(this.model.get("instruction"))return".component__instruction";if(this.model.get("displayTitle"))return".component__title";return null},checkIfResetOnRevisit:function checkIfResetOnRevisit(){var isResetOnRevisit=this.model.get("_isResetOnRevisit");if(isResetOnRevisit){this.model.reset(isResetOnRevisit)}}},{template:"text"});return Adapt.register("text",{model:ComponentModel.extend({}),view:TextView})});define("extensions/adapt-contrib-aboutPage/js/adapt-contrib-aboutPage",["core/js/adapt"],function(Adapt){var aboutPage=_.extend({initialize:function initialize(){this.listenTo(Adapt,"aboutPage:showAboutPage",this.showAboutPage);this.listenTo(Adapt,"router:course",this.updateCourse);this.listenTo(Adapt,"pageView:ready",this.addLink);this.listenTo(Adapt,"menuView:ready",this.addLink);this.listenTo(Adapt,"router:page",this.updatePage)},updateCourse:function updateCourse(target){this.currentCourse=target},updatePage:function updatePage(target){this.contentObject=target},getPage:function getPage(){return this.contentObject},getCourse:function getCourse(){return this.currentCourse},addLink:function addLink(){title="About";var contactEmail="";var contactLinkText="";try{title=Adapt.course.get("_globals")._extensions._aboutPage.linkText}catch(err){}try{items=Adapt.course.get("_aboutPage")._items}catch(err){return}try{if($(".about-links").prop("innerHTML").trim().length>0){$(".about-links").append(" | ")}$(".about-links").append("<a class=\"about\" onClick='callAboutPageTrigger();'>"+title+"</a>")}catch(err){}try{contactEmail=Adapt.course.get("_globals")._extensions._aboutPage.contactEMail;contactLinkText=Adapt.course.get("_globals")._extensions._aboutPage.contactLinkText;if(contactLinkText!=""&&contactEmail!=""){console.log(contactEmail);console.log(contactLinkText);if($(".about-links").prop("innerHTML").trim().length>0){$(".about-links").append(" | ")}$(".about-links").append("<a class=\"contact\" href=\"mailto:"+contactEmail+"\" target=\"_blank\">"+contactLinkText+"</a>")}}catch(err){console.log(err)}try{aboutcredit=this.contentObject.get("_aboutPage").aboutCredit;if(aboutcredit!=""){$(".about-credit").html(aboutcredit)}}catch(err){}try{aboutSLtext=this.contentObject.get("_aboutPage").SL_text;if(aboutSLtext!=""){$("#about-SL-text").html(aboutSLtext)}}catch(err){}},showAboutPage:function showAboutPage(){items=[];try{items=this.contentObject.get("_aboutPage")._items}catch(err){}if(items.length<1){items=Adapt.course.get("_aboutPage")._items}title="About";try{title=Adapt.course.get("_globals")._extensions._aboutPage.titleText}catch(err){}string="";count=1;_.each(items,function(item){graphic=item._graphic;if(graphic.src){string+="<div class='aboutPageGraphicElement'><img class='aboutPageGraphic' src='"+graphic.src+"'/></div>"}string+="<div class='aboutPageText'>";string+="<h2>"+item.title+"</h2>";string+="<p>"+item.description+"</p>";string+="</div>";string+="<hr class='aboutPageRule'/>"});var alertObject={title:title,body:string};Adapt.once("notify:closed",function(){Adapt.trigger("tutor:closed")});Adapt.trigger("notify:popup",alertObject);Adapt.trigger("tutor:opened")}},Backbone.Events);aboutPage.initialize();return aboutPage});function callAboutPageTrigger(){var Adapt=require("core/js/adapt");Adapt.trigger("aboutPage:showAboutPage")};define("extensions/adapt-contrib-pageLevelProgress/js/completionCalculations",["core/js/adapt"],function(Adapt){var Completion=Backbone.Controller.extend({subProgressCompleted:0,subProgressTotal:0,nonAssessmentCompleted:0,nonAssessmentTotal:0,assessmentCompleted:0,assessmentTotal:0});function calculateCompletion(contentObjectModel){var completion=new Completion;var viewType=contentObjectModel.get("_type");var isComplete=contentObjectModel.get("_isComplete")?1:0;var children;switch(viewType){case"page":children=contentObjectModel.getAllDescendantModels().filter(function(model){return model.get("_isAvailable")&&!model.get("_isOptional")});var availableChildren=filterAvailableChildren(children);var components=getPageLevelProgressEnabledModels(availableChildren);var nonAssessmentComponents=getNonAssessmentComponents(components);completion.nonAssessmentTotal=nonAssessmentComponents.length;completion.nonAssessmentCompleted=getComponentsCompleted(nonAssessmentComponents).length;var assessmentComponents=getAssessmentComponents(components);completion.assessmentTotal=assessmentComponents.length;completion.assessmentCompleted=getComponentsInteractionCompleted(assessmentComponents).length;if(contentObjectModel.get("_pageLevelProgress")._excludeAssessments!==true){completion.subProgressCompleted=contentObjectModel.get("_subProgressComplete")||0;completion.subProgressTotal=contentObjectModel.get("_subProgressTotal")||0}var showPageCompletionCourse=Adapt.course.get("_pageLevelProgress")&&Adapt.course.get("_pageLevelProgress")._showPageCompletion!==false;var showPageCompletionPage=contentObjectModel.get("_pageLevelProgress")&&contentObjectModel.get("_pageLevelProgress")._showPageCompletion!==false;if(showPageCompletionCourse&&showPageCompletionPage){completion.nonAssessmentCompleted+=isComplete;completion.nonAssessmentTotal+=1}break;case"menu":case"course":children=contentObjectModel.get("_children").models;children.forEach(function(contentObject){var completionObject=calculateCompletion(contentObject);completion.subProgressCompleted+=completionObject.subProgressCompleted||0;completion.subProgressTotal+=completionObject.subProgressTotal||0;completion.nonAssessmentTotal+=completionObject.nonAssessmentTotal;completion.nonAssessmentCompleted+=completionObject.nonAssessmentCompleted;completion.assessmentTotal+=completionObject.assessmentTotal;completion.assessmentCompleted+=completionObject.assessmentCompleted});break;}return completion}function getNonAssessmentComponents(models){return models.filter(function(model){return!model.get("_isPartOfAssessment")})}function getAssessmentComponents(models){return models.filter(function(model){return model.get("_isPartOfAssessment")})}function getComponentsCompleted(models){return models.filter(function(item){return item.get("_isComplete")})}function getComponentsInteractionCompleted(models){return models.filter(function(item){return item.get("_isComplete")})}function getPageLevelProgressEnabledModels(models){return models.filter(function(model){var config=model.get("_pageLevelProgress");return config&&config._isEnabled})}function unavailableInHierarchy(parents){if(!parents)return;return parents.some(function(parent){return!parent.get("_isAvailable")})}function filterAvailableChildren(children){var availableChildren=[];for(var i=0,count=children.length;i<count;i++){var parents=children[i].getAncestorModels();if(unavailableInHierarchy(parents))continue;availableChildren.push(children[i])}return availableChildren}function calculatePercentageComplete(model){var completionObject=calculateCompletion(model);var completed=completionObject.nonAssessmentCompleted+completionObject.assessmentCompleted+completionObject.subProgressCompleted;var total=completionObject.nonAssessmentTotal+completionObject.assessmentTotal+completionObject.subProgressTotal;var percentageComplete=Math.floor(completed/total*100);return percentageComplete}return{calculateCompletion:calculateCompletion,calculatePercentageComplete:calculatePercentageComplete,getPageLevelProgressEnabledModels:getPageLevelProgressEnabledModels,filterAvailableChildren:filterAvailableChildren}});define("extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressIndicatorView",["core/js/adapt"],function(Adapt){var PageLevelProgressIndicatorView=Backbone.View.extend({initialize:function initialize(options){options=options||{};this.parent=options.parent;this.calculatePercentage=options.calculatePercentage||this.calculatePercentage;this.ariaLabel=options.ariaLabel||"";this.type=options.type||this.model.get("_type");this.addClasses();this.setUpEventListeners();this.setPercentageComplete();this.render();this.refresh()},addClasses:function addClasses(){this.$el.addClass(["pagelevelprogress__indicator","is-"+this.type].join(" "))},checkAria:function checkAria(){if(!this.ariaLabel){this.$el.attr("aria-hidden",true);return}var data=this.getRenderData();this.$(".js-indicator-aria-label").html(Handlebars.compile(this.ariaLabel)(data))},setUpEventListeners:function setUpEventListeners(){if(this.parent){this.listenToOnce(this.parent,"postRemove",this.remove)}else{this.listenTo(Adapt,"remove",this.remove)}this.listenTo(this.model,"change:_isComplete",this.refresh);if(!this.collection)return;this.listenTo(this.collection,"change:_isComplete",this.refresh)},setPercentageComplete:function setPercentageComplete(){var percentage=this.calculatePercentage();this.model.set("percentageComplete",percentage);return percentage},calculatePercentage:function calculatePercentage(){return this.model.get("_isComplete")?100:0},render:function render(){var data=this.getRenderData();var template=Handlebars.templates[this.constructor.template];this.$el.html(template(data))},getRenderData:function getRenderData(){var data=this.model.toJSON();data.ariaLabel=this.ariaLabel;data.type=this.type;return data},refresh:function refresh(){this.checkCompletion();this.checkAria();this.$(".js-indicator-bar").css({width:this.calculatePercentage()+"%"})},checkCompletion:function checkCompletion(){var percentage=this.setPercentageComplete();this.$el.toggleClass("is-complete",percentage===100).toggleClass("is-incomplete",percentage!==100)}},{template:"pageLevelProgressIndicator"});return PageLevelProgressIndicatorView});define("extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressItemView",["core/js/adapt","./PageLevelProgressIndicatorView"],function(Adapt,PageLevelProgressIndicatorView){var PageLevelProgressItemView=Backbone.View.extend({className:function className(){return["pagelevelprogress__item drawer__item",this.model.get("_type")+"__indicator"].join(" ")},attributes:{"role":"listitem"},initialize:function initialize(){this.listenTo(Adapt,"remove",this.remove);this.render();this.addIndicator()},render:function render(){var data=this.model.toJSON();var template=Handlebars.templates[this.constructor.template];this.$el.html(template(data))},addIndicator:function addIndicator(){if(this.model.get("_isOptional"))return;var item=new PageLevelProgressIndicatorView({model:this.model});this.$(".js-indicator").append(item.$el)}},{template:"pageLevelProgressItem"});return PageLevelProgressItemView});define("extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressView",["core/js/adapt","./PageLevelProgressItemView"],function(Adapt,PageLevelProgressItemView){var PageLevelProgressView=Backbone.View.extend({className:"pagelevelprogress",events:{"click .js-pagelevelprogress-item-click":"scrollToPageElement"},initialize:function initialize(){this.listenTo(Adapt,"remove",this.remove);this.render();this.addChildren()},scrollToPageElement:function scrollToPageElement(event){if(event&&event.preventDefault)event.preventDefault();var $target=$(event.currentTarget);if($target.is(".is-disabled"))return;var currentComponentSelector="."+$target.attr("data-pagelevelprogress-id");Adapt.once("drawer:closed",function(){Adapt.scrollTo(currentComponentSelector,{duration:400})}).trigger("drawer:closeDrawer",$(currentComponentSelector))},render:function render(){var template=Handlebars.templates["pageLevelProgress"];this.$el.html(template({}))},addChildren:function addChildren(){var $children=this.$(".js-children");this.collection.each(function(model){$children.append(new PageLevelProgressItemView({model:model}).$el)}.bind(this))}});return PageLevelProgressView});define("extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressNavigationView",["core/js/adapt","./completionCalculations","./PageLevelProgressView","./PageLevelProgressIndicatorView"],function(Adapt,completionCalculations,PageLevelProgressView,PageLevelProgressIndicatorView){var PageLevelProgressNavigationView=Backbone.View.extend({tagName:"button",className:"btn-icon nav__btn nav__pagelevelprogress-btn pagelevelprogress__nav-btn",events:{"click":"onProgressClicked"},initialize:function initialize(){_.bindAll(this,"updateProgressBar");this.setUpEventListeners();this.render();this.addIndicator();this.deferredUpdate()},setUpEventListeners:function setUpEventListeners(){this.listenTo(Adapt,{"remove":this.remove,"router:location":this.updateProgressBar,"pageLevelProgress:update":this.refreshProgressBar})},render:function render(){var template=Handlebars.templates["pageLevelProgressNavigation"];this.$el.html(template({}))},addIndicator:function addIndicator(){this.indicatorView=new PageLevelProgressIndicatorView({model:this.model,collection:this.collection,calculatePercentage:this._getPageCompletionPercentage,ariaLabel:Adapt.course.get("_globals")._extensions._pageLevelProgress.pageLevelProgressIndicatorBar});this.$el.prepend(this.indicatorView.$el)},_getPageCompletionPercentage:function _getPageCompletionPercentage(){return completionCalculations.calculatePercentageComplete(this.model)},deferredUpdate:function deferredUpdate(){_.defer(this.updateProgressBar)},updateProgressBar:function updateProgressBar(){this.indicatorView.refresh()},refreshProgressBar:function refreshProgressBar(){this.collection.repopulate();this.updateProgressBar()},onProgressClicked:function onProgressClicked(event){if(event&&event.preventDefault)event.preventDefault();Adapt.drawer.triggerCustomView(new PageLevelProgressView({collection:this.collection}).$el,false)},remove:function remove(){Backbone.View.prototype.remove.call(this);this.collection.reset()}});return PageLevelProgressNavigationView});define("extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressCollection",["core/js/adapt","./completionCalculations"],function(Adapt,completionCalculations){var PageLevelProgressCollection=Backbone.Collection.extend({initialize:function initialize(models,options){this.listenTo(Adapt,"remove",this.reset);if(!options||!options.pageModel)return;this._pageModel=options.pageModel;this.repopulate()},repopulate:function repopulate(){this.reset();if(!this._pageModel)return;var allDescendants=this._pageModel.getAllDescendantModels(true);var currentPageItems=allDescendants.filter(function(item){return item.get("_isAvailable")===true});var availableItems=completionCalculations.filterAvailableChildren(currentPageItems);var enabledProgressItems=completionCalculations.getPageLevelProgressEnabledModels(availableItems);this.add(enabledProgressItems)}});return PageLevelProgressCollection});define("extensions/adapt-contrib-pageLevelProgress/js/adapt-contrib-pageLevelProgress",["core/js/adapt","./completionCalculations","./PageLevelProgressNavigationView","./PageLevelProgressIndicatorView","./PageLevelProgressCollection"],function(Adapt,completionCalculations,PageLevelProgressNavigationView,PageLevelProgressIndicatorView,PageLevelProgressCollection){var PageLevelProgress=Backbone.Controller.extend({initialize:function initialize(){Adapt.on({"app:dataReady":this.onDataReady.bind(this),"app:languageChanged":function(){this.stopListening()}.bind(this)})},getCourseConfig:function getCourseConfig(){return Adapt.course.get("_pageLevelProgress")},onDataReady:function onDataReady(){var coursePLPConfig=this.getCourseConfig();if(!coursePLPConfig||!coursePLPConfig._isEnabled){return}this.setUpEventListeners()},setUpEventListeners:function setUpEventListeners(){var headerIndicatorTypes=["menu","menuItem","page","article","block","component"];var headerIndicatorEventNames=headerIndicatorTypes.concat([""]).join("View:render ");this.listenTo(Adapt,headerIndicatorEventNames,this.renderHeaderIndicatorView);this.listenTo(Adapt,{"menuItemView:postRender":this.renderMenuItemIndicatorView,"router:page":this.renderNavigationView});this.listenTo(Adapt.course,"bubble:change:_isComplete",this.onCompletionChange)},onCompletionChange:function onCompletionChange(event){if(!Adapt.location._currentId)return;var currentModel=Adapt.findById(Adapt.location._currentId);var completionState={currentLocation:completionCalculations.calculatePercentageComplete(currentModel),course:completionCalculations.calculatePercentageComplete(Adapt.course)};var hasChanged=!_.isMatch(this._previousCompletionState,completionState);if(!hasChanged)return;this._previousCompletionState=completionState;Adapt.trigger("pageLevelProgress:percentageCompleteChange",completionState)},renderHeaderIndicatorView:function renderHeaderIndicatorView(view){var model=view.model;var config=model.get("_pageLevelProgress");if(!config||!config._isEnabled||!config._isCompletionIndicatorEnabled){return}var pageModel=model.findAncestor("contentObjects");var pageConfig=pageModel&&pageModel.get("_pageLevelProgress");if(pageConfig&&!pageConfig._isEnabled){return}var $headings=view.$(".js-heading");$headings.each(function(index,el){var $el=$(el);var indicatorView=new PageLevelProgressIndicatorView({parent:view,model:model});indicatorView.$el.insertAfter($el)})},renderMenuItemIndicatorView:function renderMenuItemIndicatorView(view){if(view.model.get("_id")===Adapt.location._currentId){return}var viewType=view.model.get("_type");if(viewType==="course"){return}var pageLevelProgress=view.model.get("_pageLevelProgress");if(!pageLevelProgress||!pageLevelProgress._isEnabled){return}view.$el.find(".js-menu-item-progress").append(new PageLevelProgressIndicatorView({parent:view,model:view.model,type:"menu-item",calculatePercentage:this._getMenuItemCompletionPercentage.bind(view),ariaLabel:Adapt.course.get("_globals")._extensions._pageLevelProgress.pageLevelProgressMenuBar}).$el)},_getMenuItemCompletionPercentage:function _getMenuItemCompletionPercentage(){return completionCalculations.calculatePercentageComplete(this.model)},renderNavigationView:function renderNavigationView(pageModel){var coursePLPConfig=this.getCourseConfig();if(coursePLPConfig&&coursePLPConfig._isShownInNavigationBar===false){return}var pagePLPConfig=pageModel.get("_pageLevelProgress");if(!pagePLPConfig||!pagePLPConfig._isEnabled){return}var collection=new PageLevelProgressCollection(null,{pageModel:pageModel});if(collection.length===0){return}$(".nav__drawer-btn").after(new PageLevelProgressNavigationView({model:pageModel,collection:collection}).$el)}});Adapt.pageLevelProgress=new PageLevelProgress});define("extensions/adapt-contrib-resources/js/adapt-contrib-resourcesView",["core/js/adapt"],function(Adapt){var ResourcesView=Backbone.View.extend({className:"resources",initialize:function initialize(){this.listenTo(Adapt,"remove",this.remove);this.render()},events:{"click .js-resources-filter-btn-click":"onFilterClicked"},render:function render(){this.$el.html(Handlebars.templates.resources({model:this.model.toJSON(),resources:this.collection.toJSON()}));_.defer(function(){this.listenTo(Adapt,"drawer:triggerCustomView",this.remove)}.bind(this));return this},onFilterClicked:function onFilterClicked(e){if(e&&e.preventDefault)e.preventDefault();this.$(".js-resources-filter-btn-click").removeClass("is-selected");var items;var filter=$(e.currentTarget).addClass("is-selected").attr("data-filter");if(filter==="all"){items=this.$(".js-resources-item").removeClass("u-display-none")}else{this.$(".js-resources-item").removeClass("u-display-none").not(".is-"+filter).addClass("u-display-none");items=this.$(".js-resources-item.is-"+filter)}if(items.length>0)$(items[0]).a11y_focus()}});return ResourcesView});define("extensions/adapt-contrib-resources/js/adapt-contrib-resourcesHelpers",["handlebars","core/js/adapt"],function(Handlebars,Adapt){var helpers={resources_has_type:function resources_has_type(resources,type,block){var hasType=_.some(resources,_.matcher({_type:type}));return hasType?block.fn(this):block.inverse(this)},resources_has_multiple_types:function resources_has_multiple_types(resources,block){if(resources.length===1)return block.inverse(this);var allSameType=_.every(resources,_.matcher({_type:resources[0]._type}));return allSameType?block.inverse(this):block.fn(this)},resources_get_column_count:function resources_get_column_count(resources){return _.uniq(_.pluck(resources,"_type")).length+1},resources_force_download:function resources_force_download(resource,block){if(Adapt.device.browser==="internet explorer"||Adapt.device.OS==="ios"){return block.inverse(this)}return resource._forceDownload||resource.filename?block.fn(this):block.inverse(this)}};for(var name in helpers){if(helpers.hasOwnProperty(name)){Handlebars.registerHelper(name,helpers[name])}}});define("extensions/adapt-contrib-resources/js/adapt-contrib-resources",["core/js/adapt","./adapt-contrib-resourcesView","./adapt-contrib-resourcesHelpers"],function(Adapt,ResourcesView,ResourcesHelpers){function setupResources(resourcesData){var resourcesModel=new Backbone.Model(resourcesData);var resourcesCollection=new Backbone.Collection(resourcesModel.get("_resourcesItems"));Adapt.on("resources:showResources",function(){Adapt.drawer.triggerCustomView(new ResourcesView({model:resourcesModel,collection:resourcesCollection}).$el)})}function initResources(){var courseResources=Adapt.course.get("_resources");if(!courseResources||courseResources._isEnabled===false)return;var drawerObject={title:courseResources.title,description:courseResources.description,className:"is-resources",drawerOrder:courseResources._drawerOrder||0};Adapt.drawer.addItem(drawerObject,"resources:showResources");setupResources(courseResources)}Adapt.on("adapt:start",initResources)});define("extensions/adapt-contrib-tutor/js/adapt-contrib-tutor",["core/js/adapt"],function(Adapt){Adapt.on("questionView:showFeedback",function(view){var alertObject={title:view.model.get("feedbackTitle"),body:view.model.get("feedbackMessage")};var attributes={};var classes=[];if(view.model.has("_isCorrect")){if(view.model.get("_isCorrect")){classes.push("is-correct")}else{if(view.model.has("_isAtLeastOneCorrectSelection")){if(view.model.get("_isAtLeastOneCorrectSelection")){classes.push("is-partially-correct")}else{classes.push("is-incorrect")}}else{classes.push("is-incorrect")}}}if(view.model.has("_component")){classes.push("is-component is-"+view.model.get("_component").toLowerCase())}else if(view.model.has("_extension")){classes.push("is-extension is-"+view.model.get("_extension").toLowerCase())}attributes["data-adapt-id"]=view.model.get("_id");alertObject._classes=classes.join(" ");alertObject._attributes=attributes;Adapt.once("notify:closed",function(){Adapt.trigger("tutor:closed",view,alertObject)});Adapt.trigger("notify:popup",alertObject);Adapt.trigger("tutor:opened",view,alertObject)})});define("extensions/adapt-odi-footerLink/js/adapt-odi-footerLink",["core/js/adapt"],function(Adapt){var footerLink=_.extend({initialize:function initialize(){this.listenTo(Adapt,"router:course",this.updateCourse);this.listenTo(Adapt,"pageView:ready",this.addLinks);this.listenTo(Adapt,"menuView:ready",this.addLinks);this.listenTo(Adapt,"router:page",this.updatePage)},updateCourse:function updateCourse(target){this.currentCourse=target},getCourse:function getCourse(){return this.currentCourse},updatePage:function updatePage(target){this.contentObject=target},getPage:function getPage(){return this.contentObject},addLinks:function addLinks(){try{items=this.contentObject.get("_FooterLink")._items}catch(err){}if(items.length<1){items=Adapt.course.get("_FooterLink")._items}_.each(items,function(item){title=item.title;link=item.link;try{if($(".about-links").prop("innerHTML").trim().length>0){$(".about-links").append(" | ")}$(".about-links").append("<a class=\"about\" target=\"_blank\"; href='"+link+"'>"+title+"</a>")}catch(err){}})}},Backbone.Events);footerLink.initialize();return footerLink});define("extensions/adapt-odi-licence/js/adapt-odi-licence",["core/js/adapt"],function(Adapt){var licencePage=_.extend({initialize:function initialize(){this.listenTo(Adapt,"licencePage:showLicencePage",this.showLicencePage);this.listenTo(Adapt,"router:course",this.updateCourse);this.listenTo(Adapt,"pageView:ready",this.addLink);this.listenTo(Adapt,"menuView:ready",this.addLink);this.listenTo(Adapt,"router:page",this.updatePage)},updateCourse:function updateCourse(target){this.currentCourse=target},getCourse:function getCourse(){return this.currentCourse},updatePage:function updatePage(target){this.contentObject=target},getPage:function getPage(){return this.contentObject},addLink:function addLink(){title="Licence";try{title=Adapt.course.get("_globals")._extensions._ODILicence.linkText;if($(".about-links").prop("innerHTML").trim().length>0){$(".about-links").append(" | ")}$(".about-links").append("<a class=\"about\" onClick='callLicencePageTrigger();'>"+title+"</a>")}catch(err){}},showLicencePage:function showLicencePage(){items=[];try{items=this.contentObject.get("_ODILicence")._items}catch(err){}if(items.length<1){items=Adapt.course.get("_ODILicence")._items}title="Licence";try{title=Adapt.course.get("_globals")._extensions._ODILicence.titleText}catch(err){}string="";count=1;_.each(items,function(item){graphic=item._graphic;if(graphic.src){string+="<div class='licencePageGraphicElement'><img class='licencePageGraphic' src='"+graphic.src+"'/></div>"}string+="<div class='licencePageText'>";string+="<h2>"+item.title+"</h2>";string+="<p>"+item.description+"</p>";string+="</div>";string+="<hr class='licencePageRule'/>"});var alertObject={title:title,body:string};Adapt.once("notify:closed",function(){Adapt.trigger("tutor:closed")});Adapt.trigger("notify:popup",alertObject);Adapt.trigger("tutor:opened")}},Backbone.Events);licencePage.initialize();return licencePage});function callLicencePageTrigger(){var Adapt=require("core/js/adapt");Adapt.trigger("licencePage:showLicencePage")};define("core/js/views/menuItemView",["core/js/views/adaptView"],function(AdaptView){var MenuItemView=function(_AdaptView5){"use strict";_inherits(MenuItemView,_AdaptView5);var _super29=_createSuper(MenuItemView);function MenuItemView(){_classCallCheck(this,MenuItemView);return _super29.apply(this,arguments)}_createClass(MenuItemView,[{key:"attributes",value:function attributes(){return AdaptView.resultExtend("attributes",{"role":"listitem","aria-labelledby":this.model.get("_id")+"-heading"},this)}},{key:"className",value:function className(){return["menu-item",this.constructor.className,this.model.get("_id"),this.model.get("_classes"),this.setVisibility(),this.setHidden(),this.model.get("_isVisited")?"is-visited":"",this.model.get("_isComplete")?"is-complete":"",this.model.get("_isLocked")?"is-locked":"",this.model.get("_isOptional")?"is-optional":""].join(" ")}},{key:"preRender",value:function preRender(){this.model.checkCompletionStatus();this.model.checkInteractionCompletionStatus()}},{key:"postRender",value:function postRender(){this.$el.imageready(this.setReadyStatus.bind(this))}}]);return MenuItemView}(AdaptView);MenuItemView.type="menuItem";return MenuItemView});define("core/js/views/menuView",["core/js/views/contentObjectView","core/js/views/menuItemView"],function(ContentObjectView,MenuItemView){var MenuView=function(_ContentObjectView2){"use strict";_inherits(MenuView,_ContentObjectView2);var _super30=_createSuper(MenuView);function MenuView(){_classCallCheck(this,MenuView);return _super30.apply(this,arguments)}return MenuView}(ContentObjectView);Object.assign(MenuView,{childContainer:".js-children",childView:MenuItemView,type:"menu",template:"menu"});return MenuView});define("menu/adapt-contrib-boxMenu/js/adapt-contrib-boxMenuItemView",["core/js/views/menuItemView"],function(MenuItemView){var BoxMenuItemView=MenuItemView.extend({events:{"click .js-btn-click":"onClickMenuItemButton"},onClickMenuItemButton:function onClickMenuItemButton(event){if(event&&event.preventDefault)event.preventDefault();if(this.model.get("_isLocked"))return;Backbone.history.navigate("#/id/"+this.model.get("_id"),{trigger:true})}},{className:"boxmenu-item",template:"boxMenuItem"});return BoxMenuItemView});define("menu/adapt-contrib-boxMenu/js/adapt-contrib-boxMenu",["core/js/adapt","core/js/views/menuView","./adapt-contrib-boxMenuItemView"],function(Adapt,MenuView,BoxMenuItemView){var BoxMenuView=MenuView.extend({initialize:function initialize(){MenuView.prototype.initialize.apply(this);this.setStyles();this.listenTo(Adapt,{"device:changed":this.onDeviceResize})},onDeviceResize:function onDeviceResize(){this.setStyles()},setStyles:function setStyles(){this.setBackgroundImage();this.setBackgroundStyles();this.processHeader()},setBackgroundImage:function setBackgroundImage(){var config=this.model.get("_boxMenu");var backgroundImages=config&&config._backgroundImage;if(!backgroundImages)return;var backgroundImage;switch(Adapt.device.screenSize){case"large":backgroundImage=backgroundImages._large;break;case"medium":backgroundImage=backgroundImages._medium;break;default:backgroundImage=backgroundImages._small;}if(backgroundImage){this.$el.addClass("has-bg-image").css("background-image","url("+backgroundImage+")")}else{this.$el.removeClass("has-bg-image").css("background-image","")}},setBackgroundStyles:function setBackgroundStyles(){var config=this.model.get("_boxMenu");var styles=config&&config._backgroundStyles;if(!styles)return;this.$el.css({"background-repeat":styles._backgroundRepeat,"background-size":styles._backgroundSize,"background-position":styles._backgroundPosition})},processHeader:function processHeader(){var config=this.model.get("_boxMenu");var header=config&&config._menuHeader;if(!header)return;var $header=this.$(".menu__header");this.setHeaderBackgroundImage(header,$header);this.setHeaderBackgroundStyles(header,$header);this.setHeaderMinimumHeight(header,$header)},setHeaderBackgroundImage:function setHeaderBackgroundImage(config,$header){var backgroundImages=config._backgroundImage;if(!backgroundImages)return;var backgroundImage;switch(Adapt.device.screenSize){case"large":backgroundImage=backgroundImages._large;break;case"medium":backgroundImage=backgroundImages._medium;break;default:backgroundImage=backgroundImages._small;}if(backgroundImage){$header.addClass("has-bg-image").css("background-image","url("+backgroundImage+")")}else{$header.removeClass("has-bg-image").css("background-image","")}},setHeaderBackgroundStyles:function setHeaderBackgroundStyles(config,$header){var styles=config._backgroundStyles;if(!styles)return;$header.css({"background-repeat":styles._backgroundRepeat,"background-size":styles._backgroundSize,"background-position":styles._backgroundPosition})},setHeaderMinimumHeight:function setHeaderMinimumHeight(config,$header){var minimumHeights=config._minimumHeights;if(!minimumHeights)return;var minimumHeight;switch(Adapt.device.screenSize){case"large":minimumHeight=minimumHeights._large;break;case"medium":minimumHeight=minimumHeights._medium;break;default:minimumHeight=minimumHeights._small;}if(minimumHeight){$header.addClass("has-min-height").css("min-height",minimumHeight+"px")}else{$header.removeClass("has-min-height").css("min-height","")}}},{childView:BoxMenuItemView,className:"boxmenu",template:"boxMenu"});Adapt.on("router:menu",function(model){$("#wrapper").append(new BoxMenuView({model:model}).$el)})});define("theme/5ee351b2d140fe35be130b76/js/themeView",["core/js/adapt"],function(Adapt){var ThemeView=Backbone.View.extend({className:function className(){},initialize:function initialize(){this.setStyles();this.listenTo(Adapt,{"device:changed":this.onDeviceResize,"remove":this.remove})},onDeviceResize:function onDeviceResize(){this.setStyles()},remove:function remove(){Backbone.View.prototype.remove.call(this);this.onRemove()},setStyles:function setStyles(){this.setClasses();this.setBackgroundImage();this.setBackgroundStyles();this.setMinimumHeight();this.setCustomStyles()},setClasses:function setClasses(){this.$el.addClass(this.className())},setBackgroundImage:function setBackgroundImage(){var backgroundImages=this.model.get("_backgroundImage");if(!backgroundImages)return;var backgroundImage;switch(Adapt.device.screenSize){case"large":backgroundImage=backgroundImages._large;break;case"medium":backgroundImage=backgroundImages._medium;break;default:backgroundImage=backgroundImages._small;}if(backgroundImage){this.$el.addClass("has-bg-image").css("background-image","url("+backgroundImage+")")}else{this.$el.removeClass("has-bg-image").css("background-image","")}},setBackgroundStyles:function setBackgroundStyles(){var styles=this.model.get("_backgroundStyles");if(!styles)return;this.$el.css({"background-repeat":styles._backgroundRepeat,"background-size":styles._backgroundSize,"background-position":styles._backgroundPosition})},setMinimumHeight:function setMinimumHeight(){var minimumHeights=this.model.get("_minimumHeights");if(!minimumHeights)return;var minimumHeight;switch(Adapt.device.screenSize){case"large":minimumHeight=minimumHeights._large;break;case"medium":minimumHeight=minimumHeights._medium;break;default:minimumHeight=minimumHeights._small;}if(minimumHeight){this.$el.addClass("has-min-height").css("min-height",minimumHeight+"px")}else{this.$el.removeClass("has-min-height").css("min-height","")}},setCustomStyles:function setCustomStyles(){},onRemove:function onRemove(){}});return ThemeView});define("theme/5ee351b2d140fe35be130b76/js/themePageView",["./themeView","core/js/adapt"],function(ThemeView,Adapt){var ThemePageView=ThemeView.extend({className:function className(){},setCustomStyles:function setCustomStyles(){this.processHeader()},processHeader:function processHeader(){var header=this.model.get("_pageHeader");if(!header)return;var $header=this.$(".page__header");this.setHeaderBackgroundImage(header,$header);this.setHeaderBackgroundStyles(header,$header);this.setHeaderMinimumHeight(header,$header)},setHeaderBackgroundImage:function setHeaderBackgroundImage(config,$header){var backgroundImages=config._backgroundImage;if(!backgroundImages)return;var backgroundImage;switch(Adapt.device.screenSize){case"large":backgroundImage=backgroundImages._large;break;case"medium":backgroundImage=backgroundImages._medium;break;default:backgroundImage=backgroundImages._small;}if(backgroundImage){$header.addClass("has-bg-image").css("background-image","url("+backgroundImage+")")}else{$header.removeClass("has-bg-image").css("background-image","")}},setHeaderBackgroundStyles:function setHeaderBackgroundStyles(config,$header){var styles=config._backgroundStyles;if(!styles)return;$header.css({"background-repeat":styles._backgroundRepeat,"background-size":styles._backgroundSize,"background-position":styles._backgroundPosition})},setHeaderMinimumHeight:function setHeaderMinimumHeight(config,$header){var minimumHeights=config._minimumHeights;if(!minimumHeights)return;var minimumHeight;switch(Adapt.device.screenSize){case"large":minimumHeight=minimumHeights._large;break;case"medium":minimumHeight=minimumHeights._medium;break;default:minimumHeight=minimumHeights._small;}if(minimumHeight){$header.addClass("has-min-height").css("min-height",minimumHeight+"px")}else{$header.removeClass("has-min-height").css("min-height","")}},onRemove:function onRemove(){}});return ThemePageView});define("theme/5ee351b2d140fe35be130b76/js/themeArticleView",["./themeView","core/js/adapt"],function(ThemeView,Adapt){var ThemeArticleView=ThemeView.extend({className:function className(){},setCustomStyles:function setCustomStyles(){},onRemove:function onRemove(){}});return ThemeArticleView});define("theme/5ee351b2d140fe35be130b76/js/themeBlockView",["./themeView","core/js/adapt"],function(ThemeView,Adapt){var ThemeBlockView=ThemeView.extend({className:function className(){return this.model.get("_isDividerBlock")?"is-divider-block":""},setCustomStyles:function setCustomStyles(){},onRemove:function onRemove(){}});return ThemeBlockView});define("theme/5ee351b2d140fe35be130b76/js/theme",["core/js/adapt","./themePageView","./themeArticleView","./themeBlockView","./themeView"],function(Adapt,ThemePageView,ThemeArticleView,ThemeBlockView,ThemeView){function onDataReady(){$("html").addClass(Adapt.course.get("_courseStyle"))}function onPostRender(view){var model=view.model;var theme=model.get("_odi-generic");if(!theme)return;switch(model.get("_type")){case"page":new ThemePageView({model:new Backbone.Model(theme),el:view.$el});break;case"article":new ThemeArticleView({model:new Backbone.Model(theme),el:view.$el});break;case"block":new ThemeBlockView({model:new Backbone.Model(theme),el:view.$el});break;default:new ThemeView({model:new Backbone.Model(theme),el:view.$el});}}Adapt.on({"app:dataReady":onDataReady,"pageView:postRender articleView:postRender blockView:postRender":onPostRender})});;define("plugins",["components/adapt-contrib-graphic/js/adapt-contrib-graphic","components/adapt-contrib-media/js/adapt-contrib-media","components/adapt-contrib-text/js/adapt-contrib-text","extensions/adapt-contrib-aboutPage/js/adapt-contrib-aboutPage","extensions/adapt-contrib-pageLevelProgress/js/adapt-contrib-pageLevelProgress","extensions/adapt-contrib-resources/js/adapt-contrib-resources","extensions/adapt-contrib-tutor/js/adapt-contrib-tutor","extensions/adapt-odi-footerLink/js/adapt-odi-footerLink","extensions/adapt-odi-licence/js/adapt-odi-licence","menu/adapt-contrib-boxMenu/js/adapt-contrib-boxMenu","theme/5ee351b2d140fe35be130b76/js/theme"],function(){});require(["core/js/adapt","core/js/templates","core/js/fixes","core/js/accessibility","core/js/data","core/js/offlineStorage","core/js/logging","core/js/tracking","core/js/device","core/js/drawer","core/js/notify","core/js/router","core/js/models/lockingModel","core/js/mpabc","core/js/helpers","core/js/scrolling","core/js/headings","core/js/navigation","plugins"],function(Adapt){$("body").append(Handlebars.templates.loading());Adapt.data.on("ready",function triggerInit(){Adapt.log.debug("Calling Adapt.init");Adapt.init();Adapt.off("adaptCollection:dataLoaded courseModel:dataLoaded")}).init()});define("core/js/app",function(){});
